<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-System_and_Algorithms/soh_algorithm" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.3">
<title data-rh="true">State of Health (SoH) Algorithm and Implementation | Battery Management System</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://CagriCatik.github.io/BMS/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://CagriCatik.github.io/BMS/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://CagriCatik.github.io/BMS/docs/soh-algorithm-implementation"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="State of Health (SoH) Algorithm and Implementation | Battery Management System"><meta data-rh="true" name="description" content="Introduction"><meta data-rh="true" property="og:description" content="Introduction"><link data-rh="true" rel="icon" href="/BMS/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://CagriCatik.github.io/BMS/docs/soh-algorithm-implementation"><link data-rh="true" rel="alternate" href="https://CagriCatik.github.io/BMS/docs/soh-algorithm-implementation" hreflang="en"><link data-rh="true" rel="alternate" href="https://CagriCatik.github.io/BMS/docs/soh-algorithm-implementation" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/BMS/blog/rss.xml" title="Battery Management System RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/BMS/blog/atom.xml" title="Battery Management System Atom Feed">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css" integrity="sha384-R4556vVJtIc0EJ3NKnM5ePcM78Zv5e+/ff+f6aZwYzZjnj84pK8i0PZyNnO+g0OQ" crossorigin="anonymous"><link rel="stylesheet" href="/BMS/assets/css/styles.a479dc71.css">
<script src="/BMS/assets/js/runtime~main.98a6d037.js" defer="defer"></script>
<script src="/BMS/assets/js/main.e5172c1d.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/BMS/"><div class="navbar__logo"><img src="/BMS/img/logo.png" alt="" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/BMS/img/logo.png" alt="" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/BMS/docs/Fundamentals/introduction">Docs</a><a class="navbar__item navbar__link" href="/BMS/docs/codes/rust/btms">Codes</a><a class="navbar__item navbar__link" href="/BMS/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/CagriCatik/BMS" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/BMS/docs/Fundamentals/introduction">Fundamentals</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/BMS/docs/Battery/why_lithium_battery">Battery</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/BMS/docs/Advanced-Concepts/ocv_vs_soc">Advanced Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/BMS/docs/System_and_Algorithms/introduction">System and Algorithms</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/BMS/docs/System_and_Algorithms/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/BMS/docs/System_and_Algorithms/function_of_bms">Functions of BMS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/BMS/docs/System_and_Algorithms/bms_algorithm">BMS Algorithms</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/BMS/docs/System_and_Algorithms/soh_estimation">State of Health Estimation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/BMS/docs/System_and_Algorithms/cycle_counting">Cycle Counting and State of Health</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/BMS/docs/soh-algorithm-implementation">SoH Algorithm &amp; Implementation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/BMS/docs/System_and_Algorithms/cell_balancing">Cell Balancing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/BMS/docs/System_and_Algorithms/balancing_methods">Cell Balancing Methods</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/BMS/docs/System_and_Algorithms/advanced_balancing">Cell Balancing Advanced Methods</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/BMS/docs/System_and_Algorithms/bms_architecture">BMS Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/BMS/docs/System_and_Algorithms/state_machine">BMS State Machine</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/BMS/docs/System_and_Algorithms/control_systems">BMS Control Systems and Workings</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/BMS/docs/System_and_Algorithms/development_trends">Development Trends in BMS</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/BMS/docs/Modeling_Design/soc_soh_estimation">Modeling and Desing</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/BMS/docs/Glossary/A">Glossary</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/BMS/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">System and Algorithms</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">SoH Algorithm &amp; Implementation</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>State of Health (SoH) Algorithm and Implementation</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction"><strong>Introduction</strong><a href="#introduction" class="hash-link" aria-label="Direct link to introduction" title="Direct link to introduction">​</a></h2>
<p>The <strong>State of Health (SoH)</strong> algorithm is an essential component of a Battery Management System (BMS), providing insights into the battery&#x27;s condition and predicting its remaining usable capacity. This documentation delves into the theory, methodology, and technical implementation of SoH estimation, incorporating best practices and addressing challenges. The focus is on creating a seamless, detailed, and practical explanation for engineers and industry professionals.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="state-of-health-soh-overview"><strong>State of Health (SoH) Overview</strong><a href="#state-of-health-soh-overview" class="hash-link" aria-label="Direct link to state-of-health-soh-overview" title="Direct link to state-of-health-soh-overview">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-definition"><strong>1. Definition</strong><a href="#1-definition" class="hash-link" aria-label="Direct link to 1-definition" title="Direct link to 1-definition">​</a></h3>
<p>State of Health (SoH) quantifies the battery&#x27;s ability to store and deliver energy compared to its rated capacity at the time of manufacture. SoH provides a measure of battery degradation over time due to aging, cycle usage, and environmental conditions.</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>SoH</mtext><mo>=</mo><mfrac><mtext>Remaining Capacity</mtext><mtext>Rated Capacity</mtext></mfrac><mo>×</mo><mn>100</mn></mrow><annotation encoding="application/x-tex">\text{SoH} = \frac{\text{Remaining Capacity}}{\text{Rated Capacity}} \times 100</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord text"><span class="mord">SoH</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.2408em;vertical-align:-0.8804em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord">Rated Capacity</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord">Remaining Capacity</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">100</span></span></span></span></span>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-importance"><strong>2. Importance</strong><a href="#2-importance" class="hash-link" aria-label="Direct link to 2-importance" title="Direct link to 2-importance">​</a></h3>
<ul>
<li><strong>Performance Monitoring</strong>: Ensures the battery operates within safe and optimal conditions.</li>
<li><strong>Predictive Maintenance</strong>: Alerts users when the battery requires servicing or replacement.</li>
<li><strong>Degradation Tracking</strong>: Helps in lifecycle analysis and warranty claims.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cycle-dependency-in-soh-estimation"><strong>Cycle Dependency in SoH Estimation</strong><a href="#cycle-dependency-in-soh-estimation" class="hash-link" aria-label="Direct link to cycle-dependency-in-soh-estimation" title="Direct link to cycle-dependency-in-soh-estimation">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-cycle-aging"><strong>1. Cycle Aging</strong><a href="#1-cycle-aging" class="hash-link" aria-label="Direct link to 1-cycle-aging" title="Direct link to 1-cycle-aging">​</a></h3>
<p>Battery degradation is directly influenced by the number of charge-discharge cycles completed. Each cycle contributes to a loss in the battery&#x27;s capacity.</p>
<table><thead><tr><th><strong>Cycle Count</strong></th><th><strong>Remaining Capacity (% of Rated)</strong></th></tr></thead><tbody><tr><td>0</td><td>100%</td></tr><tr><td>500</td><td>90%</td></tr><tr><td>1000</td><td>80%</td></tr><tr><td>2000</td><td>70%</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-depth-of-discharge-dod"><strong>2. Depth of Discharge (DoD)</strong><a href="#2-depth-of-discharge-dod" class="hash-link" aria-label="Direct link to 2-depth-of-discharge-dod" title="Direct link to 2-depth-of-discharge-dod">​</a></h3>
<p>The depth of discharge (DoD) represents the percentage of the battery&#x27;s total capacity used in a single discharge event. Higher DoD cycles contribute more to capacity degradation.</p>
<ul>
<li><strong>Full Cycle</strong>: A full charge from 0% to 100% SoC.</li>
<li><strong>Partial Cycle</strong>: A charge or discharge event within a fraction of the total capacity (e.g., 30% to 80%).</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="soh-algorithm-framework"><strong>SoH Algorithm Framework</strong><a href="#soh-algorithm-framework" class="hash-link" aria-label="Direct link to soh-algorithm-framework" title="Direct link to soh-algorithm-framework">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-key-components"><strong>1. Key Components</strong><a href="#1-key-components" class="hash-link" aria-label="Direct link to 1-key-components" title="Direct link to 1-key-components">​</a></h3>
<p>The SoH algorithm comprises several interconnected components:</p>
<ul>
<li><strong>Cycle Counting Algorithm</strong>: Tracks the number of charge-discharge cycles, including partial cycles.</li>
<li><strong>Cycle vs. Capacity Loss Lookup Table</strong>: Maps the number of cycles to the corresponding capacity degradation.</li>
<li><strong>Dynamic SoH Estimation</strong>: Adjusts SoH based on real-time data and past usage.</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-inputs-and-outputs"><strong>2. Inputs and Outputs</strong><a href="#2-inputs-and-outputs" class="hash-link" aria-label="Direct link to 2-inputs-and-outputs" title="Direct link to 2-inputs-and-outputs">​</a></h3>
<table><thead><tr><th><strong>Input Parameter</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td><strong>Rated Capacity</strong></td><td>Original capacity at the time of manufacture (Ah).</td></tr><tr><td><strong>Current Capacity</strong></td><td>Capacity available at a given time (Ah).</td></tr><tr><td><strong>Cycle Count</strong></td><td>Number of charge-discharge cycles completed.</td></tr><tr><td><strong>Charge Duty and Discharge Duty (DoD)</strong></td><td>Fractional cycles based on SoC changes.</td></tr></tbody></table>
<table><thead><tr><th><strong>Output Parameter</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td><strong>SoH (%)</strong></td><td>Percentage of remaining capacity.</td></tr><tr><td><strong>Cumulative Cycle Count</strong></td><td>Total equivalent full cycles completed.</td></tr><tr><td><strong>Capacity Loss</strong></td><td>Absolute and relative reduction in capacity.</td></tr></tbody></table>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-algorithm-steps"><strong>3. Algorithm Steps</strong><a href="#3-algorithm-steps" class="hash-link" aria-label="Direct link to 3-algorithm-steps" title="Direct link to 3-algorithm-steps">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-calculate-equivalent-cycles"><strong>Step 1: Calculate Equivalent Cycles</strong><a href="#step-1-calculate-equivalent-cycles" class="hash-link" aria-label="Direct link to step-1-calculate-equivalent-cycles" title="Direct link to step-1-calculate-equivalent-cycles">​</a></h4>
<p>To accurately track usage, partial cycles are aggregated into equivalent full cycles.</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>Equivalent Cycles</mtext><mo>=</mo><mo>∑</mo><mfrac><mtext>Cycle Contribution</mtext><mn>1.0</mn></mfrac></mrow><annotation encoding="application/x-tex">\text{Equivalent Cycles} = \sum \frac{\text{Cycle Contribution}}{1.0}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord text"><span class="mord">Equivalent Cycles</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.0574em;vertical-align:-0.686em"></span><span class="mop op-symbol large-op" style="position:relative;top:0em">∑</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1.0</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord">Cycle Contribution</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>
<ul>
<li><strong>Cycle Contribution</strong>:</li>
</ul>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>Cycle Contribution</mtext><mo>=</mo><mn>1</mn><mo>−</mo><mtext>Charge Duty (A)</mtext><mo>−</mo><mtext>Discharge Duty (B)</mtext></mrow><annotation encoding="application/x-tex">\text{Cycle Contribution} = 1 - \text{Charge Duty (A)} - \text{Discharge Duty (B)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord text"><span class="mord">Cycle Contribution</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord text"><span class="mord">Charge Duty (A)</span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord text"><span class="mord">Discharge Duty (B)</span></span></span></span></span></span>
<p>Where ( A ) and ( B ) represent the charge and discharge fractions in decimal format (e.g., 50% = 0.5).</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-retrieve-capacity-loss"><strong>Step 2: Retrieve Capacity Loss</strong><a href="#step-2-retrieve-capacity-loss" class="hash-link" aria-label="Direct link to step-2-retrieve-capacity-loss" title="Direct link to step-2-retrieve-capacity-loss">​</a></h4>
<p>Use the cumulative cycle count as an input to a pre-defined <strong>Cycle vs. Capacity Loss Lookup Table</strong> to estimate the remaining capacity.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-3-compute-soh"><strong>Step 3: Compute SoH</strong><a href="#step-3-compute-soh" class="hash-link" aria-label="Direct link to step-3-compute-soh" title="Direct link to step-3-compute-soh">​</a></h4>
<p>Calculate SoH using the formula:</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>SoH</mtext><mo>=</mo><mfrac><mtext>Remaining Capacity</mtext><mtext>Rated Capacity</mtext></mfrac><mo>×</mo><mn>100</mn></mrow><annotation encoding="application/x-tex">\text{SoH} = \frac{\text{Remaining Capacity}}{\text{Rated Capacity}} \times 100</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord text"><span class="mord">SoH</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.2408em;vertical-align:-0.8804em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord">Rated Capacity</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord">Remaining Capacity</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">100</span></span></span></span></span>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-4-cumulative-tracking"><strong>Step 4: Cumulative Tracking</strong><a href="#step-4-cumulative-tracking" class="hash-link" aria-label="Direct link to step-4-cumulative-tracking" title="Direct link to step-4-cumulative-tracking">​</a></h4>
<ul>
<li>Store cumulative cycle data in non-volatile memory to ensure long-term tracking.</li>
<li>Periodically update and calibrate SoH based on real-time and historical data.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="algorithm-design-advanced-implementation"><strong>Algorithm Design: Advanced Implementation</strong><a href="#algorithm-design-advanced-implementation" class="hash-link" aria-label="Direct link to algorithm-design-advanced-implementation" title="Direct link to algorithm-design-advanced-implementation">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-data-storage-and-memory-management"><strong>1. Data Storage and Memory Management</strong><a href="#1-data-storage-and-memory-management" class="hash-link" aria-label="Direct link to 1-data-storage-and-memory-management" title="Direct link to 1-data-storage-and-memory-management">​</a></h3>
<ul>
<li><strong>Memory Requirements</strong>: Non-volatile memory (e.g., EEPROM, flash) to store cycle counts and capacity degradation data.</li>
<li><strong>Optimization</strong>: Compress historical data or periodically reset less significant cycle data.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-handling-partial-cycles"><strong>2. Handling Partial Cycles</strong><a href="#2-handling-partial-cycles" class="hash-link" aria-label="Direct link to 2-handling-partial-cycles" title="Direct link to 2-handling-partial-cycles">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="duty-calculation"><strong>Duty Calculation</strong><a href="#duty-calculation" class="hash-link" aria-label="Direct link to duty-calculation" title="Direct link to duty-calculation">​</a></h4>
<ul>
<li><strong>Charge Duty</strong>:</li>
</ul>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mtext>Duty</mtext><mtext>charge</mtext></msub><mo>=</mo><mfrac><mrow><msub><mtext>End SoC</mtext><mtext>charge</mtext></msub><mo>−</mo><msub><mtext>Start SoC</mtext><mtext>charge</mtext></msub></mrow><mn>100</mn></mfrac></mrow><annotation encoding="application/x-tex">\text{Duty}_{\text{charge}} = \frac{\text{End SoC}_{\text{charge}} - \text{Start SoC}_{\text{charge}}}{100}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0636em;vertical-align:-0.3802em"></span><span class="mord"><span class="mord text"><span class="mord">Duty</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.242em"><span style="top:-2.4559em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">charge</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3802em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.0574em;vertical-align:-0.686em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">100</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord text"><span class="mord">End SoC</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">charge</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mord text"><span class="mord">Start SoC</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">charge</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>
<ul>
<li><strong>Discharge Duty</strong>:</li>
</ul>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mtext>Duty</mtext><mtext>discharge</mtext></msub><mo>=</mo><mfrac><mrow><msub><mtext>Start SoC</mtext><mtext>discharge</mtext></msub><mo>−</mo><msub><mtext>End SoC</mtext><mtext>discharge</mtext></msub></mrow><mn>100</mn></mfrac></mrow><annotation encoding="application/x-tex">\text{Duty}_{\text{discharge}} = \frac{\text{Start SoC}_{\text{discharge}} - \text{End SoC}_{\text{discharge}}}{100}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0636em;vertical-align:-0.3802em"></span><span class="mord"><span class="mord text"><span class="mord">Duty</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.242em"><span style="top:-2.4559em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">discharge</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3802em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.0574em;vertical-align:-0.686em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">100</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord text"><span class="mord">Start SoC</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">discharge</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mord text"><span class="mord">End SoC</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">discharge</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cycle-aggregation"><strong>Cycle Aggregation</strong><a href="#cycle-aggregation" class="hash-link" aria-label="Direct link to cycle-aggregation" title="Direct link to cycle-aggregation">​</a></h4>
<p>Sum the duties to calculate the equivalent full cycles:</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>Cycle Count</mtext><mo>=</mo><mtext>Previous Cycles</mtext><mo>+</mo><mfrac><mrow><msub><mtext>Duty</mtext><mtext>charge</mtext></msub><mo>+</mo><msub><mtext>Duty</mtext><mtext>discharge</mtext></msub></mrow><mn>1.0</mn></mfrac></mrow><annotation encoding="application/x-tex">\text{Cycle Count} = \text{Previous Cycles} + \frac{\text{Duty}_{\text{charge}} + \text{Duty}_{\text{discharge}}}{1.0}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord text"><span class="mord">Cycle Count</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord text"><span class="mord">Previous Cycles</span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:2.1396em;vertical-align:-0.686em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4536em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1.0</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.7702em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord text"><span class="mord">Duty</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.242em"><span style="top:-2.4559em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">charge</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3802em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mord text"><span class="mord">Duty</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.242em"><span style="top:-2.4559em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">discharge</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3802em"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-matlab-implementation"><strong>3. MATLAB Implementation</strong><a href="#3-matlab-implementation" class="hash-link" aria-label="Direct link to 3-matlab-implementation" title="Direct link to 3-matlab-implementation">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="pseudo-code"><strong>Pseudo-Code</strong><a href="#pseudo-code" class="hash-link" aria-label="Direct link to pseudo-code" title="Direct link to pseudo-code">​</a></h4>
<div class="language-matlab codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-matlab codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">% Define battery parameters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rated_capacity = 100; % in Ah</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">current_cycles = 0; % Initialize total cycles</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">% Define Lookup Table (Cycle vs Capacity Loss)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lookup_table = [0, 100; 500, 90; 1000, 80; 2000, 70]; % Cycle vs % Capacity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">% Input: Charge and Discharge Duty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">charge_duty = 0.4; % 40% charge duty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">discharge_duty = 0.5; % 50% discharge duty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">% Step 1: Calculate Equivalent Cycles</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cycle_contribution = 1 - charge_duty - discharge_duty;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">current_cycles = current_cycles + cycle_contribution;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">% Step 2: Retrieve Capacity Loss</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">remaining_capacity = interp1(lookup_table(:,1), lookup_table(:,2), current_cycles, &#x27;linear&#x27;, &#x27;extrap&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">% Step 3: Compute State of Health (SoH)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SoH = (remaining_capacity / rated_capacity) * 100;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">% Output Results</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">disp([&#x27;Total Cycles: &#x27;, num2str(current_cycles)]);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">disp([&#x27;Remaining Capacity: &#x27;, num2str(remaining_capacity), &#x27; Ah&#x27;]);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">disp([&#x27;State of Health (SoH): &#x27;, num2str(SoH), &#x27;%&#x27;]);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-integration-with-other-bms-functions"><strong>4. Integration with Other BMS Functions</strong><a href="#4-integration-with-other-bms-functions" class="hash-link" aria-label="Direct link to 4-integration-with-other-bms-functions" title="Direct link to 4-integration-with-other-bms-functions">​</a></h3>
<ul>
<li><strong>State of Charge (SoC)</strong>: Integrate SoH estimation with real-time SoC monitoring for enhanced accuracy.</li>
<li><strong>Fault Detection</strong>: Use SoH to detect abnormal degradation and trigger fault alarms.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="challenges-in-soh-estimation"><strong>Challenges in SoH Estimation</strong><a href="#challenges-in-soh-estimation" class="hash-link" aria-label="Direct link to challenges-in-soh-estimation" title="Direct link to challenges-in-soh-estimation">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-sensor-inaccuracies"><strong>1. Sensor Inaccuracies</strong><a href="#1-sensor-inaccuracies" class="hash-link" aria-label="Direct link to 1-sensor-inaccuracies" title="Direct link to 1-sensor-inaccuracies">​</a></h3>
<p>Voltage and current sensor noise or drift can impact the accuracy of duty and cycle calculations.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="mitigation"><strong>Mitigation</strong>:<a href="#mitigation" class="hash-link" aria-label="Direct link to mitigation" title="Direct link to mitigation">​</a></h4>
<ul>
<li>Implement filtering techniques (e.g., Kalman filters).</li>
<li>Periodically calibrate sensors with reference values.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-environmental-variability"><strong>2. Environmental Variability</strong><a href="#2-environmental-variability" class="hash-link" aria-label="Direct link to 2-environmental-variability" title="Direct link to 2-environmental-variability">​</a></h3>
<p>Temperature and load variations can accelerate degradation unpredictably.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="mitigation-1"><strong>Mitigation</strong>:<a href="#mitigation-1" class="hash-link" aria-label="Direct link to mitigation-1" title="Direct link to mitigation-1">​</a></h4>
<ul>
<li>Use temperature-compensated SoH models.</li>
<li>Introduce adaptive algorithms that account for environmental factors.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-long-term-data-management"><strong>3. Long-Term Data Management</strong><a href="#3-long-term-data-management" class="hash-link" aria-label="Direct link to 3-long-term-data-management" title="Direct link to 3-long-term-data-management">​</a></h3>
<p>Storing large amounts of cycle data in non-volatile memory is resource-intensive.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="mitigation-2"><strong>Mitigation</strong>:<a href="#mitigation-2" class="hash-link" aria-label="Direct link to mitigation-2" title="Direct link to mitigation-2">​</a></h4>
<ul>
<li>Periodically aggregate historical data.</li>
<li>Store only critical points (e.g., significant degradation milestones).</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="future-enhancements"><strong>Future Enhancements</strong><a href="#future-enhancements" class="hash-link" aria-label="Direct link to future-enhancements" title="Direct link to future-enhancements">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-predictive-soh-algorithms"><strong>1. Predictive SoH Algorithms</strong><a href="#1-predictive-soh-algorithms" class="hash-link" aria-label="Direct link to 1-predictive-soh-algorithms" title="Direct link to 1-predictive-soh-algorithms">​</a></h3>
<ul>
<li>Employ machine learning models to forecast SoH based on historical data and usage trends.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-dynamic-aging-models"><strong>2. Dynamic Aging Models</strong><a href="#2-dynamic-aging-models" class="hash-link" aria-label="Direct link to 2-dynamic-aging-models" title="Direct link to 2-dynamic-aging-models">​</a></h3>
<ul>
<li>Develop aging models that dynamically adjust for usage patterns, temperature, and other real-world conditions.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-real-time-embedded-systems"><strong>3. Real-Time Embedded Systems</strong><a href="#3-real-time-embedded-systems" class="hash-link" aria-label="Direct link to 3-real-time-embedded-systems" title="Direct link to 3-real-time-embedded-systems">​</a></h3>
<ul>
<li>Deploy the algorithm on microcontrollers or FPGA platforms for real-time SoH monitoring.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion"><strong>Conclusion</strong><a href="#conclusion" class="hash-link" aria-label="Direct link to conclusion" title="Direct link to conclusion">​</a></h2>
<p>The SoH algorithm provides a robust framework for monitoring battery health, enabling predictive maintenance, safety, and optimal performance. By integrating cycle counting, capacity degradation models, and real-time monitoring, engineers can achieve accurate and reliable SoH estimation. The detailed methodology and MATLAB implementation presented here offer a solid foundation for further development and integration into BMS systems.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/CagriCatik/BMS/edit/main/docs/04_System_and_Algorithms/06_soh_algorithm.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/BMS/docs/System_and_Algorithms/cycle_counting"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Cycle Counting and State of Health</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/BMS/docs/System_and_Algorithms/cell_balancing"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Cell Balancing</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight"><strong>Introduction</strong></a></li><li><a href="#state-of-health-soh-overview" class="table-of-contents__link toc-highlight"><strong>State of Health (SoH) Overview</strong></a><ul><li><a href="#1-definition" class="table-of-contents__link toc-highlight"><strong>1. Definition</strong></a></li><li><a href="#2-importance" class="table-of-contents__link toc-highlight"><strong>2. Importance</strong></a></li></ul></li><li><a href="#cycle-dependency-in-soh-estimation" class="table-of-contents__link toc-highlight"><strong>Cycle Dependency in SoH Estimation</strong></a><ul><li><a href="#1-cycle-aging" class="table-of-contents__link toc-highlight"><strong>1. Cycle Aging</strong></a></li><li><a href="#2-depth-of-discharge-dod" class="table-of-contents__link toc-highlight"><strong>2. Depth of Discharge (DoD)</strong></a></li></ul></li><li><a href="#soh-algorithm-framework" class="table-of-contents__link toc-highlight"><strong>SoH Algorithm Framework</strong></a><ul><li><a href="#1-key-components" class="table-of-contents__link toc-highlight"><strong>1. Key Components</strong></a></li><li><a href="#2-inputs-and-outputs" class="table-of-contents__link toc-highlight"><strong>2. Inputs and Outputs</strong></a></li><li><a href="#3-algorithm-steps" class="table-of-contents__link toc-highlight"><strong>3. Algorithm Steps</strong></a></li></ul></li><li><a href="#algorithm-design-advanced-implementation" class="table-of-contents__link toc-highlight"><strong>Algorithm Design: Advanced Implementation</strong></a><ul><li><a href="#1-data-storage-and-memory-management" class="table-of-contents__link toc-highlight"><strong>1. Data Storage and Memory Management</strong></a></li><li><a href="#2-handling-partial-cycles" class="table-of-contents__link toc-highlight"><strong>2. Handling Partial Cycles</strong></a></li><li><a href="#3-matlab-implementation" class="table-of-contents__link toc-highlight"><strong>3. MATLAB Implementation</strong></a></li><li><a href="#4-integration-with-other-bms-functions" class="table-of-contents__link toc-highlight"><strong>4. Integration with Other BMS Functions</strong></a></li></ul></li><li><a href="#challenges-in-soh-estimation" class="table-of-contents__link toc-highlight"><strong>Challenges in SoH Estimation</strong></a><ul><li><a href="#1-sensor-inaccuracies" class="table-of-contents__link toc-highlight"><strong>1. Sensor Inaccuracies</strong></a></li><li><a href="#2-environmental-variability" class="table-of-contents__link toc-highlight"><strong>2. Environmental Variability</strong></a></li><li><a href="#3-long-term-data-management" class="table-of-contents__link toc-highlight"><strong>3. Long-Term Data Management</strong></a></li></ul></li><li><a href="#future-enhancements" class="table-of-contents__link toc-highlight"><strong>Future Enhancements</strong></a><ul><li><a href="#1-predictive-soh-algorithms" class="table-of-contents__link toc-highlight"><strong>1. Predictive SoH Algorithms</strong></a></li><li><a href="#2-dynamic-aging-models" class="table-of-contents__link toc-highlight"><strong>2. Dynamic Aging Models</strong></a></li><li><a href="#3-real-time-embedded-systems" class="table-of-contents__link toc-highlight"><strong>3. Real-Time Embedded Systems</strong></a></li></ul></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight"><strong>Conclusion</strong></a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 BMS, Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>