<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-testing_and_validation/stress-test" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.3">
<title data-rh="true">StressTests | Battery Management System</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://CagriCatik.github.io/BMS/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://CagriCatik.github.io/BMS/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://CagriCatik.github.io/BMS/docs/testing_and_validation/stress-test"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="StressTests | Battery Management System"><meta data-rh="true" name="description" content="Die Implementierung eines Stresstests mit CAPL ist ein effektiver Ansatz, um sporadische Kommunikationsabbrüche in einem elektronischen Lenksystem zu untersuchen. Hier ist eine strukturierte Beschreibung, wie ein solcher Test umgesetzt werden kann:"><meta data-rh="true" property="og:description" content="Die Implementierung eines Stresstests mit CAPL ist ein effektiver Ansatz, um sporadische Kommunikationsabbrüche in einem elektronischen Lenksystem zu untersuchen. Hier ist eine strukturierte Beschreibung, wie ein solcher Test umgesetzt werden kann:"><link data-rh="true" rel="icon" href="/BMS/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://CagriCatik.github.io/BMS/docs/testing_and_validation/stress-test"><link data-rh="true" rel="alternate" href="https://CagriCatik.github.io/BMS/docs/testing_and_validation/stress-test" hreflang="en"><link data-rh="true" rel="alternate" href="https://CagriCatik.github.io/BMS/docs/testing_and_validation/stress-test" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/BMS/blog/rss.xml" title="Battery Management System RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/BMS/blog/atom.xml" title="Battery Management System Atom Feed">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css" integrity="sha384-R4556vVJtIc0EJ3NKnM5ePcM78Zv5e+/ff+f6aZwYzZjnj84pK8i0PZyNnO+g0OQ" crossorigin="anonymous"><link rel="stylesheet" href="/BMS/assets/css/styles.a479dc71.css">
<script src="/BMS/assets/js/runtime~main.98a6d037.js" defer="defer"></script>
<script src="/BMS/assets/js/main.e5172c1d.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/BMS/"><div class="navbar__logo"><img src="/BMS/img/logo.png" alt="" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/BMS/img/logo.png" alt="" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/BMS/docs/Fundamentals/introduction">Docs</a><a class="navbar__item navbar__link" href="/BMS/docs/codes/rust/btms">Codes</a><a class="navbar__item navbar__link" href="/BMS/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/CagriCatik/BMS" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><main class="docMainContainer_TBSr docMainContainerEnhanced_lQrH"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>StressTests</h1></header>
<p>Die Implementierung eines <strong>Stresstests mit CAPL</strong> ist ein effektiver Ansatz, um sporadische Kommunikationsabbrüche in einem elektronischen Lenksystem zu untersuchen. Hier ist eine strukturierte Beschreibung, wie ein solcher Test umgesetzt werden kann:</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-testanforderungen-definieren"><strong>1. Testanforderungen definieren</strong><a href="#1-testanforderungen-definieren" class="hash-link" aria-label="Direct link to 1-testanforderungen-definieren" title="Direct link to 1-testanforderungen-definieren">​</a></h3>
<ul>
<li>Ziel: Reproduzieren und Identifizieren von Kommunikationsabbrüchen.</li>
<li>Umfang:<!-- -->
<ul>
<li>Belastung der CAN-Kommunikation durch hohe Datenlast und sporadische Nachrichtenmuster.</li>
<li>Beobachtung der Reaktion des Systems unter stressigen Bedingungen.</li>
</ul>
</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-testumgebung-vorbereiten"><strong>2. Testumgebung vorbereiten</strong><a href="#2-testumgebung-vorbereiten" class="hash-link" aria-label="Direct link to 2-testumgebung-vorbereiten" title="Direct link to 2-testumgebung-vorbereiten">​</a></h3>
<ul>
<li><strong>Hardware</strong>: HiL-System, Steuergerät (ECU), CAN-Bus mit notwendiger Peripherie.</li>
<li><strong>Software</strong>: CAPL-Skript für CANalyzer oder CANoe.</li>
<li>Sicherstellen, dass:<!-- -->
<ul>
<li>Die Kommunikationsschnittstellen überwacht werden können.</li>
<li>Log-Daten erfasst und gespeichert werden.</li>
<li>Fehlerdetektionsmechanismen wie ACK-Fehler, Bus-Off-Zustände oder Frame-Drops aktiviert sind.</li>
</ul>
</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-capl-skript-für-stresstest-entwickeln"><strong>3. CAPL-Skript für Stresstest entwickeln</strong><a href="#3-capl-skript-für-stresstest-entwickeln" class="hash-link" aria-label="Direct link to 3-capl-skript-für-stresstest-entwickeln" title="Direct link to 3-capl-skript-für-stresstest-entwickeln">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="schritte-im-skript"><strong>Schritte im Skript:</strong><a href="#schritte-im-skript" class="hash-link" aria-label="Direct link to schritte-im-skript" title="Direct link to schritte-im-skript">​</a></h4>
<ol>
<li>
<p><strong>Initialisierung</strong>:</p>
<ul>
<li>Definiere CAN-Kanäle, zu testende Nachrichten und Prioritäten.</li>
<li>Initialisiere Timer für zeitgesteuerte Nachrichtenübertragung.</li>
</ul>
<div class="language-capl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-capl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">variables {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    message 0x100 msgHighPriority;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    message 0x200 msgLowPriority;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    timer stressTimer;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">on start {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    setTimer(stressTimer, 10); // Starte den Timer für Stress-Simulation.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Stress-Szenarien erzeugen</strong>:</p>
<ul>
<li>Sende Nachrichten mit hoher Frequenz.</li>
<li>Variiere Botschaftsintervallen (z. B. von 1 ms bis 100 ms).</li>
<li>Integriere zufällige Dateninhalte, um die Datenlast zu erhöhen.</li>
</ul>
<div class="language-capl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-capl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">on timer stressTimer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Sende Nachrichten mit hoher Frequenz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    msgHighPriority.Data[0] = rand(0, 255); // Zufallsdaten</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    output(msgHighPriority);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    msgLowPriority.Data[0] = rand(0, 255); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    output(msgLowPriority);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    setTimer(stressTimer, 1 + rand(0, 10)); // Zufällige Zeitintervalle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Fehler provozieren</strong>:</p>
<ul>
<li>Simuliere Bus-Störungen (z. B. Bus-Off-Szenarien).</li>
<li>Teste Grenzbedingungen wie vollständige Busüberlastung.</li>
</ul>
<div class="language-capl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-capl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">on key &#x27;F1&#x27; { // Manuelle Störung aktivieren</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    output(msgHighPriority); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    overload(10); // Simuliere hohe Last für 10 ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Loggen von Daten und Fehlern</strong>:</p>
<ul>
<li>Erfasse CAN-Fehler wie Frame-Drops, ACK-Fehler oder Bus-Off-Zustände.</li>
<li>Log-Daten speichern und mit Zeitstempeln versehen.</li>
</ul>
<div class="language-capl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-capl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">on busError {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    write(&quot;BusError: %d&quot;, this.errorCode);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-durchführung-des-tests"><strong>4. Durchführung des Tests</strong><a href="#4-durchführung-des-tests" class="hash-link" aria-label="Direct link to 4-durchführung-des-tests" title="Direct link to 4-durchführung-des-tests">​</a></h3>
<ul>
<li>Test mit verschiedenen Konfigurationen wiederholen:<!-- -->
<ul>
<li>Unterschiedliche Nachrichtenprioritäten.</li>
<li>Variierende Buslast (50 %, 80 %, 100 %).</li>
</ul>
</li>
<li>Simuliere reale Fahrsituationen, um zu prüfen, ob Fehler reproduziert werden können.</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-analyse-und-korrelation"><strong>5. Analyse und Korrelation</strong><a href="#5-analyse-und-korrelation" class="hash-link" aria-label="Direct link to 5-analyse-und-korrelation" title="Direct link to 5-analyse-und-korrelation">​</a></h3>
<ul>
<li><strong>Logs analysieren</strong>: Fehler und Zeitstempel mit Testprotokollen korrelieren.</li>
<li><strong>Fehlerursache eingrenzen</strong>:<!-- -->
<ul>
<li>Identifiziere, welche Nachricht (ID, Frequenz, Priorität) zu den Kommunikationsabbrüchen führt.</li>
<li>Prüfe Timer-Synchronisation oder andere softwarebedingte Fehlerquellen.</li>
</ul>
</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="6-optimierung-und-fehlerbehebung"><strong>6. Optimierung und Fehlerbehebung</strong><a href="#6-optimierung-und-fehlerbehebung" class="hash-link" aria-label="Direct link to 6-optimierung-und-fehlerbehebung" title="Direct link to 6-optimierung-und-fehlerbehebung">​</a></h3>
<ul>
<li>Auf Basis der Testergebnisse:<!-- -->
<ul>
<li>Software-Updates einspielen (z. B. Timer-Interrupt-Synchronisation anpassen).</li>
<li>Systemintegrität durch erneute Tests validieren.</li>
</ul>
</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ergebnis"><strong>Ergebnis</strong><a href="#ergebnis" class="hash-link" aria-label="Direct link to ergebnis" title="Direct link to ergebnis">​</a></h3>
<ul>
<li>Erfolgreiche Reproduktion der sporadischen Fehler.</li>
<li>Optimiertes CAPL-Testkonzept, das als Basis für ähnliche Projekte dient.</li>
</ul>
<p>Dieses Vorgehen zeigt ein systematisches und strukturiertes Vorgehen bei der Implementierung von Stresstests, das zuverlässig sporadische Fehler aufdecken kann.</p>
<p>Hier ist ein vollständiges Beispiel für ein <strong>CAPL-Skript</strong>, das einen <strong>Stresstest für ein elektronisches Lenksystem</strong> implementiert. Dieses Skript simuliert eine hohe CAN-Buslast, zufällige Nachrichtenintervalle und loggt auftretende Fehler:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="vollständiger-capl-code"><strong>Vollständiger CAPL-Code</strong><a href="#vollständiger-capl-code" class="hash-link" aria-label="Direct link to vollständiger-capl-code" title="Direct link to vollständiger-capl-code">​</a></h3>
<div class="language-capl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-capl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/* Stresstest für CAN-Kommunikation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Ziel: Sporadische Kommunikationsabbrüche reproduzieren */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variables {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Definiere Nachrichten (IDs und Daten)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    message 0x100 msgHighPriority;  // Hohe Priorität</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    message 0x200 msgLowPriority;   // Niedrige Priorität</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    timer stressTimer;              // Timer für Stress-Simulation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    timer errorInjectionTimer;      // Timer für Fehlersimulation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int overloadCounter = 0;        // Zähler für Overload-Simulation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Initialisierung beim Start des Skripts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">on start {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Initialisiere Nachrichten-Daten</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    msgHighPriority.DataLength = 8; // Nachrichtenlänge 8 Bytes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    msgLowPriority.DataLength = 8;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Timer starten</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    setTimer(stressTimer, 10);      // Start mit 10 ms Intervall</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    write(&quot;Stresstest gestartet...&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Haupttimer: Simuliert hohe Buslast mit zufälligen Daten</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">on timer stressTimer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Zufallsdaten für Nachricht mit hoher Priorität</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    msgHighPriority.Data[0] = rand(0, 255);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    msgHighPriority.Data[1] = rand(0, 255);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    msgHighPriority.Data[2] = rand(0, 255);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    msgHighPriority.Data[3] = rand(0, 255);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    output(msgHighPriority);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Zufallsdaten für Nachricht mit niedriger Priorität</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    msgLowPriority.Data[0] = rand(0, 255);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    msgLowPriority.Data[1] = rand(0, 255);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    msgLowPriority.Data[2] = rand(0, 255);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    msgLowPriority.Data[3] = rand(0, 255);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    output(msgLowPriority);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Timer erneut setzen (zufälliges Intervall zwischen 1 ms und 10 ms)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    setTimer(stressTimer, 1 + rand(0, 10));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Tastensteuerung: Manuelle St örung simulieren</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">on key &#x27;F1&#x27; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    write(&quot;Manuelle Überlastung aktiviert...&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    overloadCounter = 10;  // Simuliere 10 Zyklen hoher Buslast</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    setTimer(errorInjectionTimer, 1);  // Timer für Fehler-Simulation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Fehler-Simulation: Überlastung des Busses</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">on timer errorInjectionTimer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (overloadCounter &gt; 0) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        msgHighPriority.Data[0] = rand(0, 255);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        output(msgHighPriority);  // Nachricht senden</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        setTimer(errorInjectionTimer, 1);  // Nächstes Intervall (1 ms)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        overloadCounter--;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        write(&quot;Manuelle Überlastung beendet.&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Fehlerbehandlung: Bus-Fehler loggen</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">on busError {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    write(&quot;Busfehler erkannt: ErrorCode=%d&quot;, this.errorCode);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Aufzeichnung von CAN-Nachrichten</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">on message * {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    write(&quot;Empfangene Nachricht: ID=%x, Data=[%x %x %x %x %x %x %x %x]&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.id,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.data[0], this.data[1], this.data[2], this.data[3],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.data[4], this.data[5], this.data[6], this.data[7]);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="erläuterungen-zum-code"><strong>Erläuterungen zum Code</strong><a href="#erläuterungen-zum-code" class="hash-link" aria-label="Direct link to erläuterungen-zum-code" title="Direct link to erläuterungen-zum-code">​</a></h3>
<ol>
<li>
<p><strong>Hauptfunktionen</strong>:</p>
<ul>
<li><strong>Stress-Simulation</strong>: Der <code>stressTimer</code> erzeugt Nachrichten mit zufälligen Daten und zufälligen Intervallen, um den CAN-Bus zu belasten.</li>
<li><strong>Manuelle Überlastung</strong>: Mit der <code>F1</code>-Taste wird eine simulierte Überlastung des Busses für 10 Zyklen ausgelöst.</li>
<li><strong>Fehlerprotokollierung</strong>: <code>on busError</code> loggt auftretende Busfehler wie ACK-Fehler oder Bus-Off-Zustände.</li>
</ul>
</li>
<li>
<p><strong>Variablen</strong>:</p>
<ul>
<li>Nachrichten (<code>message</code>) werden definiert, um gezielt hohe und niedrige Prioritäten zu testen.</li>
<li>Timer (<code>timer</code>) steuern zeitliche Abläufe für die Simulation.</li>
</ul>
</li>
<li>
<p><strong>Logging</strong>:</p>
<ul>
<li>Nachrichten und Fehler werden in der CANoe-Konsole ausgegeben.</li>
</ul>
</li>
<li>
<p><strong>Flexibilität</strong>:</p>
<ul>
<li>Die Intervalle und Datenmuster können leicht angepasst werden.</li>
<li>Die Fehlersimulation ist flexibel über die <code>F1</code>-Taste aktivierbar.</li>
</ul>
</li>
</ol>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="erweiterungen"><strong>Erweiterungen</strong><a href="#erweiterungen" class="hash-link" aria-label="Direct link to erweiterungen" title="Direct link to erweiterungen">​</a></h3>
<ul>
<li><strong>Statistische Analyse</strong>: Log-Dateien analysieren, um zeitliche Muster von Fehlern zu erkennen.</li>
<li><strong>Automatische Trigger</strong>: Simuliere zusätzliche Bedingungen (z. B. Bus-Auslastung über 90 %).</li>
</ul>
<p>Dieses Skript bildet eine solide Grundlage für Stresstests und kann je nach Systemanforderungen erweitert werden.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/CagriCatik/BMS/edit/main/docs/06_testing_and_validation/stress-test.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-testanforderungen-definieren" class="table-of-contents__link toc-highlight"><strong>1. Testanforderungen definieren</strong></a></li><li><a href="#2-testumgebung-vorbereiten" class="table-of-contents__link toc-highlight"><strong>2. Testumgebung vorbereiten</strong></a></li><li><a href="#3-capl-skript-für-stresstest-entwickeln" class="table-of-contents__link toc-highlight"><strong>3. CAPL-Skript für Stresstest entwickeln</strong></a></li><li><a href="#4-durchführung-des-tests" class="table-of-contents__link toc-highlight"><strong>4. Durchführung des Tests</strong></a></li><li><a href="#5-analyse-und-korrelation" class="table-of-contents__link toc-highlight"><strong>5. Analyse und Korrelation</strong></a></li><li><a href="#6-optimierung-und-fehlerbehebung" class="table-of-contents__link toc-highlight"><strong>6. Optimierung und Fehlerbehebung</strong></a></li><li><a href="#ergebnis" class="table-of-contents__link toc-highlight"><strong>Ergebnis</strong></a></li><li><a href="#vollständiger-capl-code" class="table-of-contents__link toc-highlight"><strong>Vollständiger CAPL-Code</strong></a></li><li><a href="#erläuterungen-zum-code" class="table-of-contents__link toc-highlight"><strong>Erläuterungen zum Code</strong></a></li><li><a href="#erweiterungen" class="table-of-contents__link toc-highlight"><strong>Erweiterungen</strong></a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 BMS, Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>