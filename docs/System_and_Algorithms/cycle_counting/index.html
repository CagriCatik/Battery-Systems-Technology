<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-System_and_Algorithms/cycle_counting" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.3">
<title data-rh="true">Cycle Counting and State of Health | Battery Management System</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://CagriCatik.github.io/BMS/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://CagriCatik.github.io/BMS/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://CagriCatik.github.io/BMS/docs/System_and_Algorithms/cycle_counting"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Cycle Counting and State of Health | Battery Management System"><meta data-rh="true" name="description" content="Introduction"><meta data-rh="true" property="og:description" content="Introduction"><link data-rh="true" rel="icon" href="/BMS/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://CagriCatik.github.io/BMS/docs/System_and_Algorithms/cycle_counting"><link data-rh="true" rel="alternate" href="https://CagriCatik.github.io/BMS/docs/System_and_Algorithms/cycle_counting" hreflang="en"><link data-rh="true" rel="alternate" href="https://CagriCatik.github.io/BMS/docs/System_and_Algorithms/cycle_counting" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/BMS/blog/rss.xml" title="Battery Management System RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/BMS/blog/atom.xml" title="Battery Management System Atom Feed">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css" integrity="sha384-R4556vVJtIc0EJ3NKnM5ePcM78Zv5e+/ff+f6aZwYzZjnj84pK8i0PZyNnO+g0OQ" crossorigin="anonymous"><link rel="stylesheet" href="/BMS/assets/css/styles.a479dc71.css">
<script src="/BMS/assets/js/runtime~main.c70cc0a3.js" defer="defer"></script>
<script src="/BMS/assets/js/main.ef997cfa.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/BMS/"><div class="navbar__logo"><img src="/BMS/img/logo.png" alt="" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/BMS/img/logo.png" alt="" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/BMS/docs/Fundamentals/introduction">Docs</a><a class="navbar__item navbar__link" href="/BMS/docs/codes/rust/btms">Codes</a><a class="navbar__item navbar__link" href="/BMS/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/CagriCatik/BMS" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/BMS/docs/Fundamentals/introduction">Fundamentals</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/BMS/docs/Battery/why_lithium_battery">Battery</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/BMS/docs/Advanced-Concepts/ocv_vs_soc">Advanced Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/BMS/docs/System_and_Algorithms/introduction">System and Algorithms</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/BMS/docs/System_and_Algorithms/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/BMS/docs/System_and_Algorithms/function_of_bms">Functions of BMS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/BMS/docs/System_and_Algorithms/bms_algorithm">BMS Algorithms</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/BMS/docs/System_and_Algorithms/soh_estimation">State of Health Estimation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/BMS/docs/System_and_Algorithms/cycle_counting">Cycle Counting and State of Health</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/BMS/docs/soh-algorithm-implementation">SoH Algorithm &amp; Implementation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/BMS/docs/System_and_Algorithms/cell_balancing">Cell Balancing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/BMS/docs/System_and_Algorithms/balancing_methods">Cell Balancing Methods</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/BMS/docs/System_and_Algorithms/advanced_balancing">Cell Balancing Advanced Methods</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/BMS/docs/System_and_Algorithms/bms_architecture">BMS Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/BMS/docs/System_and_Algorithms/state_machine">BMS State Machine</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/BMS/docs/System_and_Algorithms/control_systems">BMS Control Systems and Workings</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/BMS/docs/System_and_Algorithms/development_trends">Development Trends in BMS</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/BMS/docs/Modeling_Design/soc_soh_estimation">Modeling and Desing</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/BMS/docs/Glossary/A">Glossary</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/BMS/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">System and Algorithms</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Cycle Counting and State of Health</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Cycle Counting and State of Health</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<p>Cycle Counting and State of Health (SoH) are pivotal components of Battery Management Systems (BMS). These metrics enable the effective monitoring of battery usage and health, ensuring optimal performance, reliability, and longevity. This documentation provides an in-depth, detailed, and seamless explanation of the methodologies, algorithms, and challenges associated with cycle counting and SoH estimation, offering insights suitable for industry professionals and engineers.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cycle-counting">Cycle Counting<a href="#cycle-counting" class="hash-link" aria-label="Direct link to Cycle Counting" title="Direct link to Cycle Counting">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-overview">1. Overview<a href="#1-overview" class="hash-link" aria-label="Direct link to 1. Overview" title="Direct link to 1. Overview">​</a></h3>
<p>Cycle counting determines the number of complete charge-discharge cycles a battery undergoes over its lifetime. Understanding the number of cycles is crucial for predicting battery degradation and estimating remaining life.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-defining-a-battery-cycle">2. Defining a Battery Cycle<a href="#2-defining-a-battery-cycle" class="hash-link" aria-label="Direct link to 2. Defining a Battery Cycle" title="Direct link to 2. Defining a Battery Cycle">​</a></h3>
<p>A cycle is defined as a full charge from a minimum State of Charge (SoC) (e.g., 20%) to a maximum SoC (e.g., 100%), followed by a discharge back to the starting SoC. Partial cycles are accumulated to represent equivalent full cycles.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="key-definitions">Key Definitions<a href="#key-definitions" class="hash-link" aria-label="Direct link to Key Definitions" title="Direct link to Key Definitions">​</a></h4>
<ul>
<li><strong>Charge Cycle:</strong> The transition of a battery’s SoC from a low to a high value.</li>
<li><strong>Discharge Cycle:</strong> The reverse process of depleting the battery from a high SoC to a lower SoC.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example">Example<a href="#example" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">​</a></h4>
<p>If a battery is discharged from 100% to 50% and then recharged to 100%, it is considered half a cycle. Two such operations would count as one full cycle.</p>
<table><thead><tr><th>Cycle Phase</th><th>Start SoC (%)</th><th>End SoC (%)</th><th>Description</th></tr></thead><tbody><tr><td>Charging</td><td>20</td><td>100</td><td>Full charge from 20% to 100%.</td></tr><tr><td>Discharging</td><td>100</td><td>20</td><td>Full discharge from 100% to 20%.</td></tr></tbody></table>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-challenges-in-cycle-counting">3. Challenges in Cycle Counting<a href="#3-challenges-in-cycle-counting" class="hash-link" aria-label="Direct link to 3. Challenges in Cycle Counting" title="Direct link to 3. Challenges in Cycle Counting">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="31-no-direct-measurement">3.1 No Direct Measurement<a href="#31-no-direct-measurement" class="hash-link" aria-label="Direct link to 3.1 No Direct Measurement" title="Direct link to 3.1 No Direct Measurement">​</a></h4>
<p>Cycles cannot be directly measured by sensors; they must be inferred using algorithms based on current, voltage, and SoC.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="32-nonlinear-battery-behavior">3.2 Nonlinear Battery Behavior<a href="#32-nonlinear-battery-behavior" class="hash-link" aria-label="Direct link to 3.2 Nonlinear Battery Behavior" title="Direct link to 3.2 Nonlinear Battery Behavior">​</a></h4>
<p>Factors like varying charge/discharge rates, temperature, and battery chemistry introduce complexity in defining and counting cycles.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="33-duty-profiles">3.3 Duty Profiles<a href="#33-duty-profiles" class="hash-link" aria-label="Direct link to 3.3 Duty Profiles" title="Direct link to 3.3 Duty Profiles">​</a></h4>
<ul>
<li><strong>Charge Duty:</strong> The total energy added to the battery during a charge event.</li>
<li><strong>Discharge Duty:</strong> The total energy removed from the battery during a discharge event.</li>
</ul>
<p>These profiles help in accurately estimating partial and full cycles.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-cycle-counting-algorithm">4. Cycle Counting Algorithm<a href="#4-cycle-counting-algorithm" class="hash-link" aria-label="Direct link to 4. Cycle Counting Algorithm" title="Direct link to 4. Cycle Counting Algorithm">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-monitoring-soc">Step 1: Monitoring SoC<a href="#step-1-monitoring-soc" class="hash-link" aria-label="Direct link to Step 1: Monitoring SoC" title="Direct link to Step 1: Monitoring SoC">​</a></h4>
<p>Continuously monitor SoC using battery voltage and current sensors.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-identifying-cycles">Step 2: Identifying Cycles<a href="#step-2-identifying-cycles" class="hash-link" aria-label="Direct link to Step 2: Identifying Cycles" title="Direct link to Step 2: Identifying Cycles">​</a></h4>
<p>Define a full cycle as the SoC changing from a low value to a high value and back to the starting point:</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>Cycle Count</mtext><mo>=</mo><mo>∑</mo><mfrac><mrow><mi mathvariant="normal">Δ</mi><mtext>SoC</mtext></mrow><mn>100</mn></mfrac></mrow><annotation encoding="application/x-tex">\text{Cycle Count} = \sum \frac{\Delta \text{SoC}}{100}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord text"><span class="mord">Cycle Count</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.0463em;vertical-align:-0.686em"></span><span class="mop op-symbol large-op" style="position:relative;top:0em">∑</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">100</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">Δ</span><span class="mord text"><span class="mord">SoC</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-3-accumulating-partial-cycles">Step 3: Accumulating Partial Cycles<a href="#step-3-accumulating-partial-cycles" class="hash-link" aria-label="Direct link to Step 3: Accumulating Partial Cycles" title="Direct link to Step 3: Accumulating Partial Cycles">​</a></h4>
<p>Track incomplete cycles by summing fractional changes in SoC. For example:</p>
<ul>
<li>Discharge from 100% to 50% → 0.5 cycles.</li>
<li>Charge from 50% to 100% → 0.5 cycles.</li>
<li><strong>Total</strong> = 1 full cycle.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-4-logging-and-updating">Step 4: Logging and Updating<a href="#step-4-logging-and-updating" class="hash-link" aria-label="Direct link to Step 4: Logging and Updating" title="Direct link to Step 4: Logging and Updating">​</a></h4>
<p>Maintain a counter to record accumulated cycles.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-duty-calculation-for-enhanced-accuracy">5. Duty Calculation for Enhanced Accuracy<a href="#5-duty-calculation-for-enhanced-accuracy" class="hash-link" aria-label="Direct link to 5. Duty Calculation for Enhanced Accuracy" title="Direct link to 5. Duty Calculation for Enhanced Accuracy"> ​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="charging-duty">Charging Duty<a href="#charging-duty" class="hash-link" aria-label="Direct link to Charging Duty" title="Direct link to Charging Duty">​</a></h4>
<p>The charge duty reflects the energy added to the battery during a charging event:</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mtext>Duty</mtext><mtext>charge</mtext></msub><mo>=</mo><msub><mtext>End SoC</mtext><mtext>charge</mtext></msub><mo>−</mo><msub><mtext>Start SoC</mtext><mtext>charge</mtext></msub></mrow><annotation encoding="application/x-tex">\text{Duty}_{\text{charge}} = \text{End SoC}_{\text{charge}} - \text{Start SoC}_{\text{charge}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0636em;vertical-align:-0.3802em"></span><span class="mord"><span class="mord text"><span class="mord">Duty</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.242em"><span style="top:-2.4559em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">charge</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3802em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em"></span><span class="mord"><span class="mord text"><span class="mord">End SoC</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">charge</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em"></span><span class="mord"><span class="mord text"><span class="mord">Start SoC</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">charge</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span></span></span></span></span>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="discharging-duty">Discharging Duty<a href="#discharging-duty" class="hash-link" aria-label="Direct link to Discharging Duty" title="Direct link to Discharging Duty">​</a></h4>
<p>The discharge duty reflects the energy drawn during discharging:</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mtext>Duty</mtext><mtext>discharge</mtext></msub><mo>=</mo><msub><mtext>Start SoC</mtext><mtext>discharge</mtext></msub><mo>−</mo><msub><mtext>End SoC</mtext><mtext>discharge</mtext></msub></mrow><annotation encoding="application/x-tex">\text{Duty}_{\text{discharge}} = \text{Start SoC}_{\text{discharge}} - \text{End SoC}_{\text{discharge}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0636em;vertical-align:-0.3802em"></span><span class="mord"><span class="mord text"><span class="mord">Duty</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.242em"><span style="top:-2.4559em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">discharge</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3802em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em"></span><span class="mord"><span class="mord text"><span class="mord">Start SoC</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">discharge</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em"></span><span class="mord"><span class="mord text"><span class="mord">End SoC</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">discharge</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span></span></span></span></span>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="total-duty">Total Duty<a href="#total-duty" class="hash-link" aria-label="Direct link to Total Duty" title="Direct link to Total Duty">​</a></h4>
<p>The sum of charging and discharging duties helps refine cycle calculations:</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>Total Duty</mtext><mo>=</mo><msub><mtext>Duty</mtext><mtext>charge</mtext></msub><mo>+</mo><msub><mtext>Duty</mtext><mtext>discharge</mtext></msub></mrow><annotation encoding="application/x-tex">\text{Total Duty} = \text{Duty}_{\text{charge}} + \text{Duty}_{\text{discharge}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord text"><span class="mord">Total Duty</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.0636em;vertical-align:-0.3802em"></span><span class="mord"><span class="mord text"><span class="mord">Duty</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.242em"><span style="top:-2.4559em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">charge</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3802em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1.0636em;vertical-align:-0.3802em"></span><span class="mord"><span class="mord text"><span class="mord">Duty</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.242em"><span style="top:-2.4559em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">discharge</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3802em"><span></span></span></span></span></span></span></span></span></span></span>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="state-of-health-soh">State of Health (SoH)<a href="#state-of-health-soh" class="hash-link" aria-label="Direct link to State of Health (SoH)" title="Direct link to State of Health (SoH)">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-overview-1">1. Overview<a href="#1-overview-1" class="hash-link" aria-label="Direct link to 1. Overview" title="Direct link to 1. Overview">​</a></h3>
<p>State of Health (SoH) quantifies the current capacity of a battery compared to its original capacity when new. It serves as a measure of battery aging and remaining usability.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="formula">Formula<a href="#formula" class="hash-link" aria-label="Direct link to Formula" title="Direct link to Formula">​</a></h4>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>SoH</mtext><mo>=</mo><mfrac><mtext>Remaining Capacity</mtext><mtext>Rated Capacity</mtext></mfrac><mo>×</mo><mn>100</mn></mrow><annotation encoding="application/x-tex">\text{SoH} = \frac{\text{Remaining Capacity}}{\text{Rated Capacity}} \times 100</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord text"><span class="mord">SoH</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.2408em;vertical-align:-0.8804em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord">Rated Capacity</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord">Remaining Capacity</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">100</span></span></span></span></span>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-capacity-degradation">2. Capacity Degradation<a href="#2-capacity-degradation" class="hash-link" aria-label="Direct link to 2. Capacity Degradation" title="Direct link to 2. Capacity Degradation">​</a></h3>
<p>Battery capacity diminishes with usage due to cycle aging, temperature extremes, and internal resistance growth. The relationship between cycle count and capacity loss is often modeled using a Cycle vs. Capacity Loss Chart.</p>
<table><thead><tr><th>Cycle Count</th><th>Remaining Capacity (% of Rated)</th></tr></thead><tbody><tr><td>0</td><td>100%</td></tr><tr><td>500</td><td>90%</td></tr><tr><td>1000</td><td>80%</td></tr><tr><td>1500</td><td>70%</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="lookup-table-implementation">Lookup Table Implementation<a href="#lookup-table-implementation" class="hash-link" aria-label="Direct link to Lookup Table Implementation" title="Direct link to Lookup Table Implementation">​</a></h4>
<p>The Cycle vs. Capacity Loss Chart is converted into a lookup table for algorithmic use:</p>
<ol>
<li>Use the current cycle count as input.</li>
<li>Interpolate to find the remaining capacity.</li>
</ol>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-soh-estimation-algorithm">3. SoH Estimation Algorithm<a href="#3-soh-estimation-algorithm" class="hash-link" aria-label="Direct link to 3. SoH Estimation Algorithm" title="Direct link to 3. SoH Estimation Algorithm">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-retrieve-cycle-count">Step 1: Retrieve Cycle Count<a href="#step-1-retrieve-cycle-count" class="hash-link" aria-label="Direct link to Step 1: Retrieve Cycle Count" title="Direct link to Step 1: Retrieve Cycle Count">​</a></h4>
<p>Calculate or retrieve the total cycles completed using the cycle counting algorithm.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-estimate-remaining-capacity">Step 2: Estimate Remaining Capacity<a href="#step-2-estimate-remaining-capacity" class="hash-link" aria-label="Direct link to Step 2: Estimate Remaining Capacity" title="Direct link to Step 2: Estimate Remaining Capacity">​</a></h4>
<p>Map the cycle count to remaining capacity using the lookup table:</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>Remaining Capacity</mtext><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><mtext>Cycle Count</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\text{Remaining Capacity} = f(\text{Cycle Count})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em"></span><span class="mord text"><span class="mord">Remaining Capacity</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mopen">(</span><span class="mord text"><span class="mord">Cycle Count</span></span><span class="mclose">)</span></span></span></span></span>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-3-calculate-soh">Step 3: Calculate SoH<a href="#step-3-calculate-soh" class="hash-link" aria-label="Direct link to Step 3: Calculate SoH" title="Direct link to Step 3: Calculate SoH">​</a></h4>
<p>Calculate SoH as the ratio of remaining capacity to rated capacity:</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>SoH</mtext><mo>=</mo><mfrac><mtext>Remaining Capacity</mtext><mtext>Rated Capacity</mtext></mfrac><mo>×</mo><mn>100</mn></mrow><annotation encoding="application/x-tex">\text{SoH} = \frac{\text{Remaining Capacity}}{\text{Rated Capacity}} \times 100</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord text"><span class="mord">SoH</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.2408em;vertical-align:-0.8804em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord">Rated Capacity</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord">Remaining Capacity</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">100</span></span></span></span></span>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-duty-corrected-soh">4. Duty-Corrected SoH<a href="#4-duty-corrected-soh" class="hash-link" aria-label="Direct link to 4. Duty-Corrected SoH" title="Direct link to 4. Duty-Corrected SoH">​</a></h3>
<p>Integrating duty calculations enhances the accuracy of SoH estimation:</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mtext>SoH</mtext><mtext>corrected</mtext></msub><mo>=</mo><mfrac><msub><mtext>Remaining Capacity</mtext><mtext>duty</mtext></msub><mtext>Rated Capacity</mtext></mfrac><mo>×</mo><mn>100</mn></mrow><annotation encoding="application/x-tex">\text{SoH}_{\text{corrected}} = \frac{\text{Remaining Capacity}_{\text{duty}}}{\text{Rated Capacity}} \times 100</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em"></span><span class="mord"><span class="mord text"><span class="mord">SoH</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">corrected</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.334em;vertical-align:-0.8804em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4536em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord">Rated Capacity</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.7702em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord text"><span class="mord">Remaining Capacity</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.242em"><span style="top:-2.4559em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">duty</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3802em"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">100</span></span></span></span></span>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-matlab-implementation-of-soh">5. MATLAB Implementation of SoH<a href="#5-matlab-implementation-of-soh" class="hash-link" aria-label="Direct link to 5. MATLAB Implementation of SoH" title="Direct link to 5. MATLAB Implementation of SoH">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="algorithm-design">Algorithm Design<a href="#algorithm-design" class="hash-link" aria-label="Direct link to Algorithm Design" title="Direct link to Algorithm Design">​</a></h4>
<ol>
<li>Create a Cycle vs. Capacity Loss Lookup Table.</li>
<li>Implement the SoH estimation algorithm using cycle count and duty data.</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="pseudo-code">Pseudo-Code<a href="#pseudo-code" class="hash-link" aria-label="Direct link to Pseudo-Code" title="Direct link to Pseudo-Code">​</a></h4>
<div class="language-matlab codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-matlab codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">% Define battery parameters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rated_capacity = 100; % in Ah</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cycle_count = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">% Define Lookup Table (Cycle vs Capacity Loss)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lookup_table = [0, 100; 500, 90; 1000, 80; 1500, 70];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">% Cycle Counting Algorithm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if start_soc &lt; end_soc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cycle_increment = (end_soc - start_soc) / 100;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cycle_count = cycle_count + cycle_increment;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">% SoH Estimation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">remaining_capacity = interp1(lookup_table(:,1), lookup_table(:,2), cycle_count, &#x27;linear&#x27;, &#x27;extrap&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SoH = (remaining_capacity / rated_capacity) * 100;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">% Output Results</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">disp([&#x27;Current SoH: &#x27;, num2str(SoH), &#x27;%&#x27;]);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/CagriCatik/BMS/edit/main/docs/04_System_and_Algorithms/05_cycle_counting_soh.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/BMS/docs/System_and_Algorithms/soh_estimation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">State of Health Estimation</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/BMS/docs/soh-algorithm-implementation"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">SoH Algorithm &amp; Implementation</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#cycle-counting" class="table-of-contents__link toc-highlight">Cycle Counting</a><ul><li><a href="#1-overview" class="table-of-contents__link toc-highlight">1. Overview</a></li><li><a href="#2-defining-a-battery-cycle" class="table-of-contents__link toc-highlight">2. Defining a Battery Cycle</a></li><li><a href="#3-challenges-in-cycle-counting" class="table-of-contents__link toc-highlight">3. Challenges in Cycle Counting</a></li><li><a href="#4-cycle-counting-algorithm" class="table-of-contents__link toc-highlight">4. Cycle Counting Algorithm</a></li><li><a href="#5-duty-calculation-for-enhanced-accuracy" class="table-of-contents__link toc-highlight">5. Duty Calculation for Enhanced Accuracy</a></li></ul></li><li><a href="#state-of-health-soh" class="table-of-contents__link toc-highlight">State of Health (SoH)</a><ul><li><a href="#1-overview-1" class="table-of-contents__link toc-highlight">1. Overview</a></li><li><a href="#2-capacity-degradation" class="table-of-contents__link toc-highlight">2. Capacity Degradation</a></li><li><a href="#3-soh-estimation-algorithm" class="table-of-contents__link toc-highlight">3. SoH Estimation Algorithm</a></li><li><a href="#4-duty-corrected-soh" class="table-of-contents__link toc-highlight">4. Duty-Corrected SoH</a></li><li><a href="#5-matlab-implementation-of-soh" class="table-of-contents__link toc-highlight">5. MATLAB Implementation of SoH</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 BMS, Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>