"use strict";(self.webpackChunkBMS=self.webpackChunkBMS||[]).push([[4840],{9196:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>a,toc:()=>o});const a=JSON.parse('{"id":"theory/bms_architecture/initial_soc","title":"Initial SoC & SoH Estimation","description":"The State of Charge (SoC) and State of Health (SoH) are fundamental parameters in Battery Management Systems (BMS). Accurate estimation of these metrics is crucial for ensuring the optimal performance, safety, and longevity of battery systems used in applications such as electric vehicles (EVs), renewable energy storage, and portable electronics. This chapter provides a comprehensive exploration of the methods and algorithms employed for initial SoC and SoH estimation, detailing the mathematical and logical processes involved.","source":"@site/docs/theory/09_bms_architecture/04_initial_soc.md","sourceDirName":"theory/09_bms_architecture","slug":"/theory/bms_architecture/initial_soc","permalink":"/Battery-Systems-Technology/docs/theory/bms_architecture/initial_soc","draft":false,"unlisted":false,"editUrl":"https://github.com/CagriCatik/Battery-Systems-Technology/edit/main/docs/theory/09_bms_architecture/04_initial_soc.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{},"sidebar":"bmsDesignArchitectureSidebar","previous":{"title":"Development Trends","permalink":"/Battery-Systems-Technology/docs/theory/bms_architecture/development_trends"},"next":{"title":"BMS Design","permalink":"/Battery-Systems-Technology/docs/theory/bms_architecture/bms_design"}}');var n=s(4848),i=s(8453);const l={},r="Initial SoC & SoH Estimation",c={},o=[{value:"Overview of SoC and SoH Estimation",id:"overview-of-soc-and-soh-estimation",level:2},{value:"State of Charge",id:"state-of-charge",level:3},{value:"State of Health",id:"state-of-health",level:3},{value:"Initial SoC Estimation",id:"initial-soc-estimation",level:2},{value:"Open-Circuit Voltage Method",id:"open-circuit-voltage-method",level:3},{value:"Steps:",id:"steps",level:4},{value:"Example:",id:"example",level:4},{value:"Coulomb Counting Method",id:"coulomb-counting-method",level:3},{value:"Steps:",id:"steps-1",level:4},{value:"Example:",id:"example-1",level:4},{value:"Initial SoH Estimation",id:"initial-soh-estimation",level:2},{value:"Capacity Loss Calculation",id:"capacity-loss-calculation",level:3},{value:"Steps:",id:"steps-2",level:4},{value:"Formula:",id:"formula",level:4},{value:"Example:",id:"example-2",level:4},{value:"Cycle Counting",id:"cycle-counting",level:3},{value:"Steps:",id:"steps-3",level:4},{value:"Example:",id:"example-3",level:4},{value:"Mathematical and Logical Steps for SoC and SoH Estimation",id:"mathematical-and-logical-steps-for-soc-and-soh-estimation",level:2},{value:"Data Collection",id:"data-collection",level:3},{value:"Cycle Counting and Capacity Loss Estimation",id:"cycle-counting-and-capacity-loss-estimation",level:3},{value:"SoC Estimation",id:"soc-estimation",level:3},{value:"SoH Estimation",id:"soh-estimation",level:3},{value:"Practical Implementation in BMS",id:"practical-implementation-in-bms",level:2},{value:"Example Workflow:",id:"example-workflow",level:4},{value:"Challenges and Future Directions",id:"challenges-and-future-directions",level:2},{value:"Accuracy",id:"accuracy",level:3},{value:"Aging Effects",id:"aging-effects",level:3},{value:"Real-Time Implementation",id:"real-time-implementation",level:3},{value:"Environmental Factors",id:"environmental-factors",level:3},{value:"Integration with Advanced Technologies",id:"integration-with-advanced-technologies",level:3},{value:"Summary of SoC and SoH Estimation",id:"summary-of-soc-and-soh-estimation",level:2}];function d(e){const t={annotation:"annotation",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",math:"math",mfrac:"mfrac",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",mtext:"mtext",ol:"ol",p:"p",pre:"pre",semantics:"semantics",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"initial-soc--soh-estimation",children:"Initial SoC & SoH Estimation"})}),"\n",(0,n.jsx)(t.p,{children:"The State of Charge (SoC) and State of Health (SoH) are fundamental parameters in Battery Management Systems (BMS). Accurate estimation of these metrics is crucial for ensuring the optimal performance, safety, and longevity of battery systems used in applications such as electric vehicles (EVs), renewable energy storage, and portable electronics. This chapter provides a comprehensive exploration of the methods and algorithms employed for initial SoC and SoH estimation, detailing the mathematical and logical processes involved."}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.h2,{id:"overview-of-soc-and-soh-estimation",children:"Overview of SoC and SoH Estimation"}),"\n",(0,n.jsx)(t.p,{children:"Understanding the State of Charge (SoC) and State of Health (SoH) is essential for effective battery management. These parameters provide insights into the battery's current capacity and its ability to perform over time."}),"\n",(0,n.jsx)(t.h3,{id:"state-of-charge",children:"State of Charge"}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"State of Charge (SoC)"})," represents the remaining capacity of the battery as a percentage of its maximum capacity. It indicates how much energy is left in the battery at any given time and is crucial for applications like EVs to predict driving range and manage charging cycles effectively."]}),"\n",(0,n.jsx)(t.h3,{id:"state-of-health",children:"State of Health"}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"State of Health (SoH)"})," reflects the overall condition of the battery, indicating its ability to store and deliver energy compared to its original capacity. SoH accounts for factors such as capacity loss, internal resistance increase, and overall degradation due to aging and usage patterns."]}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.h2,{id:"initial-soc-estimation",children:"Initial SoC Estimation"}),"\n",(0,n.jsx)(t.p,{children:"Accurate initial SoC estimation is vital for the BMS to provide reliable battery status from the outset. Various methods are employed to determine the initial SoC, each with its advantages and limitations."}),"\n",(0,n.jsx)(t.h3,{id:"open-circuit-voltage-method",children:"Open-Circuit Voltage Method"}),"\n",(0,n.jsx)(t.p,{children:"The Open-Circuit Voltage (OCV) method estimates SoC based on the relationship between the battery's voltage and its SoC when the battery is at rest (i.e., no load or charge is applied). This method is straightforward but requires the battery to be in a rested state to obtain accurate readings."}),"\n",(0,n.jsx)(t.h4,{id:"steps",children:"Steps:"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Measure Open-Circuit Voltage"}),": Ensure the battery is at rest, then measure its voltage."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Map OCV to SoC"}),": Use a pre-defined OCV-SoC curve or lookup table to estimate the SoC based on the measured OCV."]}),"\n"]}),"\n",(0,n.jsx)(t.h4,{id:"example",children:"Example:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-c",children:"// Function to estimate SoC using OCV Method\nfloat estimate_SOC_OCV(float ocv) {\n    // Example OCV-SoC lookup table\n    float ocv_table[] = {3.0, 3.2, 3.4, 3.6, 3.8, 4.0, 4.2}; // Voltage in volts\n    float soc_table[] = {0, 20, 40, 60, 80, 90, 100}; // SoC in percentage\n    int table_size = sizeof(ocv_table) / sizeof(ocv_table[0]);\n\n    // Find the closest OCV value in the table\n    for(int i = 0; i < table_size - 1; i++) {\n        if(ocv >= ocv_table[i] && ocv < ocv_table[i+1]) {\n            // Linear interpolation\n            float slope = (soc_table[i+1] - soc_table[i]) / (ocv_table[i+1] - ocv_table[i]);\n            return soc_table[i] + slope * (ocv - ocv_table[i]);\n        }\n    }\n    return soc_table[table_size - 1]; // Return 100% if OCV exceeds table\n}\n"})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.em,{children:"Note: The OCV-SoC relationship varies with battery chemistry and temperature. Calibration is essential for accurate estimation."})}),"\n",(0,n.jsx)(t.h3,{id:"coulomb-counting-method",children:"Coulomb Counting Method"}),"\n",(0,n.jsx)(t.p,{children:"Coulomb counting estimates SoC by integrating the current flowing into or out of the battery over time. This method provides dynamic SoC estimation but requires an accurate initial SoC value and precise current measurements to minimize cumulative errors."}),"\n",(0,n.jsx)(t.h4,{id:"steps-1",children:"Steps:"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Measure Current Flow"}),": Continuously measure the current entering (charging) or leaving (discharging) the battery."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Integrate Current Over Time"}),": Calculate the total charge added or removed by integrating the current over the elapsed time."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Update SoC"}),": Adjust the initial SoC based on the integrated charge."]}),"\n"]}),"\n",(0,n.jsx)(t.h4,{id:"example-1",children:"Example:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-c",children:"// Function to estimate SoC using Coulomb Counting\nfloat estimate_SOC(float current, float delta_time, float initial_SOC, float battery_capacity) {\n    // current: Current in amperes (A)\n    // delta_time: Time interval in seconds (s)\n    // initial_SOC: SoC at the beginning of the interval (%)\n    // battery_capacity: Total battery capacity in ampere-hours (Ah)\n\n    // Convert battery capacity to coulombs (1 Ah = 3600 C)\n    float battery_capacity_coulombs = battery_capacity * 3600.0;\n\n    // Calculate charge change (Coulombs)\n    float delta_charge = current * delta_time;\n\n    // Update SoC\n    float new_SOC = initial_SOC - (delta_charge / battery_capacity_coulombs) * 100.0;\n\n    // Clamp SoC between 0% and 100%\n    if (new_SOC > 100.0) new_SOC = 100.0;\n    if (new_SOC < 0.0) new_SOC = 0.0;\n\n    return new_SOC;\n}\n"})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.em,{children:"Note: Accurate current measurement and minimal sensor drift are critical for reducing errors in Coulomb counting."})}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.h2,{id:"initial-soh-estimation",children:"Initial SoH Estimation"}),"\n",(0,n.jsx)(t.p,{children:"State of Health (SoH) estimation evaluates the battery's condition and predicts its remaining useful life. Accurate SoH assessment helps in proactive maintenance and ensures reliability in applications."}),"\n",(0,n.jsx)(t.h3,{id:"capacity-loss-calculation",children:"Capacity Loss Calculation"}),"\n",(0,n.jsx)(t.p,{children:"Capacity loss quantifies the reduction in the battery's ability to store energy compared to its original capacity. It is influenced by factors like the number of charge-discharge cycles, depth of discharge, and operating temperatures."}),"\n",(0,n.jsx)(t.h4,{id:"steps-2",children:"Steps:"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Determine Charge-Discharge Cycles"}),": Track the number of complete and partial charge-discharge cycles the battery has undergone."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Estimate Capacity Loss"}),": Use empirical models or lookup tables to estimate capacity loss based on the cycle count."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Calculate Current Capacity"}),": Subtract the estimated capacity loss from the original capacity."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Compute SoH"}),": Express SoH as the ratio of current capacity to original capacity."]}),"\n"]}),"\n",(0,n.jsx)(t.h4,{id:"formula",children:"Formula:"}),"\n",(0,n.jsx)(t.span,{className:"katex-display",children:(0,n.jsxs)(t.span,{className:"katex",children:[(0,n.jsx)(t.span,{className:"katex-mathml",children:(0,n.jsx)(t.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,n.jsxs)(t.semantics,{children:[(0,n.jsxs)(t.mrow,{children:[(0,n.jsx)(t.mtext,{children:"SoH"}),(0,n.jsx)(t.mo,{children:"="}),(0,n.jsxs)(t.mrow,{children:[(0,n.jsx)(t.mo,{fence:"true",children:"("}),(0,n.jsxs)(t.mfrac,{children:[(0,n.jsx)(t.mtext,{children:"Current\xa0Capacity"}),(0,n.jsx)(t.mtext,{children:"Original\xa0Capacity"})]}),(0,n.jsx)(t.mo,{fence:"true",children:")"})]}),(0,n.jsx)(t.mo,{children:"\xd7"}),(0,n.jsx)(t.mn,{children:"100"}),(0,n.jsx)(t.mi,{mathvariant:"normal",children:"%"})]}),(0,n.jsx)(t.annotation,{encoding:"application/x-tex",children:"\\text{SoH} = \\left( \\frac{\\text{Current Capacity}}{\\text{Original Capacity}} \\right) \\times 100\\%"})]})})}),(0,n.jsxs)(t.span,{className:"katex-html","aria-hidden":"true",children:[(0,n.jsxs)(t.span,{className:"base",children:[(0,n.jsx)(t.span,{className:"strut",style:{height:"0.6833em"}}),(0,n.jsx)(t.span,{className:"mord text",children:(0,n.jsx)(t.span,{className:"mord",children:"SoH"})}),(0,n.jsx)(t.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,n.jsx)(t.span,{className:"mrel",children:"="}),(0,n.jsx)(t.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,n.jsxs)(t.span,{className:"base",children:[(0,n.jsx)(t.span,{className:"strut",style:{height:"2.4em",verticalAlign:"-0.95em"}}),(0,n.jsxs)(t.span,{className:"minner",children:[(0,n.jsx)(t.span,{className:"mopen delimcenter",style:{top:"0em"},children:(0,n.jsx)(t.span,{className:"delimsizing size3",children:"("})}),(0,n.jsxs)(t.span,{className:"mord",children:[(0,n.jsx)(t.span,{className:"mopen nulldelimiter"}),(0,n.jsx)(t.span,{className:"mfrac",children:(0,n.jsxs)(t.span,{className:"vlist-t vlist-t2",children:[(0,n.jsxs)(t.span,{className:"vlist-r",children:[(0,n.jsxs)(t.span,{className:"vlist",style:{height:"1.3603em"},children:[(0,n.jsxs)(t.span,{style:{top:"-2.314em"},children:[(0,n.jsx)(t.span,{className:"pstrut",style:{height:"3em"}}),(0,n.jsx)(t.span,{className:"mord",children:(0,n.jsx)(t.span,{className:"mord text",children:(0,n.jsx)(t.span,{className:"mord",children:"Original\xa0Capacity"})})})]}),(0,n.jsxs)(t.span,{style:{top:"-3.23em"},children:[(0,n.jsx)(t.span,{className:"pstrut",style:{height:"3em"}}),(0,n.jsx)(t.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,n.jsxs)(t.span,{style:{top:"-3.677em"},children:[(0,n.jsx)(t.span,{className:"pstrut",style:{height:"3em"}}),(0,n.jsx)(t.span,{className:"mord",children:(0,n.jsx)(t.span,{className:"mord text",children:(0,n.jsx)(t.span,{className:"mord",children:"Current\xa0Capacity"})})})]})]}),(0,n.jsx)(t.span,{className:"vlist-s",children:"\u200b"})]}),(0,n.jsx)(t.span,{className:"vlist-r",children:(0,n.jsx)(t.span,{className:"vlist",style:{height:"0.8804em"},children:(0,n.jsx)(t.span,{})})})]})}),(0,n.jsx)(t.span,{className:"mclose nulldelimiter"})]}),(0,n.jsx)(t.span,{className:"mclose delimcenter",style:{top:"0em"},children:(0,n.jsx)(t.span,{className:"delimsizing size3",children:")"})})]}),(0,n.jsx)(t.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.jsx)(t.span,{className:"mbin",children:"\xd7"}),(0,n.jsx)(t.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,n.jsxs)(t.span,{className:"base",children:[(0,n.jsx)(t.span,{className:"strut",style:{height:"0.8056em",verticalAlign:"-0.0556em"}}),(0,n.jsx)(t.span,{className:"mord",children:"100%"})]})]})]})}),"\n",(0,n.jsx)(t.h4,{id:"example-2",children:"Example:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-c",children:"// Function to estimate SoH based on capacity loss\nfloat estimate_SOH(float current_capacity, float original_capacity) {\n    return (current_capacity / original_capacity) * 100.0;\n}\n"})}),"\n",(0,n.jsx)(t.h3,{id:"cycle-counting",children:"Cycle Counting"}),"\n",(0,n.jsx)(t.p,{children:"Cycle counting involves tracking the number of charge-discharge cycles a battery has experienced. Each cycle contributes to the gradual degradation of the battery's capacity and overall health."}),"\n",(0,n.jsx)(t.h4,{id:"steps-3",children:"Steps:"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Measure Depth of Discharge (DoD)"}),": For each cycle, determine how deeply the battery was discharged."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Accumulate Partial Cycles"}),": Account for partial cycles by normalizing DoD to equivalent full cycles."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Estimate Total Cycles"}),": Sum the equivalent full cycles to determine the total cycle count."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Map Cycles to Capacity Loss"}),": Use a predefined model or lookup table to estimate capacity loss based on total cycles."]}),"\n"]}),"\n",(0,n.jsx)(t.h4,{id:"example-3",children:"Example:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-c",children:"// Function to estimate SoH based on cycle counting\nfloat estimate_SOH_cycles(int total_cycles, float capacity_loss_per_cycle) {\n    float total_capacity_loss = total_cycles * capacity_loss_per_cycle;\n    float soh = 100.0 - total_capacity_loss;\n    if (soh < 0.0) soh = 0.0;\n    return soh;\n}\n"})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.em,{children:"Note: The capacity loss per cycle varies with battery chemistry and operating conditions."})}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.h2,{id:"mathematical-and-logical-steps-for-soc-and-soh-estimation",children:"Mathematical and Logical Steps for SoC and SoH Estimation"}),"\n",(0,n.jsx)(t.p,{children:"Accurate SoC and SoH estimation involves a systematic approach that integrates data collection, processing, and algorithmic analysis."}),"\n",(0,n.jsx)(t.h3,{id:"data-collection",children:"Data Collection"}),"\n",(0,n.jsx)(t.p,{children:"Effective estimation begins with the acquisition of accurate and reliable data from the battery system."}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Terminal Voltage"}),": Measure the voltage across the battery terminals using voltage sensors."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Current"}),": Monitor the current flowing into or out of the battery using current sensors."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Temperature"}),": Track the battery temperature using temperature sensors."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Open-Circuit Voltage (OCV)"}),": Measure OCV when the battery is at rest for the OCV-based SoC estimation."]}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"cycle-counting-and-capacity-loss-estimation",children:"Cycle Counting and Capacity Loss Estimation"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Calculate Depth of Discharge (DoD)"}),":"]}),"\n",(0,n.jsx)(t.span,{className:"katex-display",children:(0,n.jsxs)(t.span,{className:"katex",children:[(0,n.jsx)(t.span,{className:"katex-mathml",children:(0,n.jsx)(t.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,n.jsxs)(t.semantics,{children:[(0,n.jsxs)(t.mrow,{children:[(0,n.jsx)(t.mtext,{children:"DoD"}),(0,n.jsx)(t.mo,{children:"="}),(0,n.jsxs)(t.mfrac,{children:[(0,n.jsx)(t.mtext,{children:"Energy\xa0Discharged"}),(0,n.jsx)(t.mtext,{children:"Battery\xa0Capacity"})]}),(0,n.jsx)(t.mo,{children:"\xd7"}),(0,n.jsx)(t.mn,{children:"100"}),(0,n.jsx)(t.mi,{mathvariant:"normal",children:"%"})]}),(0,n.jsx)(t.annotation,{encoding:"application/x-tex",children:"\\text{DoD} = \\frac{\\text{Energy Discharged}}{\\text{Battery Capacity}} \\times 100\\%"})]})})}),(0,n.jsxs)(t.span,{className:"katex-html","aria-hidden":"true",children:[(0,n.jsxs)(t.span,{className:"base",children:[(0,n.jsx)(t.span,{className:"strut",style:{height:"0.6833em"}}),(0,n.jsx)(t.span,{className:"mord text",children:(0,n.jsx)(t.span,{className:"mord",children:"DoD"})}),(0,n.jsx)(t.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,n.jsx)(t.span,{className:"mrel",children:"="}),(0,n.jsx)(t.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,n.jsxs)(t.span,{className:"base",children:[(0,n.jsx)(t.span,{className:"strut",style:{height:"2.2519em",verticalAlign:"-0.8804em"}}),(0,n.jsxs)(t.span,{className:"mord",children:[(0,n.jsx)(t.span,{className:"mopen nulldelimiter"}),(0,n.jsx)(t.span,{className:"mfrac",children:(0,n.jsxs)(t.span,{className:"vlist-t vlist-t2",children:[(0,n.jsxs)(t.span,{className:"vlist-r",children:[(0,n.jsxs)(t.span,{className:"vlist",style:{height:"1.3714em"},children:[(0,n.jsxs)(t.span,{style:{top:"-2.314em"},children:[(0,n.jsx)(t.span,{className:"pstrut",style:{height:"3em"}}),(0,n.jsx)(t.span,{className:"mord",children:(0,n.jsx)(t.span,{className:"mord text",children:(0,n.jsx)(t.span,{className:"mord",children:"Battery\xa0Capacity"})})})]}),(0,n.jsxs)(t.span,{style:{top:"-3.23em"},children:[(0,n.jsx)(t.span,{className:"pstrut",style:{height:"3em"}}),(0,n.jsx)(t.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,n.jsxs)(t.span,{style:{top:"-3.677em"},children:[(0,n.jsx)(t.span,{className:"pstrut",style:{height:"3em"}}),(0,n.jsx)(t.span,{className:"mord",children:(0,n.jsx)(t.span,{className:"mord text",children:(0,n.jsx)(t.span,{className:"mord",children:"Energy\xa0Discharged"})})})]})]}),(0,n.jsx)(t.span,{className:"vlist-s",children:"\u200b"})]}),(0,n.jsx)(t.span,{className:"vlist-r",children:(0,n.jsx)(t.span,{className:"vlist",style:{height:"0.8804em"},children:(0,n.jsx)(t.span,{})})})]})}),(0,n.jsx)(t.span,{className:"mclose nulldelimiter"})]}),(0,n.jsx)(t.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.jsx)(t.span,{className:"mbin",children:"\xd7"}),(0,n.jsx)(t.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,n.jsxs)(t.span,{className:"base",children:[(0,n.jsx)(t.span,{className:"strut",style:{height:"0.8056em",verticalAlign:"-0.0556em"}}),(0,n.jsx)(t.span,{className:"mord",children:"100%"})]})]})]})}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Accumulate DoD Values"}),":"]}),"\n",(0,n.jsx)(t.p,{children:"Normalize partial cycles to equivalent full cycles."}),"\n",(0,n.jsx)(t.span,{className:"katex-display",children:(0,n.jsxs)(t.span,{className:"katex",children:[(0,n.jsx)(t.span,{className:"katex-mathml",children:(0,n.jsx)(t.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,n.jsxs)(t.semantics,{children:[(0,n.jsxs)(t.mrow,{children:[(0,n.jsx)(t.mtext,{children:"Equivalent\xa0Full\xa0Cycles"}),(0,n.jsx)(t.mo,{children:"="}),(0,n.jsxs)(t.mfrac,{children:[(0,n.jsx)(t.mtext,{children:"DoD"}),(0,n.jsxs)(t.mrow,{children:[(0,n.jsx)(t.mn,{children:"100"}),(0,n.jsx)(t.mi,{mathvariant:"normal",children:"%"})]})]})]}),(0,n.jsx)(t.annotation,{encoding:"application/x-tex",children:"\\text{Equivalent Full Cycles} = \\frac{\\text{DoD}}{100\\%}"})]})})}),(0,n.jsxs)(t.span,{className:"katex-html","aria-hidden":"true",children:[(0,n.jsxs)(t.span,{className:"base",children:[(0,n.jsx)(t.span,{className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),(0,n.jsx)(t.span,{className:"mord text",children:(0,n.jsx)(t.span,{className:"mord",children:"Equivalent\xa0Full\xa0Cycles"})}),(0,n.jsx)(t.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,n.jsx)(t.span,{className:"mrel",children:"="}),(0,n.jsx)(t.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,n.jsxs)(t.span,{className:"base",children:[(0,n.jsx)(t.span,{className:"strut",style:{height:"2.1019em",verticalAlign:"-0.7416em"}}),(0,n.jsxs)(t.span,{className:"mord",children:[(0,n.jsx)(t.span,{className:"mopen nulldelimiter"}),(0,n.jsx)(t.span,{className:"mfrac",children:(0,n.jsxs)(t.span,{className:"vlist-t vlist-t2",children:[(0,n.jsxs)(t.span,{className:"vlist-r",children:[(0,n.jsxs)(t.span,{className:"vlist",style:{height:"1.3603em"},children:[(0,n.jsxs)(t.span,{style:{top:"-2.314em"},children:[(0,n.jsx)(t.span,{className:"pstrut",style:{height:"3em"}}),(0,n.jsx)(t.span,{className:"mord",children:(0,n.jsx)(t.span,{className:"mord",children:"100%"})})]}),(0,n.jsxs)(t.span,{style:{top:"-3.23em"},children:[(0,n.jsx)(t.span,{className:"pstrut",style:{height:"3em"}}),(0,n.jsx)(t.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,n.jsxs)(t.span,{style:{top:"-3.677em"},children:[(0,n.jsx)(t.span,{className:"pstrut",style:{height:"3em"}}),(0,n.jsx)(t.span,{className:"mord",children:(0,n.jsx)(t.span,{className:"mord text",children:(0,n.jsx)(t.span,{className:"mord",children:"DoD"})})})]})]}),(0,n.jsx)(t.span,{className:"vlist-s",children:"\u200b"})]}),(0,n.jsx)(t.span,{className:"vlist-r",children:(0,n.jsx)(t.span,{className:"vlist",style:{height:"0.7416em"},children:(0,n.jsx)(t.span,{})})})]})}),(0,n.jsx)(t.span,{className:"mclose nulldelimiter"})]})]})]})]})}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Estimate Capacity Loss"}),":"]}),"\n",(0,n.jsx)(t.p,{children:"Use the total number of equivalent full cycles to determine capacity loss."}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Compute SoH"}),":"]}),"\n",(0,n.jsx)(t.p,{children:"Apply the capacity loss to calculate SoH."}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"soc-estimation",children:"SoC Estimation"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Initial SoC Estimation"}),":"]}),"\n",(0,n.jsx)(t.p,{children:"Utilize the OCV method to establish the initial SoC when the battery is at rest."}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Dynamic SoC Update"}),":"]}),"\n",(0,n.jsx)(t.p,{children:"Implement Coulomb counting to update SoC in real-time during battery operation."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-c",children:"// Combined SoC Estimation Process\nfloat initial_SOC = estimate_SOC_OCV(measured_ocv);\nfloat updated_SOC = initial_SOC;\n\nvoid update_SOC(float current, float delta_time, float battery_capacity) {\n    updated_SOC = estimate_SOC(current, delta_time, updated_SOC, battery_capacity);\n}\n"})}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"soh-estimation",children:"SoH Estimation"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Calculate Current Capacity"}),":"]}),"\n",(0,n.jsx)(t.p,{children:"Subtract the estimated capacity loss from the original capacity."}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Compute SoH"}),":"]}),"\n",(0,n.jsx)(t.p,{children:"Use the SoH formula to determine the battery's health status."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-c",children:"// Combined SoH Estimation Process\nfloat current_capacity = original_capacity - (total_cycles * capacity_loss_per_cycle);\nfloat soh = estimate_SOH(current_capacity, original_capacity);\n"})}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.h2,{id:"practical-implementation-in-bms",children:"Practical Implementation in BMS"}),"\n",(0,n.jsx)(t.p,{children:"Implementing SoC and SoH estimation within a BMS involves integrating the aforementioned algorithms into the system's software architecture. The following steps outline the practical workflow:"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Data Acquisition"}),": Continuously collect sensor data (voltage, current, temperature) from the battery modules via slave units."]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Initial SoC Estimation"}),":"]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"When the battery is at rest, measure the OCV."}),"\n",(0,n.jsx)(t.li,{children:"Use the OCV-SoC lookup table or curve to estimate the initial SoC."}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Cycle Counting"}),":"]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Track each charge-discharge cycle and calculate the DoD."}),"\n",(0,n.jsx)(t.li,{children:"Accumulate partial cycles to estimate the total number of equivalent full cycles."}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Capacity Loss Estimation"}),":"]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Utilize a lookup table or empirical model to determine capacity loss based on the total cycle count."}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"SoH Calculation"}),":"]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Calculate the current capacity by subtracting the capacity loss from the original capacity."}),"\n",(0,n.jsx)(t.li,{children:"Compute SoH using the current and original capacity values."}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Dynamic SoC Update"}),":"]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"During operation, employ Coulomb counting to update SoC based on real-time current measurements."}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Integration and Communication"}),":"]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Integrate SoC and SoH estimates into the BMS's overall monitoring and control logic."}),"\n",(0,n.jsx)(t.li,{children:"Communicate the estimated SoC and SoH to the Vehicle Control Unit (VCU) and other relevant systems for informed decision-making."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.h4,{id:"example-workflow",children:"Example Workflow:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-c",children:"// Initialize BMS Parameters\nfloat original_capacity = 100.0; // in Ah\nfloat capacity_loss_per_cycle = 0.05; // in Ah\nint total_cycles = 0;\n\n// Initial SoC Estimation\nfloat measured_ocv = readOCV();\nfloat initial_SOC = estimate_SOC_OCV(measured_ocv);\nfloat current_SOC = initial_SOC;\n\n// Main Control Loop\nvoid loop() {\n    // Data Acquisition\n    float current = readCurrentSensor();\n    float voltage = readVoltageSensor();\n    float temperature = readTemperatureSensor();\n    float delta_time = getDeltaTime(); // Time since last update\n\n    // Update SoC\n    current_SOC = estimate_SOC(current, delta_time, current_SOC, original_capacity);\n\n    // Cycle Counting\n    float dod = calculate_DoD(voltage, original_capacity);\n    total_cycles += calculate_equivalent_cycles(dod);\n\n    // Capacity Loss Estimation\n    float capacity_loss = total_cycles * capacity_loss_per_cycle;\n    float current_capacity = original_capacity - capacity_loss;\n\n    // SoH Calculation\n    float soh = estimate_SOH(current_capacity, original_capacity);\n\n    // Communication with VCU\n    send_SOC_SoH_to_VCU(current_SOC, soh);\n\n    // Safety and Control Actions\n    enforceSafetyLimits(voltage, current, temperature);\n\n    delay(1000); // Update interval (e.g., 1 second)\n}\n"})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.em,{children:"Note: The above example is a simplified representation. Actual implementations may require more sophisticated error handling and calibration mechanisms."})}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.h2,{id:"challenges-and-future-directions",children:"Challenges and Future Directions"}),"\n",(0,n.jsx)(t.p,{children:"While significant advancements have been made in SoC and SoH estimation, several challenges persist that require ongoing research and development."}),"\n",(0,n.jsx)(t.h3,{id:"accuracy",children:"Accuracy"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Sensor Precision"}),": High-precision sensors are essential for minimizing errors in voltage and current measurements."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Algorithm Calibration"}),": Continuous calibration of estimation algorithms is necessary to account for changes in battery behavior over time and under varying conditions."]}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"aging-effects",children:"Aging Effects"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Dynamic Modeling"}),": Developing models that accurately reflect the aging process of batteries to improve SoH estimation."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Adaptive Algorithms"}),": Implementing algorithms that adapt to the changing characteristics of the battery as it ages."]}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"real-time-implementation",children:"Real-Time Implementation"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Computational Efficiency"}),": Designing algorithms that can run efficiently on embedded systems with limited processing power."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Latency Reduction"}),": Ensuring that SoC and SoH estimations are updated promptly to reflect real-time battery states."]}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"environmental-factors",children:"Environmental Factors"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Temperature Variations"}),": Accounting for the impact of temperature on battery performance and measurement accuracy."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Load Fluctuations"}),": Managing rapid changes in load conditions to maintain accurate SoC and SoH estimates."]}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"integration-with-advanced-technologies",children:"Integration with Advanced Technologies"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Machine Learning and AI"}),": Leveraging advanced machine learning techniques to enhance the accuracy and adaptability of SoC and SoH estimation algorithms."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"IoT Integration"}),": Utilizing IoT platforms for remote monitoring and data analysis to improve estimation accuracy and enable predictive maintenance."]}),"\n"]}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.h2,{id:"summary-of-soc-and-soh-estimation",children:"Summary of SoC and SoH Estimation"}),"\n",(0,n.jsx)(t.p,{children:"Understanding and accurately estimating SoC and SoH are pivotal for effective battery management. The methods outlined ensure that the BMS can provide reliable information for optimal battery operation and longevity."}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:(0,n.jsx)(t.strong,{children:"Parameter"})}),(0,n.jsx)(t.th,{children:(0,n.jsx)(t.strong,{children:"Method"})}),(0,n.jsx)(t.th,{children:(0,n.jsx)(t.strong,{children:"Key Steps"})})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.strong,{children:"State of Charge (SoC)"})}),(0,n.jsx)(t.td,{children:"Open-Circuit Voltage (OCV) Method"}),(0,n.jsx)(t.td,{children:"Measure OCV, use lookup table to estimate SoC."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{}),(0,n.jsx)(t.td,{children:"Coulomb Counting Method"}),(0,n.jsx)(t.td,{children:"Integrate current over time, update SoC based on initial value."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.strong,{children:"State of Health (SoH)"})}),(0,n.jsx)(t.td,{children:"Capacity Loss Estimation"}),(0,n.jsx)(t.td,{children:"Track cycles, estimate capacity loss, compute SoH as current/original capacity."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{}),(0,n.jsx)(t.td,{children:"Cycle Counting"}),(0,n.jsx)(t.td,{children:"Measure DoD, accumulate equivalent cycles, map to capacity loss."})]})]})]})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},8453:(e,t,s)=>{s.d(t,{R:()=>l,x:()=>r});var a=s(6540);const n={},i=a.createContext(n);function l(e){const t=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:l(e.components),a.createElement(i.Provider,{value:t},e.children)}}}]);