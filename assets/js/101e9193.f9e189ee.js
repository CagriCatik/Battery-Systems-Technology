"use strict";(self.webpackChunkBMS=self.webpackChunkBMS||[]).push([[2780],{9702:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"theory/modeling_testing/matlab/closed_loop","title":"Closed-Loop Testing","description":"1. Introduction to Closed-Loop Testing","source":"@site/docs/theory/10_modeling_testing/03_matlab/09_closed_loop.md","sourceDirName":"theory/10_modeling_testing/03_matlab","slug":"/theory/modeling_testing/matlab/closed_loop","permalink":"/Battery-Systems-Technology/docs/theory/modeling_testing/matlab/closed_loop","draft":false,"unlisted":false,"editUrl":"https://github.com/CagriCatik/Battery-Systems-Technology/edit/main/docs/theory/10_modeling_testing/03_matlab/09_closed_loop.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{},"sidebar":"modelingTestingSidebar","previous":{"title":"Testing Generated Code","permalink":"/Battery-Systems-Technology/docs/theory/modeling_testing/matlab/testing_code"}}');var r=n(4848),t=n(8453);const l={},o="Closed-Loop Testing",d={},c=[{value:"<strong>1. Introduction to Closed-Loop Testing</strong>",id:"1-introduction-to-closed-loop-testing",level:2},{value:"<strong>2. Closed-Loop Test Harness Setup</strong>",id:"2-closed-loop-test-harness-setup",level:2},{value:"<strong>2.1 Creating the Test Harness</strong>",id:"21-creating-the-test-harness",level:3},{value:"<strong>2.2 Visualizing Results</strong>",id:"22-visualizing-results",level:3},{value:"<strong>3. Observing Internal Signals Without Interface Changes</strong>",id:"3-observing-internal-signals-without-interface-changes",level:2},{value:"<strong>3.1 Using Observers</strong>",id:"31-using-observers",level:3},{value:"<strong>3.2 Observer Output</strong>",id:"32-observer-output",level:3},{value:"<strong>4. Defining Test Assessments</strong>",id:"4-defining-test-assessments",level:2},{value:"<strong>4.1 Test Assessment Blocks</strong>",id:"41-test-assessment-blocks",level:3},{value:"<strong>4.2 Analyzing Results</strong>",id:"42-analyzing-results",level:3},{value:"<strong>5. Workflow Summary</strong>",id:"5-workflow-summary",level:2},{value:"<strong>6. Key Tools</strong>",id:"6-key-tools",level:2},{value:"<strong>7. Example: Validating Current Limits</strong>",id:"7-example-validating-current-limits",level:2},{value:"<strong>7.1 Test Scenario</strong>",id:"71-test-scenario",level:3},{value:"<strong>7.2 Results</strong>",id:"72-results",level:3},{value:"<strong>8. Benefits of Closed-Loop Testing</strong>",id:"8-benefits-of-closed-loop-testing",level:2},{value:"<strong>Summary</strong>",id:"summary",level:2}];function a(e){const s={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"closed-loop-testing",children:"Closed-Loop Testing"})}),"\n",(0,r.jsx)(s.h2,{id:"1-introduction-to-closed-loop-testing",children:(0,r.jsx)(s.strong,{children:"1. Introduction to Closed-Loop Testing"})}),"\n",(0,r.jsxs)(s.p,{children:["Closed-loop testing validates the ",(0,r.jsx)(s.strong,{children:"entire BMS ECU"})," against the plant model (e.g., battery pack, charger, load) to ensure system-level functionality and safety. This approach:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Tests Interactions"}),": Validates the interactions between the BMS controller and physical components."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Real-World Scenarios"}),": Simulates real-world scenarios such as charging, discharging, and fault handling."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Non-Intrusive Monitoring"}),": Uses ",(0,r.jsx)(s.strong,{children:"observers"})," to monitor internal signals without modifying model interfaces."]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"2-closed-loop-test-harness-setup",children:(0,r.jsx)(s.strong,{children:"2. Closed-Loop Test Harness Setup"})}),"\n",(0,r.jsx)(s.h3,{id:"21-creating-the-test-harness",children:(0,r.jsx)(s.strong,{children:"2.1 Creating the Test Harness"})}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Isolate the Closed-Loop System"}),":","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Combine the BMS ECU and plant model (battery pack, pre-charge circuit)."}),"\n",(0,r.jsxs)(s.li,{children:["Use ",(0,r.jsx)(s.strong,{children:"Simulink Test"})," to create a test harness:","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Navigate to ",(0,r.jsx)(s.em,{children:"Apps > Simulink Test > Create Test Harness"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Define Test Inputs"}),":","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Test Sequence Block"}),": Inject state requests (e.g., ",(0,r.jsx)(s.code,{children:"DRIVING"}),", ",(0,r.jsx)(s.code,{children:"CHARGING"}),", ",(0,r.jsx)(s.code,{children:"BALANCING"}),").","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Example:","\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-plaintext",children:"Step 1: Set State = STANDBY for 10 sec.  \nStep 2: Transition to DRIVING when SOC > 30%.  \nStep 3: Trigger FAULT if cell_temp > 45\xb0C.  \n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Signal Builder"}),": Use pre-recorded test scenarios (e.g., aggressive drive cycles) for consistent testing."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"22-visualizing-results",children:(0,r.jsx)(s.strong,{children:"2.2 Visualizing Results"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Dashboard Blocks"}),":","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Add gauges, lamps, and displays to monitor:","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Cell temperatures, SOC, pack current/voltage."}),"\n",(0,r.jsx)(s.li,{children:"Fault indicators (e.g., over-temperature, over-voltage)."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"3-observing-internal-signals-without-interface-changes",children:(0,r.jsx)(s.strong,{children:"3. Observing Internal Signals Without Interface Changes"})}),"\n",(0,r.jsx)(s.h3,{id:"31-using-observers",children:(0,r.jsx)(s.strong,{children:"3.1 Using Observers"})}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Add an Observer"}),":","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Right-click the test harness canvas \u2192 ",(0,r.jsx)(s.em,{children:"Observers > Add Observer"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Select Internal Signals"}),":","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Click the observer\u2019s badge (\ud83d\udd0d) to explore the model hierarchy."}),"\n",(0,r.jsxs)(s.li,{children:["Example: Monitor ",(0,r.jsx)(s.code,{children:"Charge_Current_Limit"})," and ",(0,r.jsx)(s.code,{children:"Discharge_Current_Limit"})," within the BMS ECU.","\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-plaintext",children:"Path: BMS_ECU \u2192 Current_Power_Limits \u2192 Charge_Current_Limit  \nPath: BMS_ECU \u2192 Current_Power_Limits \u2192 Discharge_Current_Limit  \n"})}),"\n"]}),"\n",(0,r.jsx)(s.li,{children:"Click the Wi-Fi icon (\ud83d\udcf6) to add signals to the observer."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"32-observer-output",children:(0,r.jsx)(s.strong,{children:"3.2 Observer Output"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Observer outputs appear as non-intrusive signals in the test harness."}),"\n",(0,r.jsxs)(s.li,{children:["Example:","\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-plaintext",children:"Observer_Outputs:  \n  - Charge_Current_Limit  \n  - Discharge_Current_Limit  \n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"4-defining-test-assessments",children:(0,r.jsx)(s.strong,{children:"4. Defining Test Assessments"})}),"\n",(0,r.jsx)(s.h3,{id:"41-test-assessment-blocks",children:(0,r.jsx)(s.strong,{children:"4.1 Test Assessment Blocks"})}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Add Assessment Block"}),":","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["From the ",(0,r.jsx)(s.em,{children:"Simulink Test Library"}),", drag a ",(0,r.jsx)(s.strong,{children:"Test Assessment"})," block into the observer."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Define Verify Statements"}),":","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Use logical conditions to validate signals."}),"\n",(0,r.jsxs)(s.li,{children:["Example:","\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-matlab",children:"% Check charge/discharge limits  \nverify(Charge_Current_Limit < 50);  % Must stay below 50A  \nverify(Discharge_Current_Limit > 10); % Must stay above 10A  \n"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"42-analyzing-results",children:(0,r.jsx)(s.strong,{children:"4.2 Analyzing Results"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Diagnostic Viewer"}),":","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Displays pass/fail status for each ",(0,r.jsx)(s.code,{children:"verify"})," statement."]}),"\n",(0,r.jsxs)(s.li,{children:["Example failure:","\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-plaintext",children:"FAIL: Charge_Current_Limit exceeded 50A at t=12.5s.  \n"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"5-workflow-summary",children:(0,r.jsx)(s.strong,{children:"5. Workflow Summary"})}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Simulate Closed-Loop System"}),":","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Run the test harness with state requests (e.g., charging \u2192 driving \u2192 fault)."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Monitor Signals"}),":","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Use dashboard blocks for high-level visualization."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Validate Internal Logic"}),":","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Leverage observers and test assessments to check hidden signals."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"6-key-tools",children:(0,r.jsx)(s.strong,{children:"6. Key Tools"})}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:(0,r.jsx)(s.strong,{children:"Tool"})}),(0,r.jsx)(s.th,{children:(0,r.jsx)(s.strong,{children:"Purpose"})})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Test Sequence Block"})}),(0,r.jsx)(s.td,{children:"Define state transitions and temporal logic for test scenarios."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Signal Builder"})}),(0,r.jsx)(s.td,{children:"Inject pre-recorded test inputs (e.g., drive cycles, fault triggers)."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Observers"})}),(0,r.jsx)(s.td,{children:"Monitor internal signals without modifying model interfaces."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Test Assessment"})}),(0,r.jsx)(s.td,{children:"Automate verification of signal conditions (e.g., thresholds, timing)."})]})]})]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"7-example-validating-current-limits",children:(0,r.jsx)(s.strong,{children:"7. Example: Validating Current Limits"})}),"\n",(0,r.jsx)(s.h3,{id:"71-test-scenario",children:(0,r.jsx)(s.strong,{children:"7.1 Test Scenario"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Objective"}),": Ensure charge/discharge currents stay within safe limits during driving."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Steps"}),":","\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"Inject a drive cycle with aggressive acceleration."}),"\n",(0,r.jsxs)(s.li,{children:["Use observers to monitor ",(0,r.jsx)(s.code,{children:"Charge_Current_Limit"})," and ",(0,r.jsx)(s.code,{children:"Discharge_Current_Limit"}),"."]}),"\n",(0,r.jsx)(s.li,{children:"Verify limits via test assessment blocks."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"72-results",children:(0,r.jsx)(s.strong,{children:"7.2 Results"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Pass"}),": Currents stay within bounds (e.g., charge < 50A, discharge > 10A)."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Fail"}),": Diagnostic Viewer reports violations (e.g., over-current during acceleration)."]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"8-benefits-of-closed-loop-testing",children:(0,r.jsx)(s.strong,{children:"8. Benefits of Closed-Loop Testing"})}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"System Validation"}),": Test interactions between BMS logic and plant dynamics, ensuring system-level functionality."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Non-Intrusive Monitoring"}),": Observe internal signals without redesigning models, reducing development time."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Automated Checks"}),": Use ",(0,r.jsx)(s.code,{children:"verify"})," statements to enforce safety constraints, ensuring compliance with design requirements."]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"summary",children:(0,r.jsx)(s.strong,{children:"Summary"})}),"\n",(0,r.jsx)(s.p,{children:"Closed-loop testing for BMS involves:"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Creating a Test Harness"}),": Use ",(0,r.jsx)(s.strong,{children:"Test Sequence"})," or ",(0,r.jsx)(s.strong,{children:"Signal Builder"})," blocks to define test scenarios."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Monitoring Signals"}),": Use ",(0,r.jsx)(s.strong,{children:"observers"})," to monitor internal signals (e.g., current limits) without modifying the model."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Validating Behavior"}),": Use ",(0,r.jsx)(s.strong,{children:"Test Assessment"})," blocks and the ",(0,r.jsx)(s.strong,{children:"Diagnostic Viewer"})," to enforce safety constraints and validate system behavior."]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["For advanced workflows, integrate ",(0,r.jsx)(s.strong,{children:"Simulink Coverage"})," to measure test completeness and ensure compliance with standards like ISO 26262. This approach ensures robust and reliable BMS software, ready for real-world deployment."]})]})}function h(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>l,x:()=>o});var i=n(6540);const r={},t=i.createContext(r);function l(e){const s=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(t.Provider,{value:s},e.children)}}}]);