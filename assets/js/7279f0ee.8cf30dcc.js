"use strict";(self.webpackChunkBMS=self.webpackChunkBMS||[]).push([[484],{3579:(s,e,a)=>{a.r(e),a.d(e,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>n,toc:()=>m});const n=JSON.parse('{"id":"theory/bms/initial_bms","title":"Initial State of Charge Estimation","description":"Accurate estimation of a battery\'s State of Charge (SoC) is fundamental for effective Battery Management Systems (BMS). SoC provides critical information about the remaining capacity of a battery, enabling informed decisions regarding charging, discharging, and overall battery health management. One of the foundational methods employed for SoC estimation is the Coulomb Counting Method, which calculates SoC by integrating the current over time. This chapter delves into the Coulomb Counting Method, outlining its principles, implementation steps, advantages, limitations, and potential enhancements to improve accuracy and reliability.","source":"@site/docs/theory/08_bms/05_initial_bms.md","sourceDirName":"theory/08_bms","slug":"/theory/bms/initial_bms","permalink":"/Battery-Systems-Technology/docs/theory/bms/initial_bms","draft":false,"unlisted":false,"editUrl":"https://github.com/CagriCatik/Battery-Systems-Technology/edit/main/docs/theory/08_bms/05_initial_bms.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{},"sidebar":"batteryManagementSidebar","previous":{"title":"BMS Algorithms","permalink":"/Battery-Systems-Technology/docs/theory/bms/bms_algorithms"},"next":{"title":"Cycle Counting and State of Health Estimation","permalink":"/Battery-Systems-Technology/docs/theory/bms/cycle_counting"}}');var t=a(4848),i=a(8453);const l={},r="Initial State of Charge Estimation",c={},m=[{value:"Coulomb Counting Method",id:"coulomb-counting-method",level:2},{value:"Principles of Coulomb Counting",id:"principles-of-coulomb-counting",level:3},{value:"Mathematical Representation",id:"mathematical-representation",level:3},{value:"Implementation Steps",id:"implementation-steps",level:2},{value:"1. Initial SoC Determination",id:"1-initial-soc-determination",level:3},{value:"2. Current Measurement",id:"2-current-measurement",level:3},{value:"3. Integration Over Time",id:"3-integration-over-time",level:3},{value:"4. Periodic Calibration",id:"4-periodic-calibration",level:3},{value:"Advantages",id:"advantages",level:2},{value:"Limitations",id:"limitations",level:2},{value:"Enhancements and Considerations",id:"enhancements-and-considerations",level:2},{value:"1. Temperature Compensation",id:"1-temperature-compensation",level:3},{value:"2. Sensor Fusion with Kalman Filters",id:"2-sensor-fusion-with-kalman-filters",level:3},{value:"3. Regular Nominal Capacity Updates",id:"3-regular-nominal-capacity-updates",level:3},{value:"4. Error Handling and Drift Correction",id:"4-error-handling-and-drift-correction",level:3},{value:"Practical Implementation Example",id:"practical-implementation-example",level:2},{value:"Conclusion",id:"conclusion",level:2}];function o(s){const e={annotation:"annotation",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",math:"math",mfrac:"mfrac",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",msub:"msub",msubsup:"msubsup",mtext:"mtext",ol:"ol",p:"p",pre:"pre",semantics:"semantics",span:"span",strong:"strong",ul:"ul",...(0,i.R)(),...s.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"initial-state-of-charge-estimation",children:"Initial State of Charge Estimation"})}),"\n",(0,t.jsxs)(e.p,{children:["Accurate estimation of a battery's ",(0,t.jsx)(e.strong,{children:"State of Charge (SoC)"})," is fundamental for effective Battery Management Systems (BMS). SoC provides critical information about the remaining capacity of a battery, enabling informed decisions regarding charging, discharging, and overall battery health management. One of the foundational methods employed for SoC estimation is the ",(0,t.jsx)(e.strong,{children:"Coulomb Counting Method"}),", which calculates SoC by integrating the current over time. This chapter delves into the Coulomb Counting Method, outlining its principles, implementation steps, advantages, limitations, and potential enhancements to improve accuracy and reliability."]}),"\n",(0,t.jsxs)(e.p,{children:["The ",(0,t.jsx)(e.strong,{children:"State of Charge (SoC)"})," represents the remaining energy in a battery relative to its total capacity, typically expressed as a percentage. Accurate SoC estimation is crucial for various applications, including electric vehicles, renewable energy storage systems, consumer electronics, and more. It ensures optimal battery utilization, enhances performance, and extends battery lifespan by preventing overcharging and deep discharging."]}),"\n",(0,t.jsxs)(e.p,{children:["Among the various SoC estimation techniques, the ",(0,t.jsx)(e.strong,{children:"Coulomb Counting Method"})," stands out due to its simplicity and real-time capabilities. By continuously monitoring the current flow into and out of the battery, Coulomb Counting provides an ongoing estimate of the SoC, making it a widely adopted approach in BMS implementations."]}),"\n",(0,t.jsx)(e.h2,{id:"coulomb-counting-method",children:"Coulomb Counting Method"}),"\n",(0,t.jsxs)(e.p,{children:["The ",(0,t.jsx)(e.strong,{children:"Coulomb Counting Method"})," estimates SoC by integrating the net current flowing into or out of the battery over time. The fundamental equation governing this method is:"]}),"\n",(0,t.jsx)(e.span,{className:"katex-display",children:(0,t.jsxs)(e.span,{className:"katex",children:[(0,t.jsx)(e.span,{className:"katex-mathml",children:(0,t.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,t.jsxs)(e.semantics,{children:[(0,t.jsxs)(e.mrow,{children:[(0,t.jsx)(e.mtext,{children:"SoC"}),(0,t.jsx)(e.mo,{stretchy:"false",children:"("}),(0,t.jsx)(e.mi,{children:"t"}),(0,t.jsx)(e.mo,{stretchy:"false",children:")"}),(0,t.jsx)(e.mo,{children:"="}),(0,t.jsx)(e.mtext,{children:"SoC"}),(0,t.jsx)(e.mo,{stretchy:"false",children:"("}),(0,t.jsxs)(e.msub,{children:[(0,t.jsx)(e.mi,{children:"t"}),(0,t.jsx)(e.mn,{children:"0"})]}),(0,t.jsx)(e.mo,{stretchy:"false",children:")"}),(0,t.jsx)(e.mo,{children:"+"}),(0,t.jsxs)(e.mfrac,{children:[(0,t.jsx)(e.mn,{children:"1"}),(0,t.jsxs)(e.msub,{children:[(0,t.jsx)(e.mi,{children:"C"}),(0,t.jsx)(e.mtext,{children:"nom"})]})]}),(0,t.jsxs)(e.msubsup,{children:[(0,t.jsx)(e.mo,{children:"\u222b"}),(0,t.jsxs)(e.msub,{children:[(0,t.jsx)(e.mi,{children:"t"}),(0,t.jsx)(e.mn,{children:"0"})]}),(0,t.jsx)(e.mi,{children:"t"})]}),(0,t.jsx)(e.mi,{children:"I"}),(0,t.jsx)(e.mo,{stretchy:"false",children:"("}),(0,t.jsx)(e.mi,{children:"\u03c4"}),(0,t.jsx)(e.mo,{stretchy:"false",children:")"}),(0,t.jsx)(e.mtext,{children:"\u2009"}),(0,t.jsx)(e.mi,{children:"d"}),(0,t.jsx)(e.mi,{children:"\u03c4"})]}),(0,t.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\text{SoC}(t) = \\text{SoC}(t_0) + \\frac{1}{C_{\\text{nom}}} \\int_{t_0}^{t} I(\\tau) \\, d\\tau"})]})})}),(0,t.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,t.jsx)(e.span,{className:"mord text",children:(0,t.jsx)(e.span,{className:"mord",children:"SoC"})}),(0,t.jsx)(e.span,{className:"mopen",children:"("}),(0,t.jsx)(e.span,{className:"mord mathnormal",children:"t"}),(0,t.jsx)(e.span,{className:"mclose",children:")"}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,t.jsx)(e.span,{className:"mrel",children:"="}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,t.jsx)(e.span,{className:"mord text",children:(0,t.jsx)(e.span,{className:"mord",children:"SoC"})}),(0,t.jsx)(e.span,{className:"mopen",children:"("}),(0,t.jsxs)(e.span,{className:"mord",children:[(0,t.jsx)(e.span,{className:"mord mathnormal",children:"t"}),(0,t.jsx)(e.span,{className:"msupsub",children:(0,t.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(e.span,{className:"vlist-r",children:[(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.3011em"},children:(0,t.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,t.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:"0"})})]})}),(0,t.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(e.span,{className:"vlist-r",children:(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,t.jsx)(e.span,{})})})]})})]}),(0,t.jsx)(e.span,{className:"mclose",children:")"}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,t.jsx)(e.span,{className:"mbin",children:"+"}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"2.5555em",verticalAlign:"-1.012em"}}),(0,t.jsxs)(e.span,{className:"mord",children:[(0,t.jsx)(e.span,{className:"mopen nulldelimiter"}),(0,t.jsx)(e.span,{className:"mfrac",children:(0,t.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(e.span,{className:"vlist-r",children:[(0,t.jsxs)(e.span,{className:"vlist",style:{height:"1.3214em"},children:[(0,t.jsxs)(e.span,{style:{top:"-2.314em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(e.span,{className:"mord",children:(0,t.jsxs)(e.span,{className:"mord",children:[(0,t.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"C"}),(0,t.jsx)(e.span,{className:"msupsub",children:(0,t.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(e.span,{className:"vlist-r",children:[(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.1514em"},children:(0,t.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"-0.0715em",marginRight:"0.05em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,t.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:(0,t.jsx)(e.span,{className:"mord text mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:"nom"})})})})]})}),(0,t.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(e.span,{className:"vlist-r",children:(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,t.jsx)(e.span,{})})})]})})]})})]}),(0,t.jsxs)(e.span,{style:{top:"-3.23em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(e.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,t.jsxs)(e.span,{style:{top:"-3.677em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(e.span,{className:"mord",children:(0,t.jsx)(e.span,{className:"mord",children:"1"})})]})]}),(0,t.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(e.span,{className:"vlist-r",children:(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.836em"},children:(0,t.jsx)(e.span,{})})})]})}),(0,t.jsx)(e.span,{className:"mclose nulldelimiter"})]}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,t.jsxs)(e.span,{className:"mop",children:[(0,t.jsx)(e.span,{className:"mop op-symbol large-op",style:{marginRight:"0.44445em",position:"relative",top:"-0.0011em"},children:"\u222b"}),(0,t.jsx)(e.span,{className:"msupsub",children:(0,t.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(e.span,{className:"vlist-r",children:[(0,t.jsxs)(e.span,{className:"vlist",style:{height:"1.5435em"},children:[(0,t.jsxs)(e.span,{style:{top:"-1.7881em",marginLeft:"-0.4445em",marginRight:"0.05em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,t.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:(0,t.jsxs)(e.span,{className:"mord mtight",children:[(0,t.jsx)(e.span,{className:"mord mathnormal mtight",children:"t"}),(0,t.jsx)(e.span,{className:"msupsub",children:(0,t.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(e.span,{className:"vlist-r",children:[(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.3173em"},children:(0,t.jsxs)(e.span,{style:{top:"-2.357em",marginLeft:"0em",marginRight:"0.0714em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"2.5em"}}),(0,t.jsx)(e.span,{className:"sizing reset-size3 size1 mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:"0"})})]})}),(0,t.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(e.span,{className:"vlist-r",children:(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.143em"},children:(0,t.jsx)(e.span,{})})})]})})]})})})]}),(0,t.jsxs)(e.span,{style:{top:"-3.8129em",marginRight:"0.05em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,t.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:(0,t.jsx)(e.span,{className:"mord mathnormal mtight",children:"t"})})})]})]}),(0,t.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(e.span,{className:"vlist-r",children:(0,t.jsx)(e.span,{className:"vlist",style:{height:"1.012em"},children:(0,t.jsx)(e.span,{})})})]})})]}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,t.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"I"}),(0,t.jsx)(e.span,{className:"mopen",children:"("}),(0,t.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.1132em"},children:"\u03c4"}),(0,t.jsx)(e.span,{className:"mclose",children:")"}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,t.jsx)(e.span,{className:"mord mathnormal",children:"d"}),(0,t.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.1132em"},children:"\u03c4"})]})]})]})}),"\n",(0,t.jsx)(e.p,{children:"Where:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsxs)(e.span,{className:"katex",children:[(0,t.jsx)(e.span,{className:"katex-mathml",children:(0,t.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,t.jsxs)(e.semantics,{children:[(0,t.jsxs)(e.mrow,{children:[(0,t.jsx)(e.mtext,{children:"SoC"}),(0,t.jsx)(e.mo,{stretchy:"false",children:"("}),(0,t.jsx)(e.mi,{children:"t"}),(0,t.jsx)(e.mo,{stretchy:"false",children:")"})]}),(0,t.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\text{SoC}(t)"})]})})}),(0,t.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,t.jsx)(e.span,{className:"mord text",children:(0,t.jsx)(e.span,{className:"mord",children:"SoC"})}),(0,t.jsx)(e.span,{className:"mopen",children:"("}),(0,t.jsx)(e.span,{className:"mord mathnormal",children:"t"}),(0,t.jsx)(e.span,{className:"mclose",children:")"})]})})]}),": State of Charge at time ",(0,t.jsxs)(e.span,{className:"katex",children:[(0,t.jsx)(e.span,{className:"katex-mathml",children:(0,t.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,t.jsxs)(e.semantics,{children:[(0,t.jsx)(e.mrow,{children:(0,t.jsx)(e.mi,{children:"t"})}),(0,t.jsx)(e.annotation,{encoding:"application/x-tex",children:"t"})]})})}),(0,t.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"0.6151em"}}),(0,t.jsx)(e.span,{className:"mord mathnormal",children:"t"})]})})]})]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsxs)(e.span,{className:"katex",children:[(0,t.jsx)(e.span,{className:"katex-mathml",children:(0,t.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,t.jsxs)(e.semantics,{children:[(0,t.jsxs)(e.mrow,{children:[(0,t.jsx)(e.mtext,{children:"SoC"}),(0,t.jsx)(e.mo,{stretchy:"false",children:"("}),(0,t.jsxs)(e.msub,{children:[(0,t.jsx)(e.mi,{children:"t"}),(0,t.jsx)(e.mn,{children:"0"})]}),(0,t.jsx)(e.mo,{stretchy:"false",children:")"})]}),(0,t.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\text{SoC}(t_0)"})]})})}),(0,t.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,t.jsx)(e.span,{className:"mord text",children:(0,t.jsx)(e.span,{className:"mord",children:"SoC"})}),(0,t.jsx)(e.span,{className:"mopen",children:"("}),(0,t.jsxs)(e.span,{className:"mord",children:[(0,t.jsx)(e.span,{className:"mord mathnormal",children:"t"}),(0,t.jsx)(e.span,{className:"msupsub",children:(0,t.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(e.span,{className:"vlist-r",children:[(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.3011em"},children:(0,t.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,t.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:"0"})})]})}),(0,t.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(e.span,{className:"vlist-r",children:(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,t.jsx)(e.span,{})})})]})})]}),(0,t.jsx)(e.span,{className:"mclose",children:")"})]})})]}),": Initial State of Charge"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsxs)(e.span,{className:"katex",children:[(0,t.jsx)(e.span,{className:"katex-mathml",children:(0,t.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,t.jsxs)(e.semantics,{children:[(0,t.jsx)(e.mrow,{children:(0,t.jsxs)(e.msub,{children:[(0,t.jsx)(e.mi,{children:"C"}),(0,t.jsx)(e.mtext,{children:"nom"})]})}),(0,t.jsx)(e.annotation,{encoding:"application/x-tex",children:"C_{\\text{nom}}"})]})})}),(0,t.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),(0,t.jsxs)(e.span,{className:"mord",children:[(0,t.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"C"}),(0,t.jsx)(e.span,{className:"msupsub",children:(0,t.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(e.span,{className:"vlist-r",children:[(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.1514em"},children:(0,t.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"-0.0715em",marginRight:"0.05em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,t.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:(0,t.jsx)(e.span,{className:"mord text mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:"nom"})})})})]})}),(0,t.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(e.span,{className:"vlist-r",children:(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,t.jsx)(e.span,{})})})]})})]})]})})]}),": Nominal capacity of the battery (Ampere-hours, Ah)"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsxs)(e.span,{className:"katex",children:[(0,t.jsx)(e.span,{className:"katex-mathml",children:(0,t.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,t.jsxs)(e.semantics,{children:[(0,t.jsxs)(e.mrow,{children:[(0,t.jsx)(e.mi,{children:"I"}),(0,t.jsx)(e.mo,{stretchy:"false",children:"("}),(0,t.jsx)(e.mi,{children:"\u03c4"}),(0,t.jsx)(e.mo,{stretchy:"false",children:")"})]}),(0,t.jsx)(e.annotation,{encoding:"application/x-tex",children:"I(\\tau)"})]})})}),(0,t.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,t.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"I"}),(0,t.jsx)(e.span,{className:"mopen",children:"("}),(0,t.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.1132em"},children:"\u03c4"}),(0,t.jsx)(e.span,{className:"mclose",children:")"})]})})]}),": Battery current at time ",(0,t.jsxs)(e.span,{className:"katex",children:[(0,t.jsx)(e.span,{className:"katex-mathml",children:(0,t.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,t.jsxs)(e.semantics,{children:[(0,t.jsx)(e.mrow,{children:(0,t.jsx)(e.mi,{children:"\u03c4"})}),(0,t.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\tau"})]})})}),(0,t.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"0.4306em"}}),(0,t.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.1132em"},children:"\u03c4"})]})})]})," (Amperes)"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsxs)(e.span,{className:"katex",children:[(0,t.jsx)(e.span,{className:"katex-mathml",children:(0,t.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,t.jsxs)(e.semantics,{children:[(0,t.jsxs)(e.mrow,{children:[(0,t.jsxs)(e.msubsup,{children:[(0,t.jsx)(e.mo,{children:"\u222b"}),(0,t.jsxs)(e.msub,{children:[(0,t.jsx)(e.mi,{children:"t"}),(0,t.jsx)(e.mn,{children:"0"})]}),(0,t.jsx)(e.mi,{children:"t"})]}),(0,t.jsx)(e.mi,{children:"I"}),(0,t.jsx)(e.mo,{stretchy:"false",children:"("}),(0,t.jsx)(e.mi,{children:"\u03c4"}),(0,t.jsx)(e.mo,{stretchy:"false",children:")"}),(0,t.jsx)(e.mtext,{children:"\u2009"}),(0,t.jsx)(e.mi,{children:"d"}),(0,t.jsx)(e.mi,{children:"\u03c4"})]}),(0,t.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\int_{t_0}^{t} I(\\tau) \\, d\\tau"})]})})}),(0,t.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"1.4444em",verticalAlign:"-0.4559em"}}),(0,t.jsxs)(e.span,{className:"mop",children:[(0,t.jsx)(e.span,{className:"mop op-symbol small-op",style:{marginRight:"0.19445em",position:"relative",top:"-0.0006em"},children:"\u222b"}),(0,t.jsx)(e.span,{className:"msupsub",children:(0,t.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(e.span,{className:"vlist-r",children:[(0,t.jsxs)(e.span,{className:"vlist",style:{height:"0.9885em"},children:[(0,t.jsxs)(e.span,{style:{top:"-2.3442em",marginLeft:"-0.1945em",marginRight:"0.05em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,t.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:(0,t.jsxs)(e.span,{className:"mord mtight",children:[(0,t.jsx)(e.span,{className:"mord mathnormal mtight",children:"t"}),(0,t.jsx)(e.span,{className:"msupsub",children:(0,t.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(e.span,{className:"vlist-r",children:[(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.3173em"},children:(0,t.jsxs)(e.span,{style:{top:"-2.357em",marginLeft:"0em",marginRight:"0.0714em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"2.5em"}}),(0,t.jsx)(e.span,{className:"sizing reset-size3 size1 mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:"0"})})]})}),(0,t.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(e.span,{className:"vlist-r",children:(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.143em"},children:(0,t.jsx)(e.span,{})})})]})})]})})})]}),(0,t.jsxs)(e.span,{style:{top:"-3.2579em",marginRight:"0.05em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,t.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:(0,t.jsx)(e.span,{className:"mord mathnormal mtight",children:"t"})})})]})]}),(0,t.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(e.span,{className:"vlist-r",children:(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.4559em"},children:(0,t.jsx)(e.span,{})})})]})})]}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,t.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"I"}),(0,t.jsx)(e.span,{className:"mopen",children:"("}),(0,t.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.1132em"},children:"\u03c4"}),(0,t.jsx)(e.span,{className:"mclose",children:")"}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,t.jsx)(e.span,{className:"mord mathnormal",children:"d"}),(0,t.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.1132em"},children:"\u03c4"})]})})]}),": Net charge transferred into the battery over the time interval"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"principles-of-coulomb-counting",children:"Principles of Coulomb Counting"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Current Measurement:"})," Accurate real-time measurement of the current flowing into (charging) or out of (discharging) the battery is essential."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Integration Over Time:"})," The cumulative sum of the current over time provides the net charge added or removed from the battery."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Initial SoC Reference:"})," A reliable initial SoC value is necessary to anchor the estimation process."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Nominal Capacity Utilization:"})," The nominal capacity ",(0,t.jsxs)(e.span,{className:"katex",children:[(0,t.jsx)(e.span,{className:"katex-mathml",children:(0,t.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,t.jsxs)(e.semantics,{children:[(0,t.jsx)(e.mrow,{children:(0,t.jsxs)(e.msub,{children:[(0,t.jsx)(e.mi,{children:"C"}),(0,t.jsx)(e.mtext,{children:"nom"})]})}),(0,t.jsx)(e.annotation,{encoding:"application/x-tex",children:"C_{\\text{nom}}"})]})})}),(0,t.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),(0,t.jsxs)(e.span,{className:"mord",children:[(0,t.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"C"}),(0,t.jsx)(e.span,{className:"msupsub",children:(0,t.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(e.span,{className:"vlist-r",children:[(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.1514em"},children:(0,t.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"-0.0715em",marginRight:"0.05em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,t.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:(0,t.jsx)(e.span,{className:"mord text mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:"nom"})})})})]})}),(0,t.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(e.span,{className:"vlist-r",children:(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,t.jsx)(e.span,{})})})]})})]})]})})]})," serves as the scaling factor to convert charge (Ampere-seconds) into SoC percentage."]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"mathematical-representation",children:"Mathematical Representation"}),"\n",(0,t.jsx)(e.p,{children:"For discrete time intervals, the continuous integral can be approximated using numerical integration methods, such as the trapezoidal rule or simple summation:"}),"\n",(0,t.jsx)(e.span,{className:"katex-display",children:(0,t.jsxs)(e.span,{className:"katex",children:[(0,t.jsx)(e.span,{className:"katex-mathml",children:(0,t.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,t.jsxs)(e.semantics,{children:[(0,t.jsxs)(e.mrow,{children:[(0,t.jsx)(e.mtext,{children:"SoC"}),(0,t.jsx)(e.mo,{stretchy:"false",children:"("}),(0,t.jsx)(e.mi,{children:"t"}),(0,t.jsx)(e.mo,{children:"+"}),(0,t.jsx)(e.mi,{mathvariant:"normal",children:"\u0394"}),(0,t.jsx)(e.mi,{children:"t"}),(0,t.jsx)(e.mo,{stretchy:"false",children:")"}),(0,t.jsx)(e.mo,{children:"="}),(0,t.jsx)(e.mtext,{children:"SoC"}),(0,t.jsx)(e.mo,{stretchy:"false",children:"("}),(0,t.jsx)(e.mi,{children:"t"}),(0,t.jsx)(e.mo,{stretchy:"false",children:")"}),(0,t.jsx)(e.mo,{children:"+"}),(0,t.jsxs)(e.mfrac,{children:[(0,t.jsxs)(e.mrow,{children:[(0,t.jsx)(e.mi,{children:"I"}),(0,t.jsx)(e.mo,{stretchy:"false",children:"("}),(0,t.jsx)(e.mi,{children:"t"}),(0,t.jsx)(e.mo,{stretchy:"false",children:")"}),(0,t.jsx)(e.mo,{children:"\xd7"}),(0,t.jsx)(e.mi,{mathvariant:"normal",children:"\u0394"}),(0,t.jsx)(e.mi,{children:"t"})]}),(0,t.jsxs)(e.mrow,{children:[(0,t.jsxs)(e.msub,{children:[(0,t.jsx)(e.mi,{children:"C"}),(0,t.jsx)(e.mtext,{children:"nom"})]}),(0,t.jsx)(e.mo,{children:"\xd7"}),(0,t.jsx)(e.mn,{children:"3600"})]})]})]}),(0,t.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\text{SoC}(t + \\Delta t) = \\text{SoC}(t) + \\frac{I(t) \\times \\Delta t}{C_{\\text{nom}} \\times 3600}"})]})})}),(0,t.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,t.jsx)(e.span,{className:"mord text",children:(0,t.jsx)(e.span,{className:"mord",children:"SoC"})}),(0,t.jsx)(e.span,{className:"mopen",children:"("}),(0,t.jsx)(e.span,{className:"mord mathnormal",children:"t"}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,t.jsx)(e.span,{className:"mbin",children:"+"}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,t.jsx)(e.span,{className:"mord",children:"\u0394"}),(0,t.jsx)(e.span,{className:"mord mathnormal",children:"t"}),(0,t.jsx)(e.span,{className:"mclose",children:")"}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,t.jsx)(e.span,{className:"mrel",children:"="}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,t.jsx)(e.span,{className:"mord text",children:(0,t.jsx)(e.span,{className:"mord",children:"SoC"})}),(0,t.jsx)(e.span,{className:"mopen",children:"("}),(0,t.jsx)(e.span,{className:"mord mathnormal",children:"t"}),(0,t.jsx)(e.span,{className:"mclose",children:")"}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,t.jsx)(e.span,{className:"mbin",children:"+"}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"2.263em",verticalAlign:"-0.836em"}}),(0,t.jsxs)(e.span,{className:"mord",children:[(0,t.jsx)(e.span,{className:"mopen nulldelimiter"}),(0,t.jsx)(e.span,{className:"mfrac",children:(0,t.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(e.span,{className:"vlist-r",children:[(0,t.jsxs)(e.span,{className:"vlist",style:{height:"1.427em"},children:[(0,t.jsxs)(e.span,{style:{top:"-2.314em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsxs)(e.span,{className:"mord",children:[(0,t.jsxs)(e.span,{className:"mord",children:[(0,t.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"C"}),(0,t.jsx)(e.span,{className:"msupsub",children:(0,t.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(e.span,{className:"vlist-r",children:[(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.1514em"},children:(0,t.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"-0.0715em",marginRight:"0.05em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,t.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:(0,t.jsx)(e.span,{className:"mord text mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:"nom"})})})})]})}),(0,t.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(e.span,{className:"vlist-r",children:(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,t.jsx)(e.span,{})})})]})})]}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,t.jsx)(e.span,{className:"mbin",children:"\xd7"}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,t.jsx)(e.span,{className:"mord",children:"3600"})]})]}),(0,t.jsxs)(e.span,{style:{top:"-3.23em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(e.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,t.jsxs)(e.span,{style:{top:"-3.677em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsxs)(e.span,{className:"mord",children:[(0,t.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"I"}),(0,t.jsx)(e.span,{className:"mopen",children:"("}),(0,t.jsx)(e.span,{className:"mord mathnormal",children:"t"}),(0,t.jsx)(e.span,{className:"mclose",children:")"}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,t.jsx)(e.span,{className:"mbin",children:"\xd7"}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,t.jsx)(e.span,{className:"mord",children:"\u0394"}),(0,t.jsx)(e.span,{className:"mord mathnormal",children:"t"})]})]})]}),(0,t.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(e.span,{className:"vlist-r",children:(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.836em"},children:(0,t.jsx)(e.span,{})})})]})}),(0,t.jsx)(e.span,{className:"mclose nulldelimiter"})]})]})]})]})}),"\n",(0,t.jsxs)(e.p,{children:["Where ",(0,t.jsxs)(e.span,{className:"katex",children:[(0,t.jsx)(e.span,{className:"katex-mathml",children:(0,t.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,t.jsxs)(e.semantics,{children:[(0,t.jsxs)(e.mrow,{children:[(0,t.jsx)(e.mi,{mathvariant:"normal",children:"\u0394"}),(0,t.jsx)(e.mi,{children:"t"})]}),(0,t.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\Delta t"})]})})}),(0,t.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"0.6833em"}}),(0,t.jsx)(e.span,{className:"mord",children:"\u0394"}),(0,t.jsx)(e.span,{className:"mord mathnormal",children:"t"})]})})]})," is the time step in seconds, and the division by 3600 converts Ampere-seconds to Ampere-hours."]}),"\n",(0,t.jsx)(e.h2,{id:"implementation-steps",children:"Implementation Steps"}),"\n",(0,t.jsx)(e.p,{children:"Implementing the Coulomb Counting Method involves several critical steps to ensure accuracy and reliability. Below are the detailed steps required for effective SoC estimation using this method."}),"\n",(0,t.jsx)(e.h3,{id:"1-initial-soc-determination",children:"1. Initial SoC Determination"}),"\n",(0,t.jsx)(e.p,{children:"Accurate initial SoC determination is vital to anchor the Coulomb Counting process and minimize error accumulation."}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Open-Circuit Voltage (OCV) Measurement:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Procedure:"})," At the beginning of operation or after a prolonged rest period, measure the battery's open-circuit voltage (OCV)."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"OCV-SoC Relationship:"})," Utilize a predefined OCV-SoC lookup table or curve specific to the battery chemistry to determine the initial SoC based on the measured OCV."]}),"\n"]}),"\n",(0,t.jsx)(e.em,{children:"Example:"})," For a lithium-ion battery, an OCV of 3.7 V might correspond to an SoC of approximately 50%."]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"2-current-measurement",children:"2. Current Measurement"}),"\n",(0,t.jsx)(e.p,{children:"Precise current measurement is the backbone of the Coulomb Counting Method. Any inaccuracies here directly translate to SoC estimation errors."}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Current Sensors:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Types:"})," Shunt resistors, Hall effect sensors, and current transformers."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Selection Criteria:"})," High accuracy, low drift, and appropriate current range for the application."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Calibration:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Regularly calibrate current sensors to ensure measurement accuracy."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Sampling Rate:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Choose an adequate sampling rate to capture rapid current changes without introducing significant integration errors."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"3-integration-over-time",children:"3. Integration Over Time"}),"\n",(0,t.jsx)(e.p,{children:"Integrate the measured current over discrete time intervals to estimate the net charge transfer."}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Discrete Integration:"})}),"\n",(0,t.jsxs)(e.p,{children:["For each time step ",(0,t.jsxs)(e.span,{className:"katex",children:[(0,t.jsx)(e.span,{className:"katex-mathml",children:(0,t.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,t.jsxs)(e.semantics,{children:[(0,t.jsxs)(e.mrow,{children:[(0,t.jsx)(e.mi,{mathvariant:"normal",children:"\u0394"}),(0,t.jsx)(e.mi,{children:"t"})]}),(0,t.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\Delta t"})]})})}),(0,t.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"0.6833em"}}),(0,t.jsx)(e.span,{className:"mord",children:"\u0394"}),(0,t.jsx)(e.span,{className:"mord mathnormal",children:"t"})]})})]}),":"]}),"\n",(0,t.jsx)(e.span,{className:"katex-display",children:(0,t.jsxs)(e.span,{className:"katex",children:[(0,t.jsx)(e.span,{className:"katex-mathml",children:(0,t.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,t.jsxs)(e.semantics,{children:[(0,t.jsxs)(e.mrow,{children:[(0,t.jsx)(e.mi,{mathvariant:"normal",children:"\u0394"}),(0,t.jsx)(e.mtext,{children:"SoC"}),(0,t.jsx)(e.mo,{children:"="}),(0,t.jsxs)(e.mfrac,{children:[(0,t.jsxs)(e.mrow,{children:[(0,t.jsx)(e.mi,{children:"I"}),(0,t.jsx)(e.mo,{stretchy:"false",children:"("}),(0,t.jsx)(e.mi,{children:"t"}),(0,t.jsx)(e.mo,{stretchy:"false",children:")"}),(0,t.jsx)(e.mo,{children:"\xd7"}),(0,t.jsx)(e.mi,{mathvariant:"normal",children:"\u0394"}),(0,t.jsx)(e.mi,{children:"t"})]}),(0,t.jsxs)(e.mrow,{children:[(0,t.jsxs)(e.msub,{children:[(0,t.jsx)(e.mi,{children:"C"}),(0,t.jsx)(e.mtext,{children:"nom"})]}),(0,t.jsx)(e.mo,{children:"\xd7"}),(0,t.jsx)(e.mn,{children:"3600"})]})]})]}),(0,t.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\Delta \\text{SoC} = \\frac{I(t) \\times \\Delta t}{C_{\\text{nom}} \\times 3600}"})]})})}),(0,t.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"0.6833em"}}),(0,t.jsx)(e.span,{className:"mord",children:"\u0394"}),(0,t.jsx)(e.span,{className:"mord text",children:(0,t.jsx)(e.span,{className:"mord",children:"SoC"})}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,t.jsx)(e.span,{className:"mrel",children:"="}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"2.263em",verticalAlign:"-0.836em"}}),(0,t.jsxs)(e.span,{className:"mord",children:[(0,t.jsx)(e.span,{className:"mopen nulldelimiter"}),(0,t.jsx)(e.span,{className:"mfrac",children:(0,t.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(e.span,{className:"vlist-r",children:[(0,t.jsxs)(e.span,{className:"vlist",style:{height:"1.427em"},children:[(0,t.jsxs)(e.span,{style:{top:"-2.314em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsxs)(e.span,{className:"mord",children:[(0,t.jsxs)(e.span,{className:"mord",children:[(0,t.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"C"}),(0,t.jsx)(e.span,{className:"msupsub",children:(0,t.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(e.span,{className:"vlist-r",children:[(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.1514em"},children:(0,t.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"-0.0715em",marginRight:"0.05em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,t.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:(0,t.jsx)(e.span,{className:"mord text mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:"nom"})})})})]})}),(0,t.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(e.span,{className:"vlist-r",children:(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,t.jsx)(e.span,{})})})]})})]}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,t.jsx)(e.span,{className:"mbin",children:"\xd7"}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,t.jsx)(e.span,{className:"mord",children:"3600"})]})]}),(0,t.jsxs)(e.span,{style:{top:"-3.23em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(e.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,t.jsxs)(e.span,{style:{top:"-3.677em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsxs)(e.span,{className:"mord",children:[(0,t.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"I"}),(0,t.jsx)(e.span,{className:"mopen",children:"("}),(0,t.jsx)(e.span,{className:"mord mathnormal",children:"t"}),(0,t.jsx)(e.span,{className:"mclose",children:")"}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,t.jsx)(e.span,{className:"mbin",children:"\xd7"}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,t.jsx)(e.span,{className:"mord",children:"\u0394"}),(0,t.jsx)(e.span,{className:"mord mathnormal",children:"t"})]})]})]}),(0,t.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(e.span,{className:"vlist-r",children:(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.836em"},children:(0,t.jsx)(e.span,{})})})]})}),(0,t.jsx)(e.span,{className:"mclose nulldelimiter"})]})]})]})]})}),"\n",(0,t.jsx)(e.span,{className:"katex-display",children:(0,t.jsxs)(e.span,{className:"katex",children:[(0,t.jsx)(e.span,{className:"katex-mathml",children:(0,t.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,t.jsxs)(e.semantics,{children:[(0,t.jsxs)(e.mrow,{children:[(0,t.jsx)(e.mtext,{children:"SoC"}),(0,t.jsx)(e.mo,{stretchy:"false",children:"("}),(0,t.jsx)(e.mi,{children:"t"}),(0,t.jsx)(e.mo,{children:"+"}),(0,t.jsx)(e.mi,{mathvariant:"normal",children:"\u0394"}),(0,t.jsx)(e.mi,{children:"t"}),(0,t.jsx)(e.mo,{stretchy:"false",children:")"}),(0,t.jsx)(e.mo,{children:"="}),(0,t.jsx)(e.mtext,{children:"SoC"}),(0,t.jsx)(e.mo,{stretchy:"false",children:"("}),(0,t.jsx)(e.mi,{children:"t"}),(0,t.jsx)(e.mo,{stretchy:"false",children:")"}),(0,t.jsx)(e.mo,{children:"\u2212"}),(0,t.jsx)(e.mi,{mathvariant:"normal",children:"\u0394"}),(0,t.jsx)(e.mtext,{children:"SoC"})]}),(0,t.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\text{SoC}(t + \\Delta t) = \\text{SoC}(t) - \\Delta \\text{SoC}"})]})})}),(0,t.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,t.jsx)(e.span,{className:"mord text",children:(0,t.jsx)(e.span,{className:"mord",children:"SoC"})}),(0,t.jsx)(e.span,{className:"mopen",children:"("}),(0,t.jsx)(e.span,{className:"mord mathnormal",children:"t"}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,t.jsx)(e.span,{className:"mbin",children:"+"}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,t.jsx)(e.span,{className:"mord",children:"\u0394"}),(0,t.jsx)(e.span,{className:"mord mathnormal",children:"t"}),(0,t.jsx)(e.span,{className:"mclose",children:")"}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,t.jsx)(e.span,{className:"mrel",children:"="}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,t.jsx)(e.span,{className:"mord text",children:(0,t.jsx)(e.span,{className:"mord",children:"SoC"})}),(0,t.jsx)(e.span,{className:"mopen",children:"("}),(0,t.jsx)(e.span,{className:"mord mathnormal",children:"t"}),(0,t.jsx)(e.span,{className:"mclose",children:")"}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,t.jsx)(e.span,{className:"mbin",children:"\u2212"}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"0.6833em"}}),(0,t.jsx)(e.span,{className:"mord",children:"\u0394"}),(0,t.jsx)(e.span,{className:"mord text",children:(0,t.jsx)(e.span,{className:"mord",children:"SoC"})})]})]})]})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.em,{children:"Note:"})," Discharging currents are considered positive, while charging currents are negative, or vice versa, depending on the convention used."]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Clamping SoC:"})}),"\n",(0,t.jsx)(e.p,{children:"Ensure that the SoC remains within the physical bounds of 0% to 100%."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"4-periodic-calibration",children:"4. Periodic Calibration"}),"\n",(0,t.jsx)(e.p,{children:"Due to potential drift and accumulation of errors, periodic recalibration is necessary to maintain SoC accuracy."}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"OCV Re-measurement:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Perform OCV measurements during rest periods (no load or charge) to recalibrate the SoC."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Error Correction:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Adjust the Coulomb Counting estimate based on the difference between the estimated SoC and the recalibrated SoC."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"advantages",children:"Advantages"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Simplicity:"})," Easy to implement with basic current measurement hardware."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Real-Time Estimation:"})," Provides continuous SoC updates during both charging and discharging."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Low Computational Overhead:"})," Suitable for systems with limited processing capabilities."]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"limitations",children:"Limitations"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Cumulative Errors:"})," Integration drift due to sensor inaccuracies, measurement noise, and quantization errors can lead to significant SoC estimation errors over time."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Initial SoC Dependency:"})," Accurate initial SoC determination is critical; errors here propagate throughout the estimation process."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Requires Periodic Calibration:"})," Necessitates regular OCV measurements to correct drift and maintain accuracy."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Temperature Sensitivity:"})," Battery behavior and sensor performance can vary with temperature, affecting measurement accuracy."]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"enhancements-and-considerations",children:"Enhancements and Considerations"}),"\n",(0,t.jsx)(e.p,{children:"To mitigate the inherent limitations of the Coulomb Counting Method and enhance SoC estimation accuracy, several strategies can be employed:"}),"\n",(0,t.jsx)(e.h3,{id:"1-temperature-compensation",children:"1. Temperature Compensation"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Rationale:"})," Battery capacity and sensor performance are temperature-dependent."]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Implementation:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Incorporate temperature measurements into the SoC estimation algorithm."}),"\n",(0,t.jsxs)(e.li,{children:["Adjust the nominal capacity ",(0,t.jsxs)(e.span,{className:"katex",children:[(0,t.jsx)(e.span,{className:"katex-mathml",children:(0,t.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,t.jsxs)(e.semantics,{children:[(0,t.jsx)(e.mrow,{children:(0,t.jsxs)(e.msub,{children:[(0,t.jsx)(e.mi,{children:"C"}),(0,t.jsx)(e.mtext,{children:"nom"})]})}),(0,t.jsx)(e.annotation,{encoding:"application/x-tex",children:"C_{\\text{nom}}"})]})})}),(0,t.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),(0,t.jsxs)(e.span,{className:"mord",children:[(0,t.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"C"}),(0,t.jsx)(e.span,{className:"msupsub",children:(0,t.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(e.span,{className:"vlist-r",children:[(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.1514em"},children:(0,t.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"-0.0715em",marginRight:"0.05em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,t.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:(0,t.jsx)(e.span,{className:"mord text mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:"nom"})})})})]})}),(0,t.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(e.span,{className:"vlist-r",children:(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,t.jsx)(e.span,{})})})]})})]})]})})]})," based on temperature to account for capacity variations."]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Code Snippet: Temperature-Compensated Coulomb Counting"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'def temperature_compensated_coulomb_counting(current_readings, time_interval, initial_soc, battery_capacity, temperature, temp_coefficient):\n    """\n    Estimate SoC using Coulomb Counting with temperature compensation.\n\n    :param current_readings: List of current measurements (in Amperes)\n    :param time_interval: Time between measurements (in seconds)\n    :param initial_soc: Initial State of Charge (0 to 1)\n    :param battery_capacity: Nominal battery capacity at reference temperature (Ah)\n    :param temperature: Current battery temperature (\xb0C)\n    :param temp_coefficient: Capacity adjustment coefficient per \xb0C\n    :return: Estimated SoC (0 to 1)\n    """\n    # Adjust battery capacity based on temperature\n    adjusted_capacity = battery_capacity * (1 + temp_coefficient * (temperature - 25))  # Reference temp 25\xb0C\n\n    charge_accumulated = sum(current * time_interval for current in current_readings)\n    soc = initial_soc - (charge_accumulated / (adjusted_capacity * 3600))\n    return max(0, min(1, soc))  # Ensure SoC is within 0 to 1\n\n# Example Usage\nif __name__ == "__main__":\n    current_readings = [0.5, 0.5, 0.5, -0.5, -0.5]  # Amperes\n    time_interval = 60  # Seconds\n    initial_soc = 0.8  # 80%\n    battery_capacity = 2.0  # Ah\n    temperature = 30  # \xb0C\n    temp_coefficient = 0.005  # 0.5% per \xb0C\n\n    estimated_soc = temperature_compensated_coulomb_counting(\n        current_readings, time_interval, initial_soc, battery_capacity, temperature, temp_coefficient\n    )\n    print(f"Estimated SoC with Temperature Compensation: {estimated_soc * 100:.2f}%")\n'})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"2-sensor-fusion-with-kalman-filters",children:"2. Sensor Fusion with Kalman Filters"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Rationale:"})," Combine Coulomb Counting with other estimation methods to reduce errors."]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Implementation:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Use Kalman Filters to fuse current and voltage measurements, accounting for sensor noise and system dynamics."}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Code Snippet: Coulomb Counting with Kalman Filter Integration"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:"import numpy as np\n\nclass KalmanFilter:\n    def __init__(self, initial_state, initial_covariance, process_noise, measurement_noise):\n        self.state = initial_state\n        self.P = initial_covariance\n        self.Q = process_noise\n        self.R = measurement_noise\n\n    def predict(self, current, dt, battery_capacity):\n        # State prediction\n        self.state -= (current * dt) / battery_capacity\n        # Covariance prediction\n        self.P += self.Q\n\n    def update(self, voltage, voltage_soc_map):\n        # Measurement prediction based on voltage\n        soc_measured = ocv_to_soc(voltage, voltage_soc_map)\n        # Kalman Gain\n        K = self.P / (self.P + self.R)\n        # State update\n        self.state += K * (soc_measured - self.state)\n        # Covariance update\n        self.P = (1 - K) * self.P\n\ndef ocv_to_soc(ocv, ocv_soc_map):\n    \"\"\"\n    Estimate SoC based on Open Circuit Voltage (OCV).\n\n    :param ocv: Measured open circuit voltage\n    :param ocv_soc_map: Dictionary mapping OCV values to SoC\n    :return: Estimated SoC (0 to 1)\n    \"\"\"\n    # Find the closest OCV value in the map\n    closest_ocv = min(ocv_soc_map.keys(), key=lambda k: abs(k - ocv))\n    return ocv_soc_map[closest_ocv]\n\n# Example Usage\nif __name__ == \"__main__\":\n    # Define OCV to SoC mapping\n    ocv_soc_map = {\n        3.0: 0.0,\n        3.2: 0.2,\n        3.4: 0.4,\n        3.6: 0.6,\n        3.8: 0.8,\n        4.0: 1.0\n    }\n\n    # Initialize Kalman Filter\n    initial_soc = 0.8\n    initial_covariance = 1e-3\n    process_noise = 1e-5\n    measurement_noise = 1e-2\n    kf = KalmanFilter(initial_soc, initial_covariance, process_noise, measurement_noise)\n\n    # Simulate measurements\n    measurements = [\n        {'current': -0.5, 'voltage': 3.7},\n        {'current': -0.6, 'voltage': 3.68},\n        {'current': -0.4, 'voltage': 3.69},\n        {'current': -0.5, 'voltage': 3.71},\n    ]\n    dt = 60  # Seconds\n    battery_capacity = 2.0  # Ah\n\n    for m in measurements:\n        kf.predict(m['current'], dt, battery_capacity)\n        kf.update(m['voltage'], ocv_soc_map)\n        print(f\"Estimated SoC: {kf.state * 100:.2f}%\")\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"3-regular-nominal-capacity-updates",children:"3. Regular Nominal Capacity Updates"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Rationale:"})," Battery capacity diminishes over time due to aging and usage."]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Implementation:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["Periodically update ",(0,t.jsxs)(e.span,{className:"katex",children:[(0,t.jsx)(e.span,{className:"katex-mathml",children:(0,t.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,t.jsxs)(e.semantics,{children:[(0,t.jsx)(e.mrow,{children:(0,t.jsxs)(e.msub,{children:[(0,t.jsx)(e.mi,{children:"C"}),(0,t.jsx)(e.mtext,{children:"nom"})]})}),(0,t.jsx)(e.annotation,{encoding:"application/x-tex",children:"C_{\\text{nom}}"})]})})}),(0,t.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),(0,t.jsxs)(e.span,{className:"mord",children:[(0,t.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"C"}),(0,t.jsx)(e.span,{className:"msupsub",children:(0,t.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(e.span,{className:"vlist-r",children:[(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.1514em"},children:(0,t.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"-0.0715em",marginRight:"0.05em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,t.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:(0,t.jsx)(e.span,{className:"mord text mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:"nom"})})})})]})}),(0,t.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(e.span,{className:"vlist-r",children:(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,t.jsx)(e.span,{})})})]})})]})]})})]})," based on SoH estimations to reflect the current effective capacity."]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Code Snippet: Dynamic Nominal Capacity Adjustment"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'def update_nominal_capacity(initial_capacity, soh):\n    """\n    Update the nominal capacity based on the current State of Health (SoH).\n\n    :param initial_capacity: Original battery capacity (Ah)\n    :param soh: Current State of Health (0 to 1)\n    :return: Updated nominal capacity (Ah)\n    """\n    return initial_capacity * soh\n\n# Example Usage\nif __name__ == "__main__":\n    initial_capacity = 2.0  # Ah\n    soh = 0.85  # 85% SoH\n\n    updated_capacity = update_nominal_capacity(initial_capacity, soh)\n    print(f"Updated Nominal Capacity: {updated_capacity:.2f} Ah")\n'})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"4-error-handling-and-drift-correction",children:"4. Error Handling and Drift Correction"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Rationale:"})," Address cumulative errors to maintain SoC accuracy."]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Implementation:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Implement drift correction mechanisms, such as periodic OCV-based recalibration."}),"\n",(0,t.jsx)(e.li,{children:"Utilize data fusion techniques to blend multiple estimation methods."}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Code Snippet: Drift Correction with Periodic Recalibration"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:"class CoulombCountingSoC:\n    def __init__(self, initial_soc, battery_capacity):\n        self.soc = initial_soc\n        self.battery_capacity = battery_capacity  # Ah\n\n    def update_soc(self, current, dt):\n        \"\"\"\n        Update SoC based on current and time interval.\n\n        :param current: Current in Amperes (positive for discharge, negative for charge)\n        :param dt: Time interval in seconds\n        \"\"\"\n        delta_soc = (current * dt) / (self.battery_capacity * 3600)\n        self.soc -= delta_soc\n        # Clamp SoC between 0 and 1\n        self.soc = max(0, min(self.soc, 1))\n\n    def calibrate_soc(self, ocv, ocv_soc_map):\n        \"\"\"\n        Calibrate SoC based on OCV measurement.\n\n        :param ocv: Open Circuit Voltage measurement (V)\n        :param ocv_soc_map: Dictionary mapping OCV to SoC\n        \"\"\"\n        calibrated_soc = ocv_to_soc(ocv, ocv_soc_map)\n        self.soc = calibrated_soc\n\n# Example Usage\nif __name__ == \"__main__\":\n    # Initialize Coulomb Counting SoC\n    initial_soc = 0.8  # 80%\n    battery_capacity = 2.0  # Ah\n    soc_estimator = CoulombCountingSoC(initial_soc, battery_capacity)\n\n    # Define OCV to SoC mapping\n    ocv_soc_map = {\n        3.0: 0.0,\n        3.2: 0.2,\n        3.4: 0.4,\n        3.6: 0.6,\n        3.8: 0.8,\n        4.0: 1.0\n    }\n\n    # Simulate current measurements\n    measurements = [\n        {'current': -0.5, 'dt': 60},\n        {'current': -0.6, 'dt': 60},\n        {'current': -0.4, 'dt': 60},\n        {'current': -0.5, 'dt': 60},\n    ]\n\n    for m in measurements:\n        soc_estimator.update_soc(m['current'], m['dt'])\n        print(f\"Estimated SoC before calibration: {soc_estimator.soc * 100:.2f}%\")\n\n    # Perform calibration with OCV measurement\n    measured_ocv = 3.7  # V\n    soc_estimator.calibrate_soc(measured_ocv, ocv_soc_map)\n    print(f\"Estimated SoC after calibration: {soc_estimator.soc * 100:.2f}%\")\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"practical-implementation-example",children:"Practical Implementation Example"}),"\n",(0,t.jsx)(e.p,{children:"To illustrate the practical aspects of the Coulomb Counting Method, consider the following comprehensive Python example that integrates current measurement, SoC updating, temperature compensation, and periodic calibration."}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'import time\n\nclass CoulombCountingSoC:\n    def __init__(self, initial_soc, battery_capacity, temperature_coefficient=0.005):\n        """\n        Initializes the Coulomb Counting SoC estimator with temperature compensation.\n        \n        :param initial_soc: Initial State of Charge (0 to 1)\n        :param battery_capacity: Nominal battery capacity (Ah)\n        :param temperature_coefficient: Capacity adjustment per degree Celsius\n        """\n        self.soc = initial_soc\n        self.battery_capacity = battery_capacity  # Ah\n        self.temperature_coefficient = temperature_coefficient\n        self.last_time = time.time()\n    \n    def update_soc(self, current, temperature, dt):\n        """\n        Updates the SoC based on current, temperature, and time interval.\n        \n        :param current: Current in Amperes (positive for discharge, negative for charge)\n        :param temperature: Current temperature in Celsius\n        :param dt: Time interval in seconds\n        """\n        # Adjust capacity based on temperature\n        adjusted_capacity = self.battery_capacity * (1 + self.temperature_coefficient * (temperature - 25))\n        \n        # Calculate delta SoC\n        delta_soc = (current * dt) / (adjusted_capacity * 3600)\n        self.soc -= delta_soc\n        \n        # Clamp SoC between 0 and 1\n        self.soc = max(0, min(self.soc, 1))\n    \n    def calibrate_soc(self, ocv, ocv_soc_map):\n        """\n        Calibrates the SoC based on OCV measurement.\n        \n        :param ocv: Measured open circuit voltage (V)\n        :param ocv_soc_map: Dictionary mapping OCV to SoC\n        """\n        calibrated_soc = ocv_to_soc(ocv, ocv_soc_map)\n        self.soc = calibrated_soc\n    \n    def get_soc(self):\n        """\n        Returns the current estimated SoC.\n        \n        :return: SoC (0 to 1)\n        """\n        return self.soc\n\ndef ocv_to_soc(ocv, ocv_soc_map):\n    """\n    Estimate SoC based on Open Circuit Voltage (OCV).\n    \n    :param ocv: Measured open circuit voltage\n    :param ocv_soc_map: Dictionary mapping OCV values to SoC\n    :return: Estimated SoC (0 to 1)\n    """\n    # Find the closest OCV value in the map\n    closest_ocv = min(ocv_soc_map.keys(), key=lambda k: abs(k - ocv))\n    return ocv_soc_map[closest_ocv]\n\n# Example Usage\nif __name__ == "__main__":\n    # Define OCV to SoC mapping for a specific battery chemistry\n    ocv_soc_map = {\n        3.0: 0.0,\n        3.2: 0.2,\n        3.4: 0.4,\n        3.6: 0.6,\n        3.8: 0.8,\n        4.0: 1.0\n    }\n    \n    # Initialize SoC estimator\n    initial_soc = 0.8  # 80%\n    battery_capacity = 2.0  # Ah\n    soc_estimator = CoulombCountingSoC(initial_soc, battery_capacity)\n    \n    # Simulate data\n    measurements = [\n        {\'current\': -0.5, \'temperature\': 25, \'dt\': 60},  # Discharging\n        {\'current\': -0.6, \'temperature\': 30, \'dt\': 60},\n        {\'current\': -0.4, \'temperature\': 28, \'dt\': 60},\n        {\'current\': -0.5, \'temperature\': 26, \'dt\': 60},\n    ]\n    \n    for m in measurements:\n        soc_estimator.update_soc(m[\'current\'], m[\'temperature\'], m[\'dt\'])\n        print(f"Estimated SoC before calibration: {soc_estimator.get_soc() * 100:.2f}%")\n    \n    # Perform calibration with OCV measurement during rest\n    measured_ocv = 3.7  # V\n    soc_estimator.calibrate_soc(measured_ocv, ocv_soc_map)\n    print(f"Estimated SoC after calibration: {soc_estimator.get_soc() * 100:.2f}%")\n'})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Explanation:"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"CoulombCountingSoC Class:"})," Encapsulates the SoC estimation logic with temperature compensation."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Temperature Compensation:"})," Adjusts the nominal capacity based on the current temperature to account for capacity variations."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Update Method:"})," Integrates the current over the time interval to update the SoC."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Calibration Method:"})," Recalibrates the SoC using OCV measurements to correct drift."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Example Usage:"})," Simulates a series of current and temperature measurements, updates the SoC, and performs calibration to maintain accuracy."]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,t.jsxs)(e.p,{children:["The ",(0,t.jsx)(e.strong,{children:"Coulomb Counting Method"})," is a fundamental technique for estimating the State of Charge (SoC) in Battery Management Systems. Its simplicity and real-time capabilities make it a popular choice across various applications, from consumer electronics to electric vehicles. However, its susceptibility to cumulative errors necessitates careful implementation and regular calibration to ensure accuracy."]}),"\n",(0,t.jsx)(e.p,{children:"By incorporating enhancements such as temperature compensation, sensor fusion with Kalman Filters, dynamic nominal capacity adjustments, and robust error handling, the Coulomb Counting Method's accuracy and reliability can be significantly improved. These strategies address the method's inherent limitations, enabling BMS to provide reliable SoC estimations that are crucial for optimal battery performance and longevity."}),"\n",(0,t.jsx)(e.p,{children:"As battery technologies continue to advance, integrating advanced algorithms and sensor technologies will further enhance SoC estimation accuracy, ensuring that BMS can meet the evolving demands of modern energy storage solutions."})]})}function h(s={}){const{wrapper:e}={...(0,i.R)(),...s.components};return e?(0,t.jsx)(e,{...s,children:(0,t.jsx)(o,{...s})}):o(s)}},8453:(s,e,a)=>{a.d(e,{R:()=>l,x:()=>r});var n=a(6540);const t={},i=n.createContext(t);function l(s){const e=n.useContext(i);return n.useMemo((function(){return"function"==typeof s?s(e):{...e,...s}}),[e,s])}function r(s){let e;return e=s.disableParentContext?"function"==typeof s.components?s.components(t):s.components||t:l(s.components),n.createElement(i.Provider,{value:e},s.children)}}}]);