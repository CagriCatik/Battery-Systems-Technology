"use strict";(self.webpackChunkBMS=self.webpackChunkBMS||[]).push([[211],{8741:(s,e,a)=>{a.r(e),a.d(e,{assets:()=>r,contentTitle:()=>c,default:()=>d,frontMatter:()=>i,metadata:()=>n,toc:()=>m});const n=JSON.parse('{"id":"system_and_algorithms/cycle_counting","title":"Cycle Counting and State of Health","description":"Introduction","source":"@site/docs/system_and_algorithms/05_cycle_counting_soh.md","sourceDirName":"system_and_algorithms","slug":"/system_and_algorithms/cycle_counting","permalink":"/BMS/docs/system_and_algorithms/cycle_counting","draft":false,"unlisted":false,"editUrl":"https://github.com/CagriCatik/BMS/edit/main/docs/system_and_algorithms/05_cycle_counting_soh.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"id":"cycle_counting"},"sidebar":"SystemAlgorithmSidebar","previous":{"title":"State of Health Estimation","permalink":"/BMS/docs/system_and_algorithms/soh_estimation"},"next":{"title":"Cell Balancing","permalink":"/BMS/docs/system_and_algorithms/cell_balancing"}}');var t=a(4848),l=a(8453);const i={id:"cycle_counting"},c="Cycle Counting and State of Health",r={},m=[{value:"Introduction",id:"introduction",level:2},{value:"Cycle Counting",id:"cycle-counting",level:2},{value:"1. Overview",id:"1-overview",level:3},{value:"2. Defining a Battery Cycle",id:"2-defining-a-battery-cycle",level:3},{value:"Key Definitions",id:"key-definitions",level:4},{value:"Example",id:"example",level:4},{value:"3. Challenges in Cycle Counting",id:"3-challenges-in-cycle-counting",level:3},{value:"3.1 No Direct Measurement",id:"31-no-direct-measurement",level:4},{value:"3.2 Nonlinear Battery Behavior",id:"32-nonlinear-battery-behavior",level:4},{value:"3.3 Duty Profiles",id:"33-duty-profiles",level:4},{value:"4. Cycle Counting Algorithm",id:"4-cycle-counting-algorithm",level:3},{value:"Step 1: Monitoring SoC",id:"step-1-monitoring-soc",level:4},{value:"Step 2: Identifying Cycles",id:"step-2-identifying-cycles",level:4},{value:"Step 3: Accumulating Partial Cycles",id:"step-3-accumulating-partial-cycles",level:4},{value:"Step 4: Logging and Updating",id:"step-4-logging-and-updating",level:4},{value:"5. Duty Calculation for Enhanced Accuracy",id:"5-duty-calculation-for-enhanced-accuracy",level:3},{value:"Charging Duty",id:"charging-duty",level:4},{value:"Discharging Duty",id:"discharging-duty",level:4},{value:"Total Duty",id:"total-duty",level:4},{value:"State of Health (SoH)",id:"state-of-health-soh",level:2},{value:"1. Overview",id:"1-overview-1",level:3},{value:"Formula",id:"formula",level:4},{value:"2. Capacity Degradation",id:"2-capacity-degradation",level:3},{value:"Lookup Table Implementation",id:"lookup-table-implementation",level:4},{value:"3. SoH Estimation Algorithm",id:"3-soh-estimation-algorithm",level:3},{value:"Step 1: Retrieve Cycle Count",id:"step-1-retrieve-cycle-count",level:4},{value:"Step 2: Estimate Remaining Capacity",id:"step-2-estimate-remaining-capacity",level:4},{value:"Step 3: Calculate SoH",id:"step-3-calculate-soh",level:4},{value:"4. Duty-Corrected SoH",id:"4-duty-corrected-soh",level:3},{value:"5. MATLAB Implementation of SoH",id:"5-matlab-implementation-of-soh",level:3},{value:"Algorithm Design",id:"algorithm-design",level:4},{value:"Pseudo-Code",id:"pseudo-code",level:4}];function h(s){const e={annotation:"annotation",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",math:"math",mfrac:"mfrac",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",msub:"msub",mtext:"mtext",ol:"ol",p:"p",pre:"pre",semantics:"semantics",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...s.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"cycle-counting-and-state-of-health",children:"Cycle Counting and State of Health"})}),"\n",(0,t.jsx)(e.h2,{id:"introduction",children:"Introduction"}),"\n",(0,t.jsx)(e.p,{children:"Cycle Counting and State of Health (SoH) are pivotal components of Battery Management Systems (BMS). These metrics enable the effective monitoring of battery usage and health, ensuring optimal performance, reliability, and longevity. This documentation provides an in-depth, detailed, and seamless explanation of the methodologies, algorithms, and challenges associated with cycle counting and SoH estimation, offering insights suitable for industry professionals and engineers."}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"cycle-counting",children:"Cycle Counting"}),"\n",(0,t.jsx)(e.h3,{id:"1-overview",children:"1. Overview"}),"\n",(0,t.jsx)(e.p,{children:"Cycle counting determines the number of complete charge-discharge cycles a battery undergoes over its lifetime. Understanding the number of cycles is crucial for predicting battery degradation and estimating remaining life."}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h3,{id:"2-defining-a-battery-cycle",children:"2. Defining a Battery Cycle"}),"\n",(0,t.jsx)(e.p,{children:"A cycle is defined as a full charge from a minimum State of Charge (SoC) (e.g., 20%) to a maximum SoC (e.g., 100%), followed by a discharge back to the starting SoC. Partial cycles are accumulated to represent equivalent full cycles."}),"\n",(0,t.jsx)(e.h4,{id:"key-definitions",children:"Key Definitions"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Charge Cycle:"})," The transition of a battery\u2019s SoC from a low to a high value."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Discharge Cycle:"})," The reverse process of depleting the battery from a high SoC to a lower SoC."]}),"\n"]}),"\n",(0,t.jsx)(e.h4,{id:"example",children:"Example"}),"\n",(0,t.jsx)(e.p,{children:"If a battery is discharged from 100% to 50% and then recharged to 100%, it is considered half a cycle. Two such operations would count as one full cycle."}),"\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"Cycle Phase"}),(0,t.jsx)(e.th,{children:"Start SoC (%)"}),(0,t.jsx)(e.th,{children:"End SoC (%)"}),(0,t.jsx)(e.th,{children:"Description"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"Charging"}),(0,t.jsx)(e.td,{children:"20"}),(0,t.jsx)(e.td,{children:"100"}),(0,t.jsx)(e.td,{children:"Full charge from 20% to 100%."})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"Discharging"}),(0,t.jsx)(e.td,{children:"100"}),(0,t.jsx)(e.td,{children:"20"}),(0,t.jsx)(e.td,{children:"Full discharge from 100% to 20%."})]})]})]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h3,{id:"3-challenges-in-cycle-counting",children:"3. Challenges in Cycle Counting"}),"\n",(0,t.jsx)(e.h4,{id:"31-no-direct-measurement",children:"3.1 No Direct Measurement"}),"\n",(0,t.jsx)(e.p,{children:"Cycles cannot be directly measured by sensors; they must be inferred using algorithms based on current, voltage, and SoC."}),"\n",(0,t.jsx)(e.h4,{id:"32-nonlinear-battery-behavior",children:"3.2 Nonlinear Battery Behavior"}),"\n",(0,t.jsx)(e.p,{children:"Factors like varying charge/discharge rates, temperature, and battery chemistry introduce complexity in defining and counting cycles."}),"\n",(0,t.jsx)(e.h4,{id:"33-duty-profiles",children:"3.3 Duty Profiles"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Charge Duty:"})," The total energy added to the battery during a charge event."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Discharge Duty:"})," The total energy removed from the battery during a discharge event."]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:"These profiles help in accurately estimating partial and full cycles."}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h3,{id:"4-cycle-counting-algorithm",children:"4. Cycle Counting Algorithm"}),"\n",(0,t.jsx)(e.h4,{id:"step-1-monitoring-soc",children:"Step 1: Monitoring SoC"}),"\n",(0,t.jsx)(e.p,{children:"Continuously monitor SoC using battery voltage and current sensors."}),"\n",(0,t.jsx)(e.h4,{id:"step-2-identifying-cycles",children:"Step 2: Identifying Cycles"}),"\n",(0,t.jsx)(e.p,{children:"Define a full cycle as the SoC changing from a low value to a high value and back to the starting point:"}),"\n",(0,t.jsx)(e.span,{className:"katex-display",children:(0,t.jsxs)(e.span,{className:"katex",children:[(0,t.jsx)(e.span,{className:"katex-mathml",children:(0,t.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,t.jsxs)(e.semantics,{children:[(0,t.jsxs)(e.mrow,{children:[(0,t.jsx)(e.mtext,{children:"Cycle\xa0Count"}),(0,t.jsx)(e.mo,{children:"="}),(0,t.jsx)(e.mo,{children:"\u2211"}),(0,t.jsxs)(e.mfrac,{children:[(0,t.jsxs)(e.mrow,{children:[(0,t.jsx)(e.mi,{mathvariant:"normal",children:"\u0394"}),(0,t.jsx)(e.mtext,{children:"SoC"})]}),(0,t.jsx)(e.mn,{children:"100"})]})]}),(0,t.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\text{Cycle Count} = \\sum \\frac{\\Delta \\text{SoC}}{100}"})]})})}),(0,t.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),(0,t.jsx)(e.span,{className:"mord text",children:(0,t.jsx)(e.span,{className:"mord",children:"Cycle\xa0Count"})}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,t.jsx)(e.span,{className:"mrel",children:"="}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"2.0463em",verticalAlign:"-0.686em"}}),(0,t.jsx)(e.span,{className:"mop op-symbol large-op",style:{position:"relative",top:"0em"},children:"\u2211"}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,t.jsxs)(e.span,{className:"mord",children:[(0,t.jsx)(e.span,{className:"mopen nulldelimiter"}),(0,t.jsx)(e.span,{className:"mfrac",children:(0,t.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(e.span,{className:"vlist-r",children:[(0,t.jsxs)(e.span,{className:"vlist",style:{height:"1.3603em"},children:[(0,t.jsxs)(e.span,{style:{top:"-2.314em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(e.span,{className:"mord",children:(0,t.jsx)(e.span,{className:"mord",children:"100"})})]}),(0,t.jsxs)(e.span,{style:{top:"-3.23em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(e.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,t.jsxs)(e.span,{style:{top:"-3.677em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsxs)(e.span,{className:"mord",children:[(0,t.jsx)(e.span,{className:"mord",children:"\u0394"}),(0,t.jsx)(e.span,{className:"mord text",children:(0,t.jsx)(e.span,{className:"mord",children:"SoC"})})]})]})]}),(0,t.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(e.span,{className:"vlist-r",children:(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.686em"},children:(0,t.jsx)(e.span,{})})})]})}),(0,t.jsx)(e.span,{className:"mclose nulldelimiter"})]})]})]})]})}),"\n",(0,t.jsx)(e.h4,{id:"step-3-accumulating-partial-cycles",children:"Step 3: Accumulating Partial Cycles"}),"\n",(0,t.jsx)(e.p,{children:"Track incomplete cycles by summing fractional changes in SoC. For example:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Discharge from 100% to 50% \u2192 0.5 cycles."}),"\n",(0,t.jsx)(e.li,{children:"Charge from 50% to 100% \u2192 0.5 cycles."}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Total"})," = 1 full cycle."]}),"\n"]}),"\n",(0,t.jsx)(e.h4,{id:"step-4-logging-and-updating",children:"Step 4: Logging and Updating"}),"\n",(0,t.jsx)(e.p,{children:"Maintain a counter to record accumulated cycles."}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h3,{id:"5-duty-calculation-for-enhanced-accuracy",children:"5. Duty Calculation for Enhanced Accuracy"}),"\n",(0,t.jsx)(e.h4,{id:"charging-duty",children:"Charging Duty"}),"\n",(0,t.jsx)(e.p,{children:"The charge duty reflects the energy added to the battery during a charging event:"}),"\n",(0,t.jsx)(e.span,{className:"katex-display",children:(0,t.jsxs)(e.span,{className:"katex",children:[(0,t.jsx)(e.span,{className:"katex-mathml",children:(0,t.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,t.jsxs)(e.semantics,{children:[(0,t.jsxs)(e.mrow,{children:[(0,t.jsxs)(e.msub,{children:[(0,t.jsx)(e.mtext,{children:"Duty"}),(0,t.jsx)(e.mtext,{children:"charge"})]}),(0,t.jsx)(e.mo,{children:"="}),(0,t.jsxs)(e.msub,{children:[(0,t.jsx)(e.mtext,{children:"End\xa0SoC"}),(0,t.jsx)(e.mtext,{children:"charge"})]}),(0,t.jsx)(e.mo,{children:"\u2212"}),(0,t.jsxs)(e.msub,{children:[(0,t.jsx)(e.mtext,{children:"Start\xa0SoC"}),(0,t.jsx)(e.mtext,{children:"charge"})]})]}),(0,t.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\text{Duty}_{\\text{charge}} = \\text{End SoC}_{\\text{charge}} - \\text{Start SoC}_{\\text{charge}}"})]})})}),(0,t.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"1.0636em",verticalAlign:"-0.3802em"}}),(0,t.jsxs)(e.span,{className:"mord",children:[(0,t.jsx)(e.span,{className:"mord text",children:(0,t.jsx)(e.span,{className:"mord",children:"Duty"})}),(0,t.jsx)(e.span,{className:"msupsub",children:(0,t.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(e.span,{className:"vlist-r",children:[(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.242em"},children:(0,t.jsxs)(e.span,{style:{top:"-2.4559em",marginRight:"0.05em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,t.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:(0,t.jsx)(e.span,{className:"mord text mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:"charge"})})})})]})}),(0,t.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(e.span,{className:"vlist-r",children:(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.3802em"},children:(0,t.jsx)(e.span,{})})})]})})]}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,t.jsx)(e.span,{className:"mrel",children:"="}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"0.9805em",verticalAlign:"-0.2861em"}}),(0,t.jsxs)(e.span,{className:"mord",children:[(0,t.jsx)(e.span,{className:"mord text",children:(0,t.jsx)(e.span,{className:"mord",children:"End\xa0SoC"})}),(0,t.jsx)(e.span,{className:"msupsub",children:(0,t.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(e.span,{className:"vlist-r",children:[(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.3361em"},children:(0,t.jsxs)(e.span,{style:{top:"-2.55em",marginRight:"0.05em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,t.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:(0,t.jsx)(e.span,{className:"mord text mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:"charge"})})})})]})}),(0,t.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(e.span,{className:"vlist-r",children:(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.2861em"},children:(0,t.jsx)(e.span,{})})})]})})]}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,t.jsx)(e.span,{className:"mbin",children:"\u2212"}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"0.9694em",verticalAlign:"-0.2861em"}}),(0,t.jsxs)(e.span,{className:"mord",children:[(0,t.jsx)(e.span,{className:"mord text",children:(0,t.jsx)(e.span,{className:"mord",children:"Start\xa0SoC"})}),(0,t.jsx)(e.span,{className:"msupsub",children:(0,t.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(e.span,{className:"vlist-r",children:[(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.3361em"},children:(0,t.jsxs)(e.span,{style:{top:"-2.55em",marginRight:"0.05em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,t.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:(0,t.jsx)(e.span,{className:"mord text mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:"charge"})})})})]})}),(0,t.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(e.span,{className:"vlist-r",children:(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.2861em"},children:(0,t.jsx)(e.span,{})})})]})})]})]})]})]})}),"\n",(0,t.jsx)(e.h4,{id:"discharging-duty",children:"Discharging Duty"}),"\n",(0,t.jsx)(e.p,{children:"The discharge duty reflects the energy drawn during discharging:"}),"\n",(0,t.jsx)(e.span,{className:"katex-display",children:(0,t.jsxs)(e.span,{className:"katex",children:[(0,t.jsx)(e.span,{className:"katex-mathml",children:(0,t.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,t.jsxs)(e.semantics,{children:[(0,t.jsxs)(e.mrow,{children:[(0,t.jsxs)(e.msub,{children:[(0,t.jsx)(e.mtext,{children:"Duty"}),(0,t.jsx)(e.mtext,{children:"discharge"})]}),(0,t.jsx)(e.mo,{children:"="}),(0,t.jsxs)(e.msub,{children:[(0,t.jsx)(e.mtext,{children:"Start\xa0SoC"}),(0,t.jsx)(e.mtext,{children:"discharge"})]}),(0,t.jsx)(e.mo,{children:"\u2212"}),(0,t.jsxs)(e.msub,{children:[(0,t.jsx)(e.mtext,{children:"End\xa0SoC"}),(0,t.jsx)(e.mtext,{children:"discharge"})]})]}),(0,t.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\text{Duty}_{\\text{discharge}} = \\text{Start SoC}_{\\text{discharge}} - \\text{End SoC}_{\\text{discharge}}"})]})})}),(0,t.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"1.0636em",verticalAlign:"-0.3802em"}}),(0,t.jsxs)(e.span,{className:"mord",children:[(0,t.jsx)(e.span,{className:"mord text",children:(0,t.jsx)(e.span,{className:"mord",children:"Duty"})}),(0,t.jsx)(e.span,{className:"msupsub",children:(0,t.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(e.span,{className:"vlist-r",children:[(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.242em"},children:(0,t.jsxs)(e.span,{style:{top:"-2.4559em",marginRight:"0.05em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,t.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:(0,t.jsx)(e.span,{className:"mord text mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:"discharge"})})})})]})}),(0,t.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(e.span,{className:"vlist-r",children:(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.3802em"},children:(0,t.jsx)(e.span,{})})})]})})]}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,t.jsx)(e.span,{className:"mrel",children:"="}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"0.9694em",verticalAlign:"-0.2861em"}}),(0,t.jsxs)(e.span,{className:"mord",children:[(0,t.jsx)(e.span,{className:"mord text",children:(0,t.jsx)(e.span,{className:"mord",children:"Start\xa0SoC"})}),(0,t.jsx)(e.span,{className:"msupsub",children:(0,t.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(e.span,{className:"vlist-r",children:[(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.3361em"},children:(0,t.jsxs)(e.span,{style:{top:"-2.55em",marginRight:"0.05em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,t.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:(0,t.jsx)(e.span,{className:"mord text mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:"discharge"})})})})]})}),(0,t.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(e.span,{className:"vlist-r",children:(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.2861em"},children:(0,t.jsx)(e.span,{})})})]})})]}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,t.jsx)(e.span,{className:"mbin",children:"\u2212"}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"0.9805em",verticalAlign:"-0.2861em"}}),(0,t.jsxs)(e.span,{className:"mord",children:[(0,t.jsx)(e.span,{className:"mord text",children:(0,t.jsx)(e.span,{className:"mord",children:"End\xa0SoC"})}),(0,t.jsx)(e.span,{className:"msupsub",children:(0,t.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(e.span,{className:"vlist-r",children:[(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.3361em"},children:(0,t.jsxs)(e.span,{style:{top:"-2.55em",marginRight:"0.05em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,t.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:(0,t.jsx)(e.span,{className:"mord text mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:"discharge"})})})})]})}),(0,t.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(e.span,{className:"vlist-r",children:(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.2861em"},children:(0,t.jsx)(e.span,{})})})]})})]})]})]})]})}),"\n",(0,t.jsx)(e.h4,{id:"total-duty",children:"Total Duty"}),"\n",(0,t.jsx)(e.p,{children:"The sum of charging and discharging duties helps refine cycle calculations:"}),"\n",(0,t.jsx)(e.span,{className:"katex-display",children:(0,t.jsxs)(e.span,{className:"katex",children:[(0,t.jsx)(e.span,{className:"katex-mathml",children:(0,t.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,t.jsxs)(e.semantics,{children:[(0,t.jsxs)(e.mrow,{children:[(0,t.jsx)(e.mtext,{children:"Total\xa0Duty"}),(0,t.jsx)(e.mo,{children:"="}),(0,t.jsxs)(e.msub,{children:[(0,t.jsx)(e.mtext,{children:"Duty"}),(0,t.jsx)(e.mtext,{children:"charge"})]}),(0,t.jsx)(e.mo,{children:"+"}),(0,t.jsxs)(e.msub,{children:[(0,t.jsx)(e.mtext,{children:"Duty"}),(0,t.jsx)(e.mtext,{children:"discharge"})]})]}),(0,t.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\text{Total Duty} = \\text{Duty}_{\\text{charge}} + \\text{Duty}_{\\text{discharge}}"})]})})}),(0,t.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),(0,t.jsx)(e.span,{className:"mord text",children:(0,t.jsx)(e.span,{className:"mord",children:"Total\xa0Duty"})}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,t.jsx)(e.span,{className:"mrel",children:"="}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"1.0636em",verticalAlign:"-0.3802em"}}),(0,t.jsxs)(e.span,{className:"mord",children:[(0,t.jsx)(e.span,{className:"mord text",children:(0,t.jsx)(e.span,{className:"mord",children:"Duty"})}),(0,t.jsx)(e.span,{className:"msupsub",children:(0,t.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(e.span,{className:"vlist-r",children:[(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.242em"},children:(0,t.jsxs)(e.span,{style:{top:"-2.4559em",marginRight:"0.05em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,t.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:(0,t.jsx)(e.span,{className:"mord text mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:"charge"})})})})]})}),(0,t.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(e.span,{className:"vlist-r",children:(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.3802em"},children:(0,t.jsx)(e.span,{})})})]})})]}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,t.jsx)(e.span,{className:"mbin",children:"+"}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"1.0636em",verticalAlign:"-0.3802em"}}),(0,t.jsxs)(e.span,{className:"mord",children:[(0,t.jsx)(e.span,{className:"mord text",children:(0,t.jsx)(e.span,{className:"mord",children:"Duty"})}),(0,t.jsx)(e.span,{className:"msupsub",children:(0,t.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(e.span,{className:"vlist-r",children:[(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.242em"},children:(0,t.jsxs)(e.span,{style:{top:"-2.4559em",marginRight:"0.05em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,t.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:(0,t.jsx)(e.span,{className:"mord text mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:"discharge"})})})})]})}),(0,t.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(e.span,{className:"vlist-r",children:(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.3802em"},children:(0,t.jsx)(e.span,{})})})]})})]})]})]})]})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"state-of-health-soh",children:"State of Health (SoH)"}),"\n",(0,t.jsx)(e.h3,{id:"1-overview-1",children:"1. Overview"}),"\n",(0,t.jsx)(e.p,{children:"State of Health (SoH) quantifies the current capacity of a battery compared to its original capacity when new. It serves as a measure of battery aging and remaining usability."}),"\n",(0,t.jsx)(e.h4,{id:"formula",children:"Formula"}),"\n",(0,t.jsx)(e.span,{className:"katex-display",children:(0,t.jsxs)(e.span,{className:"katex",children:[(0,t.jsx)(e.span,{className:"katex-mathml",children:(0,t.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,t.jsxs)(e.semantics,{children:[(0,t.jsxs)(e.mrow,{children:[(0,t.jsx)(e.mtext,{children:"SoH"}),(0,t.jsx)(e.mo,{children:"="}),(0,t.jsxs)(e.mfrac,{children:[(0,t.jsx)(e.mtext,{children:"Remaining\xa0Capacity"}),(0,t.jsx)(e.mtext,{children:"Rated\xa0Capacity"})]}),(0,t.jsx)(e.mo,{children:"\xd7"}),(0,t.jsx)(e.mn,{children:"100"})]}),(0,t.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\text{SoH} = \\frac{\\text{Remaining Capacity}}{\\text{Rated Capacity}} \\times 100"})]})})}),(0,t.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"0.6833em"}}),(0,t.jsx)(e.span,{className:"mord text",children:(0,t.jsx)(e.span,{className:"mord",children:"SoH"})}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,t.jsx)(e.span,{className:"mrel",children:"="}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"2.2408em",verticalAlign:"-0.8804em"}}),(0,t.jsxs)(e.span,{className:"mord",children:[(0,t.jsx)(e.span,{className:"mopen nulldelimiter"}),(0,t.jsx)(e.span,{className:"mfrac",children:(0,t.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(e.span,{className:"vlist-r",children:[(0,t.jsxs)(e.span,{className:"vlist",style:{height:"1.3603em"},children:[(0,t.jsxs)(e.span,{style:{top:"-2.314em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(e.span,{className:"mord",children:(0,t.jsx)(e.span,{className:"mord text",children:(0,t.jsx)(e.span,{className:"mord",children:"Rated\xa0Capacity"})})})]}),(0,t.jsxs)(e.span,{style:{top:"-3.23em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(e.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,t.jsxs)(e.span,{style:{top:"-3.677em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(e.span,{className:"mord",children:(0,t.jsx)(e.span,{className:"mord text",children:(0,t.jsx)(e.span,{className:"mord",children:"Remaining\xa0Capacity"})})})]})]}),(0,t.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(e.span,{className:"vlist-r",children:(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.8804em"},children:(0,t.jsx)(e.span,{})})})]})}),(0,t.jsx)(e.span,{className:"mclose nulldelimiter"})]}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,t.jsx)(e.span,{className:"mbin",children:"\xd7"}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"0.6444em"}}),(0,t.jsx)(e.span,{className:"mord",children:"100"})]})]})]})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h3,{id:"2-capacity-degradation",children:"2. Capacity Degradation"}),"\n",(0,t.jsx)(e.p,{children:"Battery capacity diminishes with usage due to cycle aging, temperature extremes, and internal resistance growth. The relationship between cycle count and capacity loss is often modeled using a Cycle vs. Capacity Loss Chart."}),"\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"Cycle Count"}),(0,t.jsx)(e.th,{children:"Remaining Capacity (% of Rated)"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"0"}),(0,t.jsx)(e.td,{children:"100%"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"500"}),(0,t.jsx)(e.td,{children:"90%"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"1000"}),(0,t.jsx)(e.td,{children:"80%"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"1500"}),(0,t.jsx)(e.td,{children:"70%"})]})]})]}),"\n",(0,t.jsx)(e.h4,{id:"lookup-table-implementation",children:"Lookup Table Implementation"}),"\n",(0,t.jsx)(e.p,{children:"The Cycle vs. Capacity Loss Chart is converted into a lookup table for algorithmic use:"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsx)(e.li,{children:"Use the current cycle count as input."}),"\n",(0,t.jsx)(e.li,{children:"Interpolate to find the remaining capacity."}),"\n"]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h3,{id:"3-soh-estimation-algorithm",children:"3. SoH Estimation Algorithm"}),"\n",(0,t.jsx)(e.h4,{id:"step-1-retrieve-cycle-count",children:"Step 1: Retrieve Cycle Count"}),"\n",(0,t.jsx)(e.p,{children:"Calculate or retrieve the total cycles completed using the cycle counting algorithm."}),"\n",(0,t.jsx)(e.h4,{id:"step-2-estimate-remaining-capacity",children:"Step 2: Estimate Remaining Capacity"}),"\n",(0,t.jsx)(e.p,{children:"Map the cycle count to remaining capacity using the lookup table:"}),"\n",(0,t.jsx)(e.span,{className:"katex-display",children:(0,t.jsxs)(e.span,{className:"katex",children:[(0,t.jsx)(e.span,{className:"katex-mathml",children:(0,t.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,t.jsxs)(e.semantics,{children:[(0,t.jsxs)(e.mrow,{children:[(0,t.jsx)(e.mtext,{children:"Remaining\xa0Capacity"}),(0,t.jsx)(e.mo,{children:"="}),(0,t.jsx)(e.mi,{children:"f"}),(0,t.jsx)(e.mo,{stretchy:"false",children:"("}),(0,t.jsx)(e.mtext,{children:"Cycle\xa0Count"}),(0,t.jsx)(e.mo,{stretchy:"false",children:")"})]}),(0,t.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\text{Remaining Capacity} = f(\\text{Cycle Count})"})]})})}),(0,t.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"0.8778em",verticalAlign:"-0.1944em"}}),(0,t.jsx)(e.span,{className:"mord text",children:(0,t.jsx)(e.span,{className:"mord",children:"Remaining\xa0Capacity"})}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,t.jsx)(e.span,{className:"mrel",children:"="}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,t.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.10764em"},children:"f"}),(0,t.jsx)(e.span,{className:"mopen",children:"("}),(0,t.jsx)(e.span,{className:"mord text",children:(0,t.jsx)(e.span,{className:"mord",children:"Cycle\xa0Count"})}),(0,t.jsx)(e.span,{className:"mclose",children:")"})]})]})]})}),"\n",(0,t.jsx)(e.h4,{id:"step-3-calculate-soh",children:"Step 3: Calculate SoH"}),"\n",(0,t.jsx)(e.p,{children:"Calculate SoH as the ratio of remaining capacity to rated capacity:"}),"\n",(0,t.jsx)(e.span,{className:"katex-display",children:(0,t.jsxs)(e.span,{className:"katex",children:[(0,t.jsx)(e.span,{className:"katex-mathml",children:(0,t.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,t.jsxs)(e.semantics,{children:[(0,t.jsxs)(e.mrow,{children:[(0,t.jsx)(e.mtext,{children:"SoH"}),(0,t.jsx)(e.mo,{children:"="}),(0,t.jsxs)(e.mfrac,{children:[(0,t.jsx)(e.mtext,{children:"Remaining\xa0Capacity"}),(0,t.jsx)(e.mtext,{children:"Rated\xa0Capacity"})]}),(0,t.jsx)(e.mo,{children:"\xd7"}),(0,t.jsx)(e.mn,{children:"100"})]}),(0,t.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\text{SoH} = \\frac{\\text{Remaining Capacity}}{\\text{Rated Capacity}} \\times 100"})]})})}),(0,t.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"0.6833em"}}),(0,t.jsx)(e.span,{className:"mord text",children:(0,t.jsx)(e.span,{className:"mord",children:"SoH"})}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,t.jsx)(e.span,{className:"mrel",children:"="}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"2.2408em",verticalAlign:"-0.8804em"}}),(0,t.jsxs)(e.span,{className:"mord",children:[(0,t.jsx)(e.span,{className:"mopen nulldelimiter"}),(0,t.jsx)(e.span,{className:"mfrac",children:(0,t.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(e.span,{className:"vlist-r",children:[(0,t.jsxs)(e.span,{className:"vlist",style:{height:"1.3603em"},children:[(0,t.jsxs)(e.span,{style:{top:"-2.314em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(e.span,{className:"mord",children:(0,t.jsx)(e.span,{className:"mord text",children:(0,t.jsx)(e.span,{className:"mord",children:"Rated\xa0Capacity"})})})]}),(0,t.jsxs)(e.span,{style:{top:"-3.23em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(e.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,t.jsxs)(e.span,{style:{top:"-3.677em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(e.span,{className:"mord",children:(0,t.jsx)(e.span,{className:"mord text",children:(0,t.jsx)(e.span,{className:"mord",children:"Remaining\xa0Capacity"})})})]})]}),(0,t.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(e.span,{className:"vlist-r",children:(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.8804em"},children:(0,t.jsx)(e.span,{})})})]})}),(0,t.jsx)(e.span,{className:"mclose nulldelimiter"})]}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,t.jsx)(e.span,{className:"mbin",children:"\xd7"}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"0.6444em"}}),(0,t.jsx)(e.span,{className:"mord",children:"100"})]})]})]})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h3,{id:"4-duty-corrected-soh",children:"4. Duty-Corrected SoH"}),"\n",(0,t.jsx)(e.p,{children:"Integrating duty calculations enhances the accuracy of SoH estimation:"}),"\n",(0,t.jsx)(e.span,{className:"katex-display",children:(0,t.jsxs)(e.span,{className:"katex",children:[(0,t.jsx)(e.span,{className:"katex-mathml",children:(0,t.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,t.jsxs)(e.semantics,{children:[(0,t.jsxs)(e.mrow,{children:[(0,t.jsxs)(e.msub,{children:[(0,t.jsx)(e.mtext,{children:"SoH"}),(0,t.jsx)(e.mtext,{children:"corrected"})]}),(0,t.jsx)(e.mo,{children:"="}),(0,t.jsxs)(e.mfrac,{children:[(0,t.jsxs)(e.msub,{children:[(0,t.jsx)(e.mtext,{children:"Remaining\xa0Capacity"}),(0,t.jsx)(e.mtext,{children:"duty"})]}),(0,t.jsx)(e.mtext,{children:"Rated\xa0Capacity"})]}),(0,t.jsx)(e.mo,{children:"\xd7"}),(0,t.jsx)(e.mn,{children:"100"})]}),(0,t.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\text{SoH}_{\\text{corrected}} = \\frac{\\text{Remaining Capacity}_{\\text{duty}}}{\\text{Rated Capacity}} \\times 100"})]})})}),(0,t.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),(0,t.jsxs)(e.span,{className:"mord",children:[(0,t.jsx)(e.span,{className:"mord text",children:(0,t.jsx)(e.span,{className:"mord",children:"SoH"})}),(0,t.jsx)(e.span,{className:"msupsub",children:(0,t.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(e.span,{className:"vlist-r",children:[(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.3361em"},children:(0,t.jsxs)(e.span,{style:{top:"-2.55em",marginRight:"0.05em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,t.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:(0,t.jsx)(e.span,{className:"mord text mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:"corrected"})})})})]})}),(0,t.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(e.span,{className:"vlist-r",children:(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,t.jsx)(e.span,{})})})]})})]}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,t.jsx)(e.span,{className:"mrel",children:"="}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"2.334em",verticalAlign:"-0.8804em"}}),(0,t.jsxs)(e.span,{className:"mord",children:[(0,t.jsx)(e.span,{className:"mopen nulldelimiter"}),(0,t.jsx)(e.span,{className:"mfrac",children:(0,t.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(e.span,{className:"vlist-r",children:[(0,t.jsxs)(e.span,{className:"vlist",style:{height:"1.4536em"},children:[(0,t.jsxs)(e.span,{style:{top:"-2.314em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(e.span,{className:"mord",children:(0,t.jsx)(e.span,{className:"mord text",children:(0,t.jsx)(e.span,{className:"mord",children:"Rated\xa0Capacity"})})})]}),(0,t.jsxs)(e.span,{style:{top:"-3.23em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(e.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,t.jsxs)(e.span,{style:{top:"-3.7702em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(e.span,{className:"mord",children:(0,t.jsxs)(e.span,{className:"mord",children:[(0,t.jsx)(e.span,{className:"mord text",children:(0,t.jsx)(e.span,{className:"mord",children:"Remaining\xa0Capacity"})}),(0,t.jsx)(e.span,{className:"msupsub",children:(0,t.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(e.span,{className:"vlist-r",children:[(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.242em"},children:(0,t.jsxs)(e.span,{style:{top:"-2.4559em",marginRight:"0.05em"},children:[(0,t.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,t.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:(0,t.jsx)(e.span,{className:"mord text mtight",children:(0,t.jsx)(e.span,{className:"mord mtight",children:"duty"})})})})]})}),(0,t.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(e.span,{className:"vlist-r",children:(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.3802em"},children:(0,t.jsx)(e.span,{})})})]})})]})})]})]}),(0,t.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(e.span,{className:"vlist-r",children:(0,t.jsx)(e.span,{className:"vlist",style:{height:"0.8804em"},children:(0,t.jsx)(e.span,{})})})]})}),(0,t.jsx)(e.span,{className:"mclose nulldelimiter"})]}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,t.jsx)(e.span,{className:"mbin",children:"\xd7"}),(0,t.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,t.jsxs)(e.span,{className:"base",children:[(0,t.jsx)(e.span,{className:"strut",style:{height:"0.6444em"}}),(0,t.jsx)(e.span,{className:"mord",children:"100"})]})]})]})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h3,{id:"5-matlab-implementation-of-soh",children:"5. MATLAB Implementation of SoH"}),"\n",(0,t.jsx)(e.h4,{id:"algorithm-design",children:"Algorithm Design"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsx)(e.li,{children:"Create a Cycle vs. Capacity Loss Lookup Table."}),"\n",(0,t.jsx)(e.li,{children:"Implement the SoH estimation algorithm using cycle count and duty data."}),"\n"]}),"\n",(0,t.jsx)(e.h4,{id:"pseudo-code",children:"Pseudo-Code"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-matlab",children:"% Define battery parameters\nrated_capacity = 100; % in Ah\ncycle_count = 0;\n\n% Define Lookup Table (Cycle vs Capacity Loss)\nlookup_table = [0, 100; 500, 90; 1000, 80; 1500, 70];\n\n% Cycle Counting Algorithm\nif start_soc < end_soc\n    cycle_increment = (end_soc - start_soc) / 100;\n    cycle_count = cycle_count + cycle_increment;\nend\n\n% SoH Estimation\nremaining_capacity = interp1(lookup_table(:,1), lookup_table(:,2), cycle_count, 'linear', 'extrap');\nSoH = (remaining_capacity / rated_capacity) * 100;\n\n% Output Results\ndisp(['Current SoH: ', num2str(SoH), '%']);\n"})})]})}function d(s={}){const{wrapper:e}={...(0,l.R)(),...s.components};return e?(0,t.jsx)(e,{...s,children:(0,t.jsx)(h,{...s})}):h(s)}},8453:(s,e,a)=>{a.d(e,{R:()=>i,x:()=>c});var n=a(6540);const t={},l=n.createContext(t);function i(s){const e=n.useContext(l);return n.useMemo((function(){return"function"==typeof s?s(e):{...e,...s}}),[e,s])}function c(s){let e;return e=s.disableParentContext?"function"==typeof s.components?s.components(t):s.components||t:i(s.components),n.createElement(l.Provider,{value:e},s.children)}}}]);